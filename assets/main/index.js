System.register("chunks:///_virtual/AbstractItemInstance.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"44110NacAFIBbts1gc6FlVi","AbstractItemInstance",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Animations.ts",["cc"],(function(t){var n,e,c;return{setters:[function(t){n=t.cclegacy,e=t.tween,c=t.Vec3}],execute:function(){n._RF.push({},"05ce8f5F49E8qQQI2iEvC76","Animations",void 0);t("Animations",function(){function t(){}return t.button=function(t,n){e(t).to(.3,{scale:new c(1.2,1.2,1.2)}).to(.3,{scale:n}).start()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/APIConfig.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a28d0D46k9JpY8DzWL3/dcV","APIConfig",void 0);var n=t("APIConfig",function(){function t(){this.baseURL=void 0,this.timeout=void 0,this.baseURL=t.REMOTE,this.timeout=1e4}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var e=t.prototype;return e.getBaseURL=function(){return this.baseURL},e.getTimeout=function(){return this.timeout},e.setBaseURL=function(t){this.baseURL=t},e.setTimeout=function(t){this.timeout=t},t}());n.LOCAL="http://localhost:3000",n.REMOTE="https://ec2-13-61-196-33.eu-north-1.compute.amazonaws.com:3000",n.instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/Attackable.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"32224V5Tr5KObbaaWo9Mthh","Attackable",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/AuthInterceptor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TokenManager.ts"],(function(e){var t,n,r;return{setters:[function(e){t=e.extends},function(e){n=e.cclegacy},function(e){r=e.TokenManager}],execute:function(){n._RF.push({},"eaeac6kWtRDa5kLfW2S2fUc","AuthInterceptor",void 0);e("AuthInterceptor",function(){function e(){}return e.prototype.intercept=function(e){var n=r.getInstance();return n.hasToken()&&(e.headers=t({},e.headers,{Authorization:"Bearer "+n.getToken()})),e},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AuthService.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"b1a60yB1NNNg57+tAR6lJCr","AuthService",void 0);t("AuthService",function(){function t(t){this.httpClient=void 0,this.httpClient=t}return t.prototype.login=function(){var t=e(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.httpClient.post("/auth/login",e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BaseDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogManager.ts"],(function(e){var t,n,i,o,a,c,l,s,r,u,p,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,c=e._decorator,l=e.Button,s=e.BlockInputEvents,r=e.UIOpacity,u=e.Vec3,p=e.tween,h=e.Component},function(e){f=e.DialogManager}],execute:function(){var v,g,d,_,b,D,w,y;a._RF.push({},"8a47e4LfLJGi6enGN8lY2XD","BaseDialog",void 0);var m=c.ccclass,C=c.property;e("BaseDialog",(v=m("BaseDialog"),g=C(l),v((b=t((_=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(t,"backButton",b,o(t)),i(t,"openDuration",D,o(t)),i(t,"closeDuration",w,o(t)),i(t,"animation",y,o(t)),t._activeTween=null,t._content=null,t.keepVisible=!1,t}n(t,e);var a=t.prototype;return a.start=function(){var e;null==(e=this.backButton)||e.node.on(l.EventType.CLICK,this.close,this),this.node&&(this._content=this.node.getChildByName("Content"),this.node.active=!1),this.node.addComponent(s)},a.onDialogOpen=function(){},a.onDialogClose=function(){},a.blockUI=function(){this.node.active=!0},a.unblockUI=function(){this.node.active=!0},a.setActive=function(e){var t=this;if(this.node)if(this._activeTween&&(this._activeTween.stop(),this._activeTween=null),e){if(this.node.active=!0,this.onDialogOpen(),this._content.active=!0,!this.keepVisible&&this.animation){var n=this._content.getComponent(r)||this._content.addComponent(r);n.opacity=0,this.scheduleOnce((function(){t._content.scale=new u(0,0,1),n.opacity=255,t._activeTween=p(t._content).to(t.openDuration,{scale:new u(1,1,1)},{easing:"backOut",onComplete:function(){t._activeTween=null}}).start()}),0)}}else this.animation?this.scheduleOnce((function(){t._activeTween=p(t._content).to(t.closeDuration,{scale:new u(0,0,1)},{easing:"backIn",onComplete:function(){t._activeTween=null,t.node.active=!1,t._content.active=!1,t._content.scale=new u(1,1,1),t.onDialogClose()}}).start()}),0):(this.node.active=!1,this._content.active=!1,this.onDialogClose())},a.close=function(){f.instance.popDialog()},t}(h)).prototype,"backButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(_.prototype,"openDuration",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),w=t(_.prototype,"closeDuration",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),y=t(_.prototype,"animation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=_))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/Battle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"73406kIuudMwLiN9wZ9ULe9","Battle",void 0);t("Battle",function(){function t(t,e){this.attacker=void 0,this.defender=void 0,this._winner=null,this._battleLog=void 0,this.attacker=t,this.defender=e,this.battleLog=[]}var a=t.prototype;return a.rollAttack=function(t){return this.rollDice("1d20")+t.attackRoll},a.rollDamage=function(t){var e=this;return t.damageDice.map((function(t){return{type:t.type,value:e.rollDice(t.dice)}}))},a.rollDice=function(t){for(var e=t.split("d").map(Number),a=e[0],i=e[1],r=0,o=0;o<a;o++){r+=Math.floor(Math.random()*i)+1}return r},a.calculateDamage=function(t,e){var a=0,i=this.rollAttack(t.stats);(this.log("Attack roll: "+this.colorNum(i),t),i>=e.stats.armorClass)?this.rollDamage(t.stats).forEach((function(t){a+=t.value})):this.log("Misses! "+e.name+"'s AC: "+this.colorNum(e.stats.armorClass)+".",t);return 20===i&&(a*=t.stats.criticalMultiplier,a=Math.floor(a),this.log("Critical hit!",t)),Math.max(1,a)},a.log=function(t,e,a){void 0===a&&(a=0),this.battleLog.push({message:t,owner:e,currentHp:a})},a.battle=function(){var t,e,a=Math.floor(20*Math.random())+1+this.attacker.stats.initiative,i=Math.floor(20*Math.random())+1+this.defender.stats.initiative;if(this.log("Initiative roll: "+this.colorNum(a),this.attacker,this.attacker.stats.healthPoints),this.log("Initiative roll: "+this.colorNum(i),this.defender,this.defender.stats.healthPoints),a>i)t=this.attacker,e=this.defender;else if(i>a)t=this.defender,e=this.attacker;else{for(;a===i;)a=Math.floor(20*Math.random())+1+this.attacker.stats.initiative,i=Math.floor(20*Math.random())+1+this.defender.stats.initiative;t=a>i?this.attacker:this.defender,e=a>i?this.defender:this.attacker}for(var r=t.stats.healthPoints,o=e.stats.healthPoints,s=!0,n=0;r>0&&o>0&&!(++n>100);){var l=this.calculateDamage(t,e);if(s&&(l=Math.ceil(.95*l),s=!1),o-=l,this.log("Deals "+this.colorNum(l)+" total damage.",t,r),o<=0)break;var h=this.calculateDamage(e,t);r-=h,this.log("Deals "+this.colorNum(h)+" total damage.",e,o)}if(n>100)return r>=o?t:e;var c=r>0?t:e,u=r>0?e:t;return this.log("Defeated!",u,0),this.winner=c,c},a.colorNum=function(t){return"<color=#d75843>"+t+"</color>"},a.printLog=function(){console.log(this.battleLog.map((function(t){return t.message})).join("\n"))},e(t,[{key:"winner",get:function(){return this._winner},set:function(t){this._winner=t}},{key:"battleLog",get:function(){return this._battleLog},set:function(t){this._battleLog=t}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/BattleMessageTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,i,n,s,l,o,p,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,l=e.Sprite,o=e.RichText,p=e.ProgressBar,c=e.Label,u=e.Component}],execute:function(){var h,g,m,f,v,b,y,B,T;n._RF.push({},"94a6d+wKMtA7o/qvlt6wRQC","BattleMessageTemplate",void 0);var d=s.ccclass,M=s.property;e("BattleMessageTemplate",(h=d("BattleMessageTemplate"),g=M(l),m=M(o),f=M(p),h((y=t((b=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,a(t,"avatar",y,i(t)),a(t,"messageRichText",B,i(t)),a(t,"hpBar",T,i(t)),t}return r(t,e),t.prototype.setup=function(e,t,r,a){if(void 0===a&&(a=null),this.messageRichText&&(this.messageRichText.string=e),this.hpBar){var i=Math.max(0,Math.min(1,t/r));this.hpBar.progress=i;var n=this.hpBar.node.getComponentInChildren(c);n&&(n.string=""+t),a&&(this.avatar.spriteFrame=a)}},t}(u)).prototype,"avatar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(b.prototype,"messageRichText",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(b.prototype,"hpBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./GameApp.ts","./BattleMessageTemplate.ts","./DialogManager.ts","./DataLoader.ts","./ItemInstance.ts","./LootSystem.ts"],(function(e){var t,n,a,i,s,o,r,l,u,c,g,p,h,f,d,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,r=e.ScrollView,l=e.Prefab,u=e.instantiate},function(e){c=e.BaseDialog},function(e){g=e.GameApp},function(e){p=e.BattleMessageTemplate},function(e){h=e.DialogManager},function(e){f=e.DataLoader},function(e){d=e.ItemInstance},function(e){w=e.LootSystem}],execute:function(){var m,b,y,v,M,B,D,L,P;s._RF.push({},"9cc9fB8k5pL8ppv5DaOHwt7","BattleWindow",void 0);var S=o.ccclass,I=o.property;e("BattleWindow",(m=S("BattleWindow"),b=I(r),y=I(l),v=I(l),m((D=t((B=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,a(t,"battleLog",D,i(t)),a(t,"playerMessagePrefab",L,i(t)),a(t,"enemyMessagePrefab",P,i(t)),t.logMessages=null,t.location=null,t.winner=null,t.isResultShowed=!1,t}n(t,e);var s=t.prototype;return s.start=function(){e.prototype.start.call(this)},s.setup=function(e,t){var n=this;this.battleLog.content.removeAllChildren(),this.isResultShowed=!1,this.logMessages=t.battleLog,this.winner=t.winner,this.location=e;g.instance.getHero();var a=null,i=[],s=null,o=this.logMessages;o.forEach((function(e,t){var r=e.owner;t<2?n.addBattleMessage(e.message,e):(null===a||r===a?(a=r,i.push(e.message),s=e):(n.addBattleMessage(i.join("\n"),s),a=r,s=e,i=[e.message]),t===o.length-1&&n.addBattleMessage(i.join("\n"),s))}))},s.addBattleMessage=function(e,t){var n=this,a=g.instance.getHero(),i=t.owner===a,s=t.owner,o=i?this.playerMessagePrefab:this.enemyMessagePrefab,r=u(o),l=r.getComponent(p),c=i?null:this.location.spriteFrame;l.setup(e,t.currentHp,s.stats.healthPoints,c);var h=this.battleLog.content;r.parent=h,this.scheduleOnce((function(){n.battleLog.scrollToBottom()}),0)},s.onDialogOpen=function(){var e=g.instance.getHero();if(e===this.winner||this.isResultShowed){if(e===this.winner&&!this.isResultShowed){this.isResultShowed=!0;for(var t=new w(this.location.loot),n=[],a=0;a<2;a++){var i=t.roll();n.push(i)}var s=n.map((function(e){if(!e)return null;var t=f.getInstance().getItemById(e.id),n=new d(t);return n.setGrade(e.grade),n})).filter(Boolean),o=h.instance.getDialog("VictoryWindow");o&&(o.setup(s),h.instance.pushDialog(o,!0))}}else{this.isResultShowed=!0;var r=h.instance.getDialog("DefeatWindow");r&&h.instance.pushDialog(r,!0)}},t}(c)).prototype,"battleLog",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(B.prototype,"playerMessagePrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(B.prototype,"enemyMessagePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=B))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/CongratulationWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts"],(function(t){var e,o,n,i,r,a,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node},function(t){l=t.BaseDialog},function(t){u=t.ItemIconTemplate}],execute:function(){var s,p,f,d,g;r._RF.push({},"ff75a0uVCJH7abHEqoya09U","CongratulationWindow",void 0);var m=a.ccclass,y=a.property;t("CongratulationWindow",(s=m("CongratulationWindow"),p=y(c),s((g=e((d=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"itemIconNode",g,i(e)),e}return o(e,t),e.prototype.setup=function(t){this.itemIconNode.getComponent(u).setup(t)},e}(l)).prototype,"itemIconNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/Consumable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"954adEEvUVAurBb+7xVaQBn","Consumable",void 0);t("Consumable",function(){function t(t,n){void 0===n&&(n=[]),this.itemInstance=void 0,this.effects=void 0,this.itemInstance=t,this.effects=n}var e=t.prototype;return e.use=function(t){this.isInStock()?(console.log("Using "+this.name+" on target."),this.effects.forEach((function(n){"function"==typeof n.apply?n.apply(t):console.error('Effect "'+n.description+'" is invalid.')})),this.itemInstance.count-=1):console.log("Cannot use "+this.name+". Out of stock.")},e.isInStock=function(){return this.itemInstance.count>0},e.remainingUses=function(){return this.itemInstance.count},n(t,[{key:"name",get:function(){return this.itemInstance.getName()}},{key:"count",get:function(){return this.itemInstance.count},set:function(t){this.itemInstance.count=t}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ContentTypeInterceptor.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.extends},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"bcd6194JQdFRr5qs4RdiK8V","ContentTypeInterceptor",void 0);e("ContentTypeInterceptor",function(){function e(){}return e.prototype.intercept=function(e){return e.headers=t({},e.headers,{"Content-Type":"application/json"}),e},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CraftWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./ItemFilter.ts","./DataLoader.ts","./GridLayout.ts","./GameApp.ts","./ItemInstance.ts","./DialogManager.ts"],(function(e){var t,n,i,r,a,o,s,c,l,u,d,f,h,p,g,m,I,v,b,C,y,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,s=e._decorator,c=e.Prefab,l=e.Node,u=e.Label,d=e.Button,f=e.view,h=e.instantiate,p=e.Color},function(e){g=e.BaseDialog},function(e){m=e.ItemIconTemplate},function(e){I=e.ItemFilter},function(e){v=e.DataLoader},function(e){b=e.GridLayout},function(e){C=e.GameApp},function(e){y=e.ItemInstance},function(e){w=e.DialogManager}],execute:function(){var L,D,E,G,S,B,W,z,F,M,A,T,H,O,P,R,_,k,x;o._RF.push({},"607bb1isuxFH47UC6ae7X42","CraftWindow",void 0);var X=s.ccclass,q=s.property;e("CraftWindow",(L=X("CraftWindow"),D=q(c),E=q(l),G=q([l]),S=q([u]),B=q(l),W=q(l),z=q(l),F=q(d),L((T=t((A=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"itemPrefab",T,r(t)),i(t,"selectedItem",H,r(t)),i(t,"ingredients",O,r(t)),i(t,"ingredientCountLabels",P,r(t)),i(t,"content",R,r(t)),i(t,"separator",_,r(t)),i(t,"itemFilter",k,r(t)),i(t,"craftButton",x,r(t)),t.selectedItemInstance=null,t.gradeOrder=["D","C","B","A","S","SS","X"],t}n(t,e);var o=t.prototype;return o.start=function(){var t=this;e.prototype.start.call(this),f.on("canvas-resize",(function(){t.setupGrid()})),this.itemFilter.on("ITEMS_FILTERED",(function(e){t.displayItems(e)})),this.craftButton.node.on(d.EventType.CLICK,this.onCraftButtonClick,this),this.resetCraftWindow()},o.onDialogOpen=function(){this.setupGrid(),this.refreshList()},o.onDialogClose=function(){this.resetCraftWindow()},o.onCraftButtonClick=function(){var e=this;if(this.selectedItemInstance){var t=this.getLowerGrade(this.selectedItemInstance.grade);if(t){var n=w.instance.getDialog("MaterialSelectionWindow");if(n){var i=C.instance.getHero().getInventory(),r=this.getReservedItems(i,t);n.setup({type:this.selectedItemInstance.item.type,grade:t,requiredCount:4,reservedItems:r,onConfirm:function(t){e.onMaterialsSelected(t)}}),w.instance.pushDialog(n,!0)}}}},o.getReservedItems=function(e,t){for(var n,i=[],r=0,o=a(e.getAllItems());!(n=o()).done;){var s=n.value;if(r>=2)break;s.item.id!==this.selectedItemInstance.item.id||s.grade!==t||s.isEquipped||(i.push(s),r++)}return i},o.onMaterialsSelected=function(e){if(this.selectedItemInstance&&!(e.length<4)){var t=C.instance.getHero().getInventory(),n=this.getLowerGrade(this.selectedItemInstance.grade),i=this.getReservedItems(t,n);if(!(i.length<2)){i.forEach((function(e){t.removeItem(e.id)})),e.forEach((function(e){t.removeItem(e.id)}));var r=this.addCraftedItem(t);this.resetCraftWindow(),this.openCongratulationWindow(r)}}},o.addCraftedItem=function(e){var t=new y(this.selectedItemInstance.item);return t.setGrade(this.selectedItemInstance.grade),e.addItem(t),t},o.openCongratulationWindow=function(e){var t=w.instance.getDialog("CongratulationWindow");t&&(t.setup(e),w.instance.pushDialog(t,!0))},o.resetCraftWindow=function(){this.selectedItemInstance=null,this.selectedItem.active=!1,this.ingredients.forEach((function(e){e.active=!1})),this.resetLabels()},o.refreshList=function(){var e=v.getInstance().getAllItems(),t=[];["C","B","A","S","SS","X"].forEach((function(n){e.forEach((function(e){e.grades[n]&&t.push({type:e.type,grade:n,item:e})}))})),this.itemFilter.getComponent(I).setItems(t)},o.displayItems=function(e){var t=this;this.content&&(this.content.removeAllChildren(),e.forEach((function(e){var n=h(t.itemPrefab);n.getComponent(m).setup(e),n.on(l.EventType.TOUCH_END,(function(){t.onItemSelected(e)})),t.content.addChild(n)})))},o.getLowerGrade=function(e){var t=this.gradeOrder.indexOf(e);return t<=0?null:this.gradeOrder[t-1]},o.onItemSelected=function(e){this.ingredients.forEach((function(e){e.active=!1})),this.selectedItem.active=!0,this.selectedItemInstance=e,this.setupIcon(this.selectedItem,e);var t=this.getLowerGrade(e.grade);if(t){var n={type:e.type,grade:t,item:e.item},i=C.instance.getHero().getInventory(),r=i.getItemCount(e.item.id,t),a=i.getItemCountByTypeAndGrade(e.item.type,t);this.setupIcon(this.ingredients[0],n),this.setupIcon(this.ingredients[1],n);var o=Math.min(r,1);this.updateIngredientLabel(0,o,1),r-=o;var s=Math.min(r,1);this.updateIngredientLabel(1,s,1),r-=s,this.ingredients.forEach((function(e){e.active=!0}));var c={type:e.type,grade:t,item:null};this.setupIcon(this.ingredients[2],c);var l=o+s;if(e.item.type){var u=a-l,d=Math.min(u,4);this.updateIngredientLabel(2,d,4)}}},o.resetLabels=function(){this.ingredientCountLabels.forEach((function(e){e.node.active=!1}))},o.updateIngredientLabel=function(e,t,n){if(this.ingredientCountLabels[e]){var i=this.ingredientCountLabels[e];i.string=t+"/"+n;var r=t>=n;i.color=r?new p(255,255,255,255):new p(255,0,0,255),this.ingredientCountLabels[e].node.active=!0}},o.setupIcon=function(e,t){e.getComponent(m).setup(t)},o.setupGrid=function(){new b(168,50,this.content,[this.separator]).setupGrid()},t}(g)).prototype,"itemPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(A.prototype,"selectedItem",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"ingredients",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(A.prototype,"ingredientCountLabels",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=t(A.prototype,"content",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(A.prototype,"separator",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(A.prototype,"itemFilter",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(A.prototype,"craftButton",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=A))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/Crystal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SummonService.ts","./ItemIconTemplate.ts","./DialogManager.ts","./Animations.ts"],(function(t){var i,n,e,o,s,a,r,l,m,u,c,g,h,d,p,f,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.Button,l=t.Node,m=t.Toggle,u=t.UIOpacity,c=t.tween,g=t.Vec3,h=t.Component},function(t){d=t.SummonService},function(t){p=t.ItemIconTemplate},function(t){f=t.DialogManager},function(t){y=t.Animations}],execute:function(){var v,C,I,b,X,S,k,A,L,B,w,T,z,R,D;s._RF.push({},"01184GBT2tIYr5+kMXiCT6X","Crystal",void 0);var M=a.ccclass,_=a.property;t("Crystal",(v=M("Crystal"),C=_(r),I=_(l),b=_(l),X=_(m),S=_(m),k=_(l),v((B=i((L=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,e(i,"crystalButton",B,o(i)),e(i,"summonedItem",w,o(i)),e(i,"starBackground",T,o(i)),e(i,"toggleX1",z,o(i)),e(i,"toggleX10",R,o(i)),e(i,"summonLigth",D,o(i)),i.crystal=null,i.isAnimating=!1,i.isStarRotating=!1,i.summonService=void 0,i}n(i,t);var s=i.prototype;return s.start=function(){var t,i,n;null==(t=this.crystalButton)||t.node.on(r.EventType.CLICK,this.summon,this),this.crystal=this.crystalButton.node,null==(i=this.toggleX1)||i.node.on("toggle",this.onToggleChanged,this),null==(n=this.toggleX10)||n.node.on("toggle",this.onToggleChanged,this),this.summonedItem&&(this.summonedItem.active=!1),this.summonLigth.active=!1,this.summonService=d.getInstance()},s.onToggleChanged=function(t){t===this.toggleX1&&this.toggleX1.isChecked?this.toggleX10.isChecked=!1:t===this.toggleX10&&this.toggleX10.isChecked?this.toggleX1.isChecked=!1:t!==this.toggleX10||this.toggleX10.isChecked?t!==this.toggleX1||this.toggleX1.isChecked||(this.toggleX10.isChecked=!0):this.toggleX1.isChecked=!0},s.summon=function(){if(!this.isAnimating){var t=this.toggleX1.isChecked,i=t?1:10,n=this.summonService.generateItems(i);if(this.summonService.addItemsToInventory(n),t){this.summonedItem.getComponent(p).setup(n[0]),this.playSummonAnimation()}else{this.playeCrystalAnimation();var e=f.instance.getDialog("SummonWindow");e&&(e.setItems(n),f.instance.pushDialog(e))}}},s.playeCrystalAnimation=function(){var t=this.crystal.scale.clone();y.button(this.crystal,t)},s.playSummonAnimation=function(){this.isAnimating=!0,this.summonedItem.active=!1,this.summonLigth.active=!1,this.playeCrystalAnimation(),this.starBackground&&this.startStarRotation()},s.summonLightAnimation=function(){if(this.summonLigth){var t=this.summonLigth.getComponent(u)||this.summonLigth.addComponent(u);t.opacity=0,this.summonLigth.active=!0,c(t).to(1,{opacity:255}).call((function(){})).start()}},s.summonItemAnimation=function(){var t=this;this.summonedItem&&(this.summonedItem.setPosition(0,0,0),this.summonedItem.scale=new g(0,0,0),this.summonedItem.active=!0,c(this.summonedItem).to(.5,{scale:new g(1,1,1)},{easing:"backOut"}).call((function(){t.isAnimating=!1})).start())},s.startStarRotation=function(){var t=this;if(!this.isStarRotating){this.isStarRotating=!0;c(t.starBackground).to(1.5,{angle:t.starBackground.angle+360}).call((function(){t.isStarRotating=!1,t.summonLightAnimation(),t.summonItemAnimation()})).start()}},i}(h)).prototype,"crystalButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(L.prototype,"summonedItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(L.prototype,"starBackground",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(L.prototype,"toggleX1",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(L.prototype,"toggleX10",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(L.prototype,"summonLigth",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=L))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/CustomSlider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,i,s,n,o,u,a,l,c,h,p,d,g;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,u=t.Sprite,a=t.Slider,l=t.Node,c=t.Label,h=t.Button,p=t.UITransform,d=t.Vec3,g=t.Component}],execute:function(){var b,f,P,m,y,v,C,S,B,w,L,z,x,I,k,M,T;n._RF.push({},"15582/iGYxFhIZQITIjez4/","CustomSlider",void 0);var _=o.ccclass,D=o.property;t("CustomSlider",(b=_("CustomSlider"),f=D(u),P=D(u),m=D(a),y=D(l),v=D(c),C=D(h),S=D(h),b((L=r((w=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r=t.call.apply(t,[this].concat(n))||this,i(r,"barBackground",L,s(r)),i(r,"progressSprite",z,s(r)),i(r,"slider",x,s(r)),i(r,"handle",I,s(r)),i(r,"progressLabel",k,s(r)),i(r,"addButton",M,s(r)),i(r,"subButton",T,s(r)),r.currentProgress=0,r.maxCapacity=25,r.step=1,r}e(r,t);var n=r.prototype;return n.start=function(){var t,r;this.setProgress(this.currentProgress),this.slider.node.on("slide",this.handleSliderMove,this),null==(t=this.addButton)||t.node.on(h.EventType.CLICK,this.addProgress,this),null==(r=this.subButton)||r.node.on(h.EventType.CLICK,this.subProgress,this)},n.handleSliderMove=function(){this.currentProgress=Math.round(this.slider.progress*this.maxCapacity),this.setProgress(this.currentProgress)},n.getSliderWidth=function(){var t;return(null==(t=this.barBackground)||null==(t=t.getComponent(p))?void 0:t.width)||0},n.updateProgressSprite=function(t){var r,e,i,s=this.getSliderWidth(),n=s*t,o=-s*(null!=(r=null==(e=this.barBackground.node.getComponent(p))?void 0:e.anchorX)?r:.5),u=null==(i=this.progressSprite)?void 0:i.getComponent(p);u&&(u.width=n,this.progressSprite.node.setPosition(new d(o,0,0)))},n.updateProgressLabel=function(t){void 0===t&&(t=this.currentProgress),this.progressLabel&&(this.progressLabel.string=t+"/"+this.maxCapacity)},n.setProgress=function(t,r){void 0!==r&&(this.maxCapacity=r),this.slider.progress=Math.min(1,t/this.maxCapacity),this.updateProgressLabel(t),this.updateProgressSprite(this.slider.progress),this.updateButtonStates()},n.updateButtonStates=function(){this.addButton&&(this.addButton.interactable=this.currentProgress<this.maxCapacity),this.subButton&&(this.subButton.interactable=this.currentProgress>0)},n.addProgress=function(){this.currentProgress<this.maxCapacity&&(this.currentProgress+=this.step,this.setProgress(this.currentProgress))},n.subProgress=function(){this.currentProgress>0&&(this.currentProgress-=this.step,this.setProgress(this.currentProgress))},r}(g)).prototype,"barBackground",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(w.prototype,"progressSprite",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=r(w.prototype,"slider",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(w.prototype,"handle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=r(w.prototype,"progressLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(w.prototype,"addButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(w.prototype,"subButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=w))||B));n._RF.pop()}}}));

System.register("chunks:///_virtual/DataLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameLocation.ts","./items.json","./locations.json","./shop.json","./Shop.ts"],(function(t){var e,n,r,o,a,i,s,c,u,l,f,m,p;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime,o=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,i=t.resources,s=t.SpriteFrame},function(t){c=t.EventBus},function(t){u=t.GameLocation},function(t){l=t.default},function(t){f=t.default},function(t){m=t.default},function(t){p=t.Shop}],execute:function(){a._RF.push({},"0dc078r1SlNwqDu+WRKrQaU","DataLoader",void 0);var h=t("ItemGrade",function(t){return t.D="D",t.C="C",t.B="B",t.A="A",t.S="S",t.SS="SS",t}({})),d=t("ASSETS_LOADED_EVENT","assets-loaded"),v=t("ItemType",function(t){return t.WEAPON="weapon",t.ARMOR="armor",t.RING="ring",t.AMULET="amulet",t.ACCESSORY="accessory",t.PET="pet",t}({}));t("DataLoader",function(){function t(){this.items=null,this.spriteFramesByItemId=new Map,this.spriteFramesByCurrencyId=new Map,this.heroSpriteFramesByItemId=new Map,this.commonSpriteFrames=new Map,this._locations=new Map,this._shop=null,this.BASE_PATH="common_item_icon",this.items=l.items,this.shop=new p(m)}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var a=t.prototype;return a.load=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([this.loadItems(),this.loadCommonIcons(),this.loadLocations(),this.loadCurrencyIcons()]);case 3:c.emit(d,null),console.log("All assets loaded successfully"),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.error("Error loading assets:",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),a.loadSpriteFrame=function(t){return new Promise((function(e,n){i.load(t+"/spriteFrame",s,(function(r,o){if(r)return console.error("Failed to load sprite frame at "+t+":",r),void n(r);e(o)}))}))},a.loadLocations=function(){var t=n(r().mark((function t(){var e,n,a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=o(f);!(n=e()).done;)a=n.value,i=new u(a),this._locations.set(i.id,i);return t.next=3,Promise.all(Array.from(this._locations.values()).map((function(t){return t.loadSprite()})));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.loadItems=function(){var t=n(r().mark((function t(){var e,n,a,i,s=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=r().mark((function t(){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=i.value,e.push(s.loadSpriteFrame(n.imagePath).then((function(t){s.spriteFramesByItemId.set(n.id,t)}))),-1===["ring","amulet","etc"].indexOf(n.type)&&(o=n.imagePath.replace("item_icon","hero_icon"),e.push(s.loadSpriteFrame(o).then((function(t){s.heroSpriteFramesByItemId.set(n.id,t)}))));case 4:case"end":return t.stop()}}),t)})),a=o(this.items);case 3:if((i=a()).done){t.next=7;break}return t.delegateYield(n(),"t0",5);case 5:t.next=3;break;case 7:return t.next=9,Promise.all(e);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.loadCurrencyIcons=function(){var t=n(r().mark((function t(){var e,n,o=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Map([[57,"coin"],[58,"gem"]]),n=Array.from(e.entries()).map((function(t){var e=t[0],n=t[1];return o.loadSpriteFrame("/currency_icon/"+n).then((function(t){o.spriteFramesByCurrencyId.set(e,t)}))})),t.next=4,Promise.all(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a.loadCommonIcons=function(){var t=n(r().mark((function t(){var e,n,o,a=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[h.D,h.C,h.B,h.A,h.S],n=[v.WEAPON,v.ARMOR,v.RING,v.AMULET,v.ACCESSORY,v.PET],o=[],e.forEach((function(t){n.forEach((function(e){var n=a.getIconPath(t,e),r=a.loadSpriteFrame(n).then((function(n){a.commonSpriteFrames.set(a.getIconKey(t,e),n)}));o.push(r)}))})),t.next=6,Promise.all(o);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a.getIconPath=function(t,e){return this.BASE_PATH+"/"+t+"_"+e},a.getIconKey=function(t,e){return t+"_"+e},a.getCommonIcon=function(t,e){var n=this.getIconKey(t,e),r=this.commonSpriteFrames.get(n);return r||(console.warn("Common icon not found for grade "+t+" and type "+e),null)},a.getAllItems=function(){if(!this.items)throw new Error("Items data is not loaded!");return this.items},a.getItemById=function(t){if(!this.items)throw new Error("Items data is not loaded!");var e=this.items.find((function(e){return e.id===t}));if(!e)throw new Error('Item with ID "'+t+'" not found!');return e},a.getAllLocations=function(){return Array.from(this._locations.values())},e(t,[{key:"shop",get:function(){return this._shop},set:function(t){this._shop=t}}]),t}()).instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DefeatWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts"],(function(e){var t,n,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},function(e){i=e.BaseDialog}],execute:function(){var r;n._RF.push({},"651f4NRMy9JbqEkFexLzUE4","DefeatWindow",void 0);var c=o.ccclass;o.property,e("DefeatWindow",c("DefeatWindow")(r=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.onDialogOpen=function(){},n}(i))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/DialogManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,o,a,l,r,s,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){l=t.cclegacy,r=t._decorator,s=t.Node,c=t.Component}],execute:function(){var g,u,h,d,p,f;l._RF.push({},"483fbkB4mFEWL+7zshRs+QJ","DialogManager",void 0);var k=r.ccclass,v=r.property;t("DialogManager",(g=k("DialogManager"),u=v(s),g(((f=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return(i=t.call.apply(t,[this].concat(a))||this).dialogStack=[],n(i,"dialogContainer",p,o(i)),i}e(i,t);var l=i.prototype;return l.onLoad=function(){null===i._instance?i._instance=this:this.node.destroy()},l.pushDialog=function(t,i){if(void 0===i&&(i=!1),this.dialogStack.length>0){var e=this.dialogStack[this.dialogStack.length-1];if(e===t)return;i?e.keepVisible=!0:(e.setActive(!1),e.keepVisible=!1)}this.dialogStack.push(t),t.setActive(!0)},l.popDialog=function(){if(this.dialogStack.length>0){var t=this.dialogStack.pop();if(null==t||t.setActive(!1),t.keepVisible=!1,this.dialogStack.length>0)this.dialogStack[this.dialogStack.length-1].setActive(!0)}this.dialogStack.length},l.closeAllDialogs=function(){for(;this.dialogStack.length>0;){var t=this.dialogStack.pop();null==t||t.setActive(!1)}},l.getDialog=function(t){if(!this.dialogContainer)return console.error("Dialog container not set!"),null;var i=this.dialogContainer.getChildByName(t);if(!i)return console.error("Dialog node "+t+" not found!"),null;var e=i.getComponent(t);return e||(console.error("Dialog component "+t+" not found on node!"),null)},a(i,null,[{key:"instance",get:function(){return i._instance}}]),i}(c))._instance=null,p=i((d=f).prototype,"dialogContainer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/Equipment.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"ab39dc2TZhLxbW4M77Vdare","Equipment",void 0);e("Equipment",function(){function e(e){this.itemInstance=void 0,this.item=void 0,this.itemInstance=e,this.item=e.getItemTemplate()}var i=e.prototype;return i.equipItem=function(e){var t=this.item,i=this.itemInstance.getGrade(),a=t.grades[i];this.itemInstance.getEnchantLevel();if("weapon"===t.type){var n,r=a;e.attackRoll+=r.attackBonus,(n=e.damageDice).push.apply(n,r.damageDice)}else if("armor"===t.type){var s=a;e.armorClass+=s.armorClass}else if("accessory"===t.type){var c=a;e.healthPoints+=c.healthPoints}else if("amulet"===t.type){var l=a;e.initiative+=l.initiative}else if("ring"===t.type){var o=a;e.criticalMultiplier+=o.criticalMultiplier}else if("pet"===t.type){var p;(p=e.damageDice).push.apply(p,a.damageDice)}},i.unequipItem=function(e){var t=this.item,i=this.itemInstance.getGrade(),a=t.grades[i];if("weapon"===t.type){var n=a;e.attackRoll-=n.attackBonus,this.removeDamageDices(e,a)}else if("armor"===t.type){var r=a;e.armorClass-=r.armorClass}else if("accessory"===t.type){var s=a;e.healthPoints-=s.healthPoints}else if("amulet"===t.type){var c=a;e.initiative-=c.initiative}else if("ring"===t.type){var l=a;e.criticalMultiplier-=l.criticalMultiplier}else"pet"===t.type&&this.removeDamageDices(e,a)},i.removeDamageDices=function(e,t){var i=[].concat(t.damageDice),a=[].concat(e.damageDice);i.forEach((function(e){var t=a.findIndex((function(t){return t.type===e.type&&t.dice===e.dice}));-1!==t&&a.splice(t,1)})),e.damageDice=a},e.fromItemInstance=function(t){return new e(t)},t(e,[{key:"enchantLevel",get:function(){return this.itemInstance.getEnchantLevel()}},{key:"isEquipped",get:function(){return this.itemInstance.isEquipped}},{key:"grade",get:function(){return this.itemInstance.grade}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/EquippedItems.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ee6f2WBbFVN57hG7oOoPu71","EquippedItems",void 0);e("EquippedItems",function(){function e(){this.armor=null,this.weapon=null,this.pet=null,this.accessory=null,this.ring=null,this.amulet=null}var t=e.prototype;return t.equip=function(e){switch(e.item.type){case"armor":this.armor=e;break;case"weapon":this.weapon=e;break;case"pet":this.pet=e;break;case"accessory":this.accessory=e;break;case"ring":this.ring=e;break;case"amulet":this.amulet=e;break;default:return void console.log("Item type "+e.item.type+" cannot be equipped.")}},t.unequip=function(e){var t,s,i,n,r,a;switch(e.item.type){case"armor":(null==(t=this.armor)?void 0:t.id)===e.id&&(this.armor=null);break;case"weapon":(null==(s=this.weapon)?void 0:s.id)===e.id&&(this.weapon=null);break;case"pet":(null==(i=this.pet)?void 0:i.id)===e.id&&(this.pet=null);break;case"accessory":(null==(n=this.accessory)?void 0:n.id)===e.id&&(this.accessory=null);break;case"ring":(null==(r=this.ring)?void 0:r.id)===e.id&&(this.ring=null);break;case"amulet":(null==(a=this.amulet)?void 0:a.id)===e.id&&(this.amulet=null)}},t.isItemTypeEquipped=function(e){switch(e){case"armor":return null!==this.armor;case"weapon":return null!==this.weapon;case"pet":return null!==this.pet;case"accessory":return null!==this.accessory;case"ring":return null!==this.ring;case"amulet":return null!==this.amulet;default:return console.log("Unknown item type: "+e),!1}},t.getEquippedItemByType=function(e){switch(e){case"armor":return this.armor;case"weapon":return this.weapon;case"pet":return this.pet;case"accessory":return this.accessory;case"ring":return this.ring;case"amulet":return this.amulet;default:return console.log("Unknown item type: "+e),null}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/EquippedItemsComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemIconTemplate.ts","./EventBus.ts","./TooltipTrigger.ts","./StatToStringConverter.ts","./GameApp.ts","./DataLoader.ts"],(function(e){var t,n,i,r,o,a,c,p,u,s,l,m,h,I,d,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,p=e.Sprite,u=e.SpriteFrame,s=e.instantiate,l=e.Component},function(e){m=e.ItemIconTemplate},function(e){h=e.EventBus},function(e){I=e.TooltipTrigger},function(e){d=e.StatsToStringConverter},function(e){f=e.GameApp},function(e){b=e.DataLoader}],execute:function(){var g,y,w,q,S,v,k,z,C,H,T,E,D,F,A,L,_,B,G,R,U,X,j,x,N;o._RF.push({},"527b7gCZX5CW6Xl9dViQXjk","EquippedItemsComponent",void 0);var P=a.ccclass,M=a.property;e("EquippedItemsComponent",(g=P("EquippedItemsComponent"),y=M(c),w=M(c),q=M(c),S=M(c),v=M(c),k=M(c),z=M(p),C=M(p),H=M(p),T=M(p),E=M(u),g((A=t((F=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"weaponIcon",A,r(t)),i(t,"armorIcon",L,r(t)),i(t,"accessoryIcon",_,r(t)),i(t,"petIcon",B,r(t)),i(t,"amuletIcon",G,r(t)),i(t,"ringIcon",R,r(t)),i(t,"accessory",U,r(t)),i(t,"weapon",X,r(t)),i(t,"armor",j,r(t)),i(t,"pet",x,r(t)),i(t,"defaultArmor",N,r(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){h.on("item-equipped",this.handleItemEquipped.bind(this)),h.on("item-unequipped",this.handleItemUnequipped.bind(this))},o.handleItemEquipped=function(e){this.equip(e)},o.handleItemUnequipped=function(e){this.unequip(e)},o.equip=function(e){switch(e.item.type){case"armor":this.updateItemIcon(this.armorIcon,e),this.updateHeroSprite(this.armor,e);break;case"weapon":this.updateItemIcon(this.weaponIcon,e),this.updateHeroSprite(this.weapon,e);break;case"pet":this.updateItemIcon(this.petIcon,e),this.updateHeroSprite(this.pet,e);break;case"accessory":this.updateItemIcon(this.accessoryIcon,e),this.updateHeroSprite(this.accessory,e);break;case"ring":this.updateItemIcon(this.ringIcon,e);break;case"amulet":this.updateItemIcon(this.amuletIcon,e);break;default:return void console.log("Item type "+e.item.type+" cannot be equipped.")}},o.unequip=function(e){switch(e.item.type){case"armor":this.clearItemIcon(this.armorIcon),this.clearHeroSprite(this.armor);break;case"weapon":this.clearItemIcon(this.weaponIcon),this.clearHeroSprite(this.weapon);break;case"pet":this.clearItemIcon(this.petIcon),this.clearHeroSprite(this.pet);break;case"accessory":this.clearItemIcon(this.accessoryIcon),this.clearHeroSprite(this.accessory);break;case"ring":this.clearItemIcon(this.ringIcon);break;case"amulet":this.clearItemIcon(this.amuletIcon)}},o.updateHeroSprite=function(e,t){e.spriteFrame=b.getInstance().heroSpriteFramesByItemId.get(t.item_id)},o.clearHeroSprite=function(e){e===this.armor?e.spriteFrame=this.defaultArmor:e.spriteFrame=null},o.updateItemIcon=function(e,t){if(e){var n=e.getComponent(m);n&&(n.setup(t),e.active=!0);var i=s(e),r=e.getComponent(I)||e.addComponent(I),o=new d;r.setTooltipData({content:o.getGradeRichText(t),iconNode:i,header:t.item.name,button:{callback:function(){f.instance.getHero().unequip(t),r.hideTooltip()},label:"Unequip"}})}},o.clearItemIcon=function(e){e&&(e.getComponent(m)&&(e.active=!1))},o.onDestroy=function(){h.off("item-equipped",this.handleItemEquipped.bind(this)),h.off("item-unequipped",this.handleItemEquipped.bind(this))},t}(l)).prototype,"weaponIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"armorIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(F.prototype,"accessoryIcon",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(F.prototype,"petIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(F.prototype,"amuletIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(F.prototype,"ringIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(F.prototype,"accessory",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(F.prototype,"weapon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(F.prototype,"armor",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(F.prototype,"pet",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(F.prototype,"defaultArmor",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=F))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/EventBus.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"0d54a1ofkVOLYQuchutZ9Fh","EventBus",void 0),t("EventBus",function(){function t(){}return t.on=function(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)},t.off=function(t,n){this.events[t]&&(this.events[t]=this.events[t].filter((function(t){return t!==n})))},t.emit=function(t,n){this.events[t]&&this.events[t].forEach((function(t){return t(n)}))},t}()).events={},n._RF.pop()}}}));

System.register("chunks:///_virtual/ExperienceProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeroEvent.ts","./EventBus.ts"],(function(e){var r,t,i,n,o,s,a,l,h,c,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.ProgressBar,l=e.Label,h=e.Component},function(e){c=e.HeroEvent},function(e){p=e.EventBus}],execute:function(){var u,E,f,g,b,d,v,L,P;o._RF.push({},"93b73oUuzRJhLC/GUAAXLSx","ExperienceProgressBar",void 0);var x=s.ccclass,B=s.property;e("ExperienceProgressBar",(u=x("ExperienceProgressBar"),E=B(a),f=B(l),g=B(l),u((v=r((d=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o))||this,i(r,"progressBar",v,n(r)),i(r,"levelLabel",L,n(r)),i(r,"experienceLabel",P,n(r)),r.hero=null,r}t(r,e);var o=r.prototype;return o.start=function(){p.on(c.HERO_EXPERIENCE_GAINED,this.onExperienceGained.bind(this)),p.on(c.HERO_LEVEL_UP,this.onLevelUp.bind(this)),p.on(c.HERO_CREATED,this.onHeroCreated.bind(this))},o.onDestroy=function(){p.off(c.HERO_EXPERIENCE_GAINED,this.onExperienceGained.bind(this)),p.off(c.HERO_LEVEL_UP,this.onLevelUp.bind(this)),p.off(c.HERO_CREATED,this.onHeroCreated.bind(this))},o.onHeroCreated=function(e){this.setHero(e)},o.setHero=function(e){this.hero=e,this.updateProgressBar()},o.onExperienceGained=function(e){this.hero&&e.hero===this.hero&&this.updateProgressBar()},o.onLevelUp=function(e){this.hero&&e.hero===this.hero&&this.updateProgressBar()},o.updateProgressBar=function(){if(this.hero&&(this.progressBar&&(this.progressBar.progress=this.hero.getExperienceProgress()/100),this.levelLabel&&(this.levelLabel.string=""+this.hero.level),this.experienceLabel)){var e=this.hero.getExperience(),r=this.hero.getExperienceToNextLevel();this.experienceLabel.string=e+"/"+r+" XP"}},o.refresh=function(){this.updateProgressBar()},r}(h)).prototype,"progressBar",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(d.prototype,"levelLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(d.prototype,"experienceLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=d))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/FlexibleLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,l,n,s,a,c,h,r,u,g,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,a=e.Node,c=e.Size,h=e.view,r=e.Widget,u=e.ResolutionPolicy,g=e.macro,p=e.UITransform,d=e.Component}],execute:function(){var f,v,T,R,m,w,y;n._RF.push({},"ab369XgVlBNQqUEzY+3cj4K","FlexibleLayout",void 0);var b=s.ccclass,k=s.property;e("FlexibleLayout",(f=b("FlexibleLayout"),v=k(a),T=k(a),f((w=t((m=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"bg",w,l(t)),i(t,"statBlock",y,l(t)),t._oldDeviceResolution=null,t.defaultStatTop=null,t.defaultBgTop=null,t.lastCheckTime=0,t}o(t,e);var n=t.prototype;return n.onLoad=function(){this._oldDeviceResolution=new c(0,0),this.makeResponsive()},n.start=function(){var e=this;h.on("canvas-resize",(function(){e.makeResponsive()}))},n.update=function(e){this.lastCheckTime+=e,this.lastCheckTime<.1||(this.lastCheckTime=0,this.makeResponsive())},n.makeResponsive=function(){var e=h.getViewportRect();if(e.width!==this._oldDeviceResolution.width||e.height!==this._oldDeviceResolution.height){this._oldDeviceResolution=new c(e.width,e.height);var t=e.width/e.height,o=h.getDesignResolutionSize(),i=o.width/o.height,l=this.statBlock.getComponent(r),n=this.bg.getComponent(r);null==this.defaultStatTop?(this.defaultStatTop=l.top,this.defaultBgTop=n.top):(l.top=this.defaultStatTop,n.top=this.defaultBgTop),console.log("deviceRatio ="+t),console.log("designRatio ="+i),t>i?h.setResolutionPolicy(u.FIXED_HEIGHT):(h.setResolutionPolicy(u.FIXED_WIDTH),this.fixBlockSize(e,o,i,l,n)),h.setOrientation(g.ORIENTATION_PORTRAIT)}},n.fixBlockSize=function(e,t,o,i,l){console.log("widget.top = "+i.top);var n=e.width/t.width,s=e.width/o;console.log("scale = "+n),console.log("designHeight = "+s),console.log("deviceHeight = "+e.height),console.log(e.height-s);var a=(e.height-s)/n*.5,c=this.defaultStatTop+a,h=this.defaultBgTop+a;console.log("new top = "+c),console.log("new top scaled = "+c*n);var r=this.bg.getComponent(p),u=r.height*n;console.log("this.bg.scale.y = "+this.bg.scale.y),console.log("spriteSize.height = "+u),c*n>u&&(c=r.height,console.log("newTop = spriteSize.height")),l.top=h,l.updateAlignment(),i.top=c,i.updateAlignment()},t}(d)).prototype,"bg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"statBlock",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=m))||R));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameApp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hero.ts","./EventBus.ts","./HeroEvent.ts","./DataLoader.ts","./ItemId.ts","./ServiceLocator.ts","./TokenManager.ts"],(function(e){var n,t,r,o,a,s,i,c,u,p,l,h,_,f,d;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){a=e.cclegacy,s=e._decorator,i=e.Component},function(e){c=e.Hero},function(e){u=e.EventBus},function(e){p=e.HeroEvent},function(e){l=e.ASSETS_LOADED_EVENT,h=e.DataLoader},function(e){_=e.ItemId},function(e){f=e.ServiceLocator},function(e){d=e.TokenManager}],execute:function(){var E,v;a._RF.push({},"1ba51GPMr1MRpM0zMtZa/rR","GameApp",void 0);var g=s.ccclass;s.property,e("GameApp",g("GameApp")(((v=function(e){function a(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e.call.apply(e,[this].concat(r))||this)._hero=null,n}n(a,e);var s=a.prototype;return s.onLoad=function(){console.log("onLoad GameApp"),null===a._instance&&(a._instance=this),u.on(l,this.onAssetsLoaded.bind(this)),h.getInstance().load()},s.init=function(e){var n=this,t=function(e){var t=h.getInstance().getItemById(e);n._hero.addToInventoryAndEquipByTemplate(t)};this._hero=new c(e),t(_.WEAPON_FLAMEFORGED_SWORD),t(_.ARMOR_ROGUE_TUNIC),t(_.AMULET_AMULET_OF_SPEED),t(_.RING_RING_OF_PRECISION),t(_.ACCESSORY_CAT_EARS),t(_.PET_CAT),this._hero.addExperience(200),u.emit(p.HERO_CREATED,this._hero)},s.onAssetsLoaded=function(){this.login({password:"12456",username:"Vampire"})},s.login=function(){var e=r(o().mark((function e(n){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=f.getInstance().getAuthService(),e.next=4,t.login(n);case 4:return r=e.sent,this.handleLoginSuccess(r),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.error("Login failed:",e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),s.handleLoginSuccess=function(e){d.getInstance().setToken(e.token);var n=e.user;this.init(n.username)},s.getHero=function(){return this._hero},t(a,null,[{key:"instance",get:function(){return a._instance}}]),a}(i))._instance=null,E=v))||E);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameLocation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,o=t.resources,n=t.SpriteFrame}],execute:function(){i._RF.push({},"62e09hVC1NCbaZhwhM61vo4","GameLocation",void 0);t("GameLocation",function(){function t(t){this._id=void 0,this._name=void 0,this._loot=void 0,this._imagePath=void 0,this._stats=void 0,this._spriteFrame=null,this._id=t.id,this._name=t.name,this._loot=t.loot,this._imagePath=t.imagePath,this._stats=t.stats}return t.prototype.loadSprite=function(){var t=this;o.load(this._imagePath+"/spriteFrame",n,(function(e,i){e?console.error("Failed to load sprite for location "+t._name+":",e):t._spriteFrame=i}))},e(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"loot",get:function(){return this._loot}},{key:"imagePath",get:function(){return this._imagePath}},{key:"stats",get:function(){return this._stats}},{key:"spriteFrame",get:function(){return this._spriteFrame}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/GameObject.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"79d76QZMnxHdaMedVPck6pp","GameObject",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GridLayout.ts",["cc"],(function(t){var i,e,n;return{setters:[function(t){i=t.cclegacy,e=t.view,n=t.UITransform}],execute:function(){i._RF.push({},"19c77cHVx1LrYX9oIYxEBlK","GridLayout",void 0);t("GridLayout",function(){function t(t,i,e,n,o){if(void 0===n&&(n=[]),void 0===o&&(o=0),this.itemWidth=168,this.itemSpacing=50,this.padding=0,this.content=null,this.nodesToResize=[],this.itemWidth=t,this.itemSpacing=i,this.content=e,null===e)throw new Error;this.nodesToResize=n,this.padding=o}return t.prototype.setupGrid=function(){var t=e.getVisibleSize().width-2*this.padding,i=Math.floor((t+this.itemSpacing)/(this.itemWidth+this.itemSpacing)),o=i*this.itemWidth+(i-1)*this.itemSpacing,s=this.content.getComponent(n);s&&(s.width=o),this.nodesToResize.forEach((function(t){var i=t.getComponent(n);s&&(i.width=o)}))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Hero.ts",["cc","./EquippedItems.ts","./Inventory.ts","./Equipment.ts","./ItemInstance.ts","./EventBus.ts","./HeroEvent.ts"],(function(e){var t,i,n,o,r,s,u;return{setters:[function(e){t=e.cclegacy},function(e){i=e.EquippedItems},function(e){n=e.Inventory},function(e){o=e.Equipment},function(e){r=e.ItemInstance},function(e){s=e.EventBus},function(e){u=e.HeroEvent}],execute:function(){t._RF.push({},"b93d8nVLkRGEIYSqsYcp0Va","Hero",void 0);e("Hero",function(){function e(e){this.name=void 0,this.level=void 0,this.stats=void 0,this.experience=void 0,this.experienceToNextLevel=void 0,this.inventory=void 0,this.equippedItems=void 0,this.name=e,this.level=1,this.experience=this.calculateExperienceForLevel(this.level),this.experienceToNextLevel=this.calculateExperienceForLevel(this.level+1),this.stats={healthPoints:120,attackRoll:0,armorClass:0,damageDice:[],criticalChance:5,criticalMultiplier:1.5,initiative:0},this.equippedItems=new i,this.inventory=new n}var t=e.prototype;return t.addExperience=function(e){return e<=0?(console.warn("Cannot add zero or negative experience"),!1):(this.experience+=e,s.emit(u.HERO_EXPERIENCE_GAINED,{hero:this,amount:e}),this.experience>=this.experienceToNextLevel&&(this.levelUp(),!0))},t.levelUp=function(){this.level++,this.stats.healthPoints+=10,s.emit(u.HERO_LEVEL_UP,{hero:this,level:this.level}),this.experienceToNextLevel=this.calculateExperienceForLevel(this.level+1)},t.calculateExperienceForLevel=function(e){return Math.floor(100*Math.pow(e,1.5))},t.getExperience=function(){return this.experience},t.getExperienceToNextLevel=function(){return this.experienceToNextLevel},t.getExperienceProgress=function(){var e=this.calculateExperienceForLevel(this.level),t=this.experienceToNextLevel-e,i=this.experience-e;return Math.floor(i/t*100)},t.equip=function(e){if(!this.inventory.hasItem(e.id))throw console.log("Item with ID "+e.id+" is not in the inventory and cannot be equipped."),new Error("Item not found in inventory");var t=e.item.type;if(this.equippedItems.isItemTypeEquipped(t)){var i=this.equippedItems.getEquippedItemByType(t);this.unequip(i,!1)}this.equippedItems.equip(e),new o(e).equipItem(this.stats),e.isEquipped=!0,s.emit("item-equipped",e)},t.unequip=function(e,t){if(void 0===t&&(t=!0),!this.inventory.hasItem(e.id))throw console.log("Item with ID "+e.id+" is not in the inventory and cannot be unequipped."),new Error("Item not found in inventory");this.equippedItems.unequip(e),new o(e).unequipItem(this.stats),e.isEquipped=!1,t&&s.emit("item-unequipped",e)},t.addToInventory=function(e){return this.inventory.addItem(e)},t.addToInventoryAndEquip=function(e){this.addToInventory(e),this.equip(e)},t.addToInventoryAndEquipByTemplate=function(e){this.addToInventoryAndEquip(new r(e))},t.removeFromInventory=function(e){return this.inventory.removeItem(e)},t.getInventory=function(){return this.inventory},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroEvent.ts",["cc"],(function(e){var E;return{setters:[function(e){E=e.cclegacy}],execute:function(){E._RF.push({},"4ca9dETvH1Gsb2hkTusVqYw","HeroEvent",void 0);var r=e("HeroEvent",(function(){}));r.HERO_CREATED="hero-created",r.HERO_NAME_CHANGED="hero-name-changed",r.HERO_LEVEL_UP="hero-level-up",r.HERO_EXPERIENCE_GAINED="hero-experience-gained",r.ITEM_ADDED="item-added",r.ITEM_REMOVED="item-removed",r.ITEM_EQUIPPED="item-equipped",r.ITEM_UNEQUIPPED="item-unequipped",r.UI_REFRESH="ui-refresh",E._RF.pop()}}}));

System.register("chunks:///_virtual/HttpClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./APIConfig.ts"],(function(t){var e,r,n,s,o,u;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime,n=t.createForOfIteratorHelperLoose,s=t.extends},function(t){o=t.cclegacy},function(t){u=t.APIConfig}],execute:function(){o._RF.push({},"cc4afQGuEJAj6+eTuOlhA4E","HttpClient",void 0);t("HttpClient",function(){function t(){this.requestInterceptors=void 0,this.responseInterceptors=void 0,this.apiConfig=void 0,this.requestInterceptors=[],this.responseInterceptors=[],this.apiConfig=u.getInstance()}var o=t.prototype;return o.addRequestInterceptor=function(t){this.requestInterceptors.push(t)},o.addResponseInterceptor=function(t){this.responseInterceptors.push(t)},o.request=function(){var t=e(r().mark((function t(e){var o,u,i,c,a,p,h,f,d,l,v,m,g,I,w,y;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,(o=s({},e)).timeout=o.timeout||this.apiConfig.getTimeout(),u=n(this.requestInterceptors);!(i=u()).done;)c=i.value,o=c.intercept(o);return a={method:o.method,headers:o.headers,body:"GET"!==o.method?JSON.stringify(o.body):void 0},p=new URL(o.url.startsWith("http")?o.url:""+this.apiConfig.getBaseURL()+o.url),h=new Promise((function(t,e){setTimeout((function(){return e(new Error("Request timeout"))}),o.timeout)})),t.next=9,Promise.race([fetch(p.toString(),a),h]);case 9:if((f=t.sent).ok){t.next=12;break}throw new Error("HTTP Error: "+f.status+" "+f.statusText);case 12:return t.next=14,f.json();case 14:for(d=t.sent,l=n(this.responseInterceptors);!(v=l()).done;)m=v.value,d=m.intercept(d);return t.abrupt("return",d);case 19:for(t.prev=19,t.t0=t.catch(0),g=t.t0,I=n(this.responseInterceptors);!(w=I()).done;){y=w.value;try{g=y.handleError(g)}catch(t){g=t}}throw g;case 24:case"end":return t.stop()}}),t,this,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),o.get=function(){var t=e(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request({url:e,method:"GET",headers:n}));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),o.post=function(){var t=e(r().mark((function t(e,n,s){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request({url:e,method:"POST",body:n,headers:s}));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Inventory.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"47566OdDDZF+qD+t+VC0dDj","Inventory",void 0);t("Inventory",function(){function t(){this.items=void 0,this.consumables=void 0,this.items=new Map,this.consumables=new Map}var n=t.prototype;return n.addItem=function(t){if(t.isStackable&&this.items.has(t.id)){var e=this.items.get(t.id);e&&e.addCount(t.count)}else this.items.set(t.id,t);return t.id},n.removeItem=function(t){return!!this.items.has(t)&&(this.items.delete(t),!0)},n.getItem=function(t){return this.items.get(t)||null},n.hasItem=function(t){return this.items.has(t)},n.updateConsumable=function(t){var e=this.consumables.get(t);return!!e&&(e.count<=0&&this.consumables.delete(t),!0)},n.getConsumable=function(t){return this.consumables.get(t)||null},n.hasConsumable=function(t){return this.consumables.has(t)},n.getAllItems=function(){return Array.from(this.items.values())},n.getAllConsumables=function(){return Array.from(this.consumables.values())},n.getItemCount=function(t,n){for(var s,i=0,u=e(this.items);!(s=u()).done;){var r=s.value,o=(r[0],r[1]);o.item.id!==t||o.grade!==n||o.isEquipped||(i+=o.count)}return i},n.getItemCountByTypeAndGrade=function(t,n){for(var s,i=0,u=e(this.items);!(s=u()).done;){var r=s.value,o=(r[0],r[1]);o.item.type!==t||o.grade!==n||o.isEquipped||(i+=o.count)}return i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/InventoryWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./GameApp.ts","./ItemFilter.ts","./GridLayout.ts","./TooltipTrigger.ts","./StatToStringConverter.ts"],(function(t){var e,n,i,r,o,a,l,s,c,u,p,f,m,h,d,y,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Prefab,s=t.Node,c=t.view,u=t.instantiate},function(t){p=t.BaseDialog},function(t){f=t.ItemIconTemplate},function(t){m=t.GameApp},function(t){h=t.ItemFilter},function(t){d=t.GridLayout},function(t){y=t.TooltipTrigger},function(t){b=t.StatsToStringConverter}],execute:function(){var v,g,I,T,S,w,L,P,z,F,G,A,C,D;o._RF.push({},"b4183ziQ7NAlKNW3QLs2Xxg","InventoryWindow",void 0);var E=a.ccclass,_=a.property;t("InventoryWindow",(v=E("InventoryWindow"),g=_(l),I=_(l),T=_(s),S=_(s),w=_(s),v(((D=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"emptySlotPrefab",z,r(e)),i(e,"itemIconPrefab",F,r(e)),i(e,"content",G,r(e)),i(e,"separator",A,r(e)),i(e,"itemFilter",C,r(e)),e.inventory=void 0,e}n(e,t);var o=e.prototype;return o.start=function(){var e=this;t.prototype.start.call(this),c.on("canvas-resize",(function(){e.setupGrid()})),this.itemFilter.on("ITEMS_FILTERED",(function(t){e.displayItems(t)}))},o.setupGrid=function(){new d(168,50,this.content,[this.separator]).setupGrid()},o.onDialogOpen=function(){this.setupGrid(),this.inventory=m.instance.getHero().getInventory(),this.refreshList()},o.refreshList=function(){var t=this.inventory.getAllItems().filter((function(t){return!t.isEquipped}));this.itemFilter.getComponent(h).setItems(t)},o.displayItems=function(t){var n=this;if(this.content&&this.emptySlotPrefab){this.content.removeAllChildren(),t.forEach((function(t){if(t.isEquipable()){var e=u(n.itemIconPrefab);e.getComponent(f).setup(t);var i=u(e),r=e.addComponent(y),o=new b;r.setTooltipData({content:o.getGradeRichText(t),iconNode:i,header:t.item.name,button:{callback:function(){m.instance.getHero().equip(t),n.refreshList(),r.hideTooltip()},label:"Equip"}}),n.content.addChild(e)}}));for(var i=0;i<e.MAX_SLOTS-t.length;i++){var r=u(this.emptySlotPrefab);this.content.addChild(r)}}},e}(p)).MAX_SLOTS=50,z=e((P=D).prototype,"emptySlotPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(P.prototype,"itemIconPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(P.prototype,"content",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(P.prototype,"separator",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(P.prototype,"itemFilter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=P))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"7ed44qjodNI5J0FPHSl7nLa","Item",void 0);t("Item",(function(t,i,e,s){this.id=void 0,this.type=void 0,this.imagePath=void 0,this.name=void 0,this.grades=void 0,this.id=t,this.type=i,this.name=e,this.grades=s}));i._RF.pop()}}}));

System.register("chunks:///_virtual/ItemFilter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,s,o,l,u,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,l=e.Node,u=e.SpriteFrame,a=e.Sprite,c=e.Component}],execute:function(){var p,d,h,f,S,y,F,g,m,A,C,E,b,B,L;s._RF.push({},"0fddb157oNAoJYWPknB8zke","ItemFilter",void 0);var T=o.ccclass,R=o.property,v=function(e){return e[e.ALL=0]="ALL",e[e.WEAPON=1]="WEAPON",e[e.ARMOR=2]="ARMOR",e[e.ACCESSORY=3]="ACCESSORY",e[e.HAIR_ACCESSORY=4]="HAIR_ACCESSORY",e[e.PET=5]="PET",e}(v||{}),I=function(e){return e[e.ALL=0]="ALL",e[e.D=1]="D",e[e.C=2]="C",e[e.B=3]="B",e[e.A=4]="A",e[e.S=5]="S",e[e.SS=6]="SS",e}(I||{});e("ItemFilter",(p=T("ItemFilter"),d=R([l]),h=R([l]),f=R([u]),S=R([u]),y=R([u]),F=R([u]),p((A=t((m=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,i(t,"typeFilterButtons",A,n(t)),i(t,"gradeFilterButtons",C,n(t)),i(t,"typeSelectedSprites",E,n(t)),i(t,"typeUnselectedSprites",b,n(t)),i(t,"gradeSelectedSprites",B,n(t)),i(t,"gradeUnselectedSprites",L,n(t)),t.currentTypeFilter=v.ALL,t.currentGradeFilter=I.ALL,t.items=[],t}r(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;this.typeSelectedSprites.length===this.typeFilterButtons.length&&this.typeUnselectedSprites.length===this.typeFilterButtons.length?this.gradeSelectedSprites.length===this.gradeFilterButtons.length&&this.gradeUnselectedSprites.length===this.gradeFilterButtons.length?(this.typeFilterButtons.forEach((function(t,r){t.on(l.EventType.TOUCH_END,(function(){e.onTypeFilterClick(r)}))})),this.gradeFilterButtons.forEach((function(t,r){t.on(l.EventType.TOUCH_END,(function(){e.onGradeFilterClick(r)}))})),this.updateButtonStates()):console.error("Grade filter sprites count mismatch with buttons count"):console.error("Type filter sprites count mismatch with buttons count")},s.onTypeFilterClick=function(e){this.currentTypeFilter=e,this.updateButtonStates(),this.filterItems()},s.onGradeFilterClick=function(e){this.currentGradeFilter=e,this.updateButtonStates(),this.filterItems()},s.updateButtonStates=function(){var e=this;this.typeFilterButtons.forEach((function(t,r){var i=t.getComponent(a);i&&(i.spriteFrame=r===e.currentTypeFilter?e.typeSelectedSprites[r]:e.typeUnselectedSprites[r])})),this.gradeFilterButtons.forEach((function(t,r){var i=t.getComponent(a);i&&(i.spriteFrame=r===e.currentGradeFilter?e.gradeSelectedSprites[r]:e.gradeUnselectedSprites[r])}))},s.filterItems=function(){var e=this,t=this.items;this.currentTypeFilter!==v.ALL&&(t=t.filter((function(t){switch(e.currentTypeFilter){case v.WEAPON:return"weapon"===t.type;case v.ARMOR:return"armor"===t.type;case v.ACCESSORY:return"ring"===t.type||"amulet"===t.type;case v.HAIR_ACCESSORY:return"accessory"===t.type;case v.PET:return"pet"===t.type;default:return!0}}))),this.currentGradeFilter!==I.ALL&&(t=t.filter((function(t){var r=I[e.currentGradeFilter];return t.grade===r}))),this.node.emit("ITEMS_FILTERED",t)},s.setItems=function(e){this.items=e,this.filterItems()},s.getFilterState=function(){return{type:v[this.currentTypeFilter],grade:I[this.currentGradeFilter]}},t}(c)).prototype,"typeFilterButtons",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(m.prototype,"gradeFilterButtons",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(m.prototype,"typeSelectedSprites",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=t(m.prototype,"typeUnselectedSprites",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(m.prototype,"gradeSelectedSprites",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(m.prototype,"gradeUnselectedSprites",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=m))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/ItemIconTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataLoader.ts"],(function(e){var t,a,i,r,n,o,c,s,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,c=e.Node,s=e.Sprite,l=e.Component},function(e){p=e.DataLoader}],execute:function(){var u,m,f,h,z,d,v,g,y;n._RF.push({},"bf392R2jFRK+rWLBHrloGNf","ItemIconTemplate",void 0);var I=o.ccclass,F=o.property;e("ItemIconTemplate",(u=I("ItemIconTemplate"),m=F({type:[c]}),f=F({type:[c]}),h=F(s),u((v=t((d=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,i(t,"frames",v,r(t)),i(t,"pazzle",g,r(t)),i(t,"itemSprite",y,r(t)),t.framesMap=new Map,t.pazzleMap=new Map,t.currentFrame=null,t.currentPazzle=null,t}a(t,e);var n=t.prototype;return n.setup=function(e){this.init(),this.activateFrameNode(e.grade),null!==e.item?this.itemSprite.spriteFrame=p.getInstance().spriteFramesByItemId.get(e.item.id):this.itemSprite.spriteFrame=p.getInstance().getCommonIcon(e.grade,e.type)},n.init=function(){var e=this;this.deactivateAll(),this.frames.forEach((function(t){e.framesMap.set(t.name,t)})),this.pazzle.forEach((function(t){e.pazzleMap.set(t.name,t)}))},n.deactivateNodes=function(e){e.forEach((function(e){return e.active=!1}))},n.deactivateAll=function(){this.deactivateNodes(this.frames),this.deactivateNodes(this.pazzle)},n.activateFrameNode=function(e,t){void 0===t&&(t=!1),"NG"!==e&&(this.currentFrame=this.framesMap.get(e+"Frame"),this.currentFrame.active=!0,t&&(this.currentPazzle=this.pazzleMap.get(e+"Pazzle"),this.currentPazzle.active=!0))},t}(l)).prototype,"frames",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(d.prototype,"pazzle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=t(d.prototype,"itemSprite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=d))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemId.ts",["cc"],(function(_){var R;return{setters:[function(_){R=_.cclegacy}],execute:function(){R._RF.push({},"7cddcEEQrlMfZyuLszhpcJg","ItemId",void 0);var E=_("ItemId",(function(){}));E.ARMOR_IRON_PLATE_ARMOR=2,E.ACCESSORY_CAT_EARS=3,E.AMULET_AMULET_OF_SPEED=4,E.RING_RING_OF_PRECISION=5,E.WEAPON_FLAMEFORGED_SWORD=6,E.WEAPON_SHADOWFANG_DAGGER=7,E.WEAPON_INFERNO_WAND=8,E.PET_CAT=9,E.PET_GHOST=10,E.ARMOR_ROGUE_TUNIC=11,E.ARMOR_MAGIC_TUNIC=12,E.ACCESSORY_DEVIL_HORN=13,E.ETC_CRYSTAL=777,R._RF.pop()}}}));

System.register("chunks:///_virtual/ItemInstance.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"7281feoq79PZY5MfCNm4Eru","ItemInstance",void 0);t("ItemInstance",function(){function t(e,i,n,o,s){void 0===i&&(i=1),void 0===n&&(n=0),this.id=void 0,this.item_id=void 0,this.isEquipped=void 0,this.grade=void 0,this.type=void 0,this.enchantLevel=void 0,this.count=void 0,this.isStackable=void 0,this.item=void 0,this.item=e,this.type=e.type,o||(o="D"),this.grade=o,this.id=s||t.generateUniqueId(),this.item_id=e.id,this.isEquipped=!1,this.enchantLevel=n,this.count=i,this.isStackable="etc"===this.type}var e=t.prototype;return e.addCount=function(t){if(!this.isStackable)throw new Error("Cannot add count to non-stackable item.");if(t<=0)throw new Error("Amount to add must be greater than zero.");this.count+=t},e.getItemTemplate=function(){return this.item},e.getEnchantLevel=function(){return this.enchantLevel},e.setEnchantLevel=function(t){if(t<0)throw new Error("Enchant level must be non-negative.");this.enchantLevel=t},e.setGrade=function(t){this.grade=t},e.getGrade=function(){return this.grade},e.toggleEquip=function(){this.isEquipped=!this.isEquipped},e.getName=function(){return this.item.name},e.isEquipable=function(){return"etc"!==this.type},t.generateUniqueId=function(t){return void 0===t&&(t="item"),t+"_"+Date.now()+"_"+Math.floor(1e6*Math.random())},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemRandomizer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"226d6Zq0ahELbDOQ8zWhWs5","ItemRandomizer",void 0);t("ItemRandomizer",function(){function t(){this.items=[],this.dropChances=new Map}var n=t.prototype;return n.init=function(t){try{this.items=t,this.resetChances()}catch(t){console.error("Failed to parse items data:",t)}},n.resetChances=function(){var t=this,e=1/this.items.length;this.dropChances.clear(),this.items.forEach((function(n){t.dropChances.set(n.id,e)}))},n.setDropChance=function(t,e){return e<0||e>1?(console.warn("Invalid chance value: "+e+". Should be between 0 and 1."),!1):this.items.some((function(e){return e.id===t}))?(this.dropChances.set(t,e),!0):(console.warn("Item ID "+t+" not found."),!1)},n.normalizeChances=function(){var t=this,e=0;this.dropChances.forEach((function(t){e+=t})),0!==e?this.dropChances.forEach((function(n,r){t.dropChances.set(r,n/e)})):this.resetChances()},n.getRandomItemId=function(){if(0===this.items.length)return null;this.normalizeChances();for(var t,n=Math.random(),r=0,i=e(this.dropChances);!(t=i()).done;){var o=t.value,s=o[0];if(n<=(r+=o[1]))return s}return this.items[Math.floor(Math.random()*this.items.length)].id},n.getItemData=function(t){return this.items.find((function(e){return e.id===t}))||null},n.getDropChance=function(t){var e=this.dropChances.get(t);return void 0!==e?e:null},n.getAllDropChances=function(){return new Map(this.dropChances)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemTypeId.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"101c7Vb2PBO8rlaxXKJjmwW","ItemTypeId",void 0);var c=e("ItemTypeId",(function(){}));c.WEAPON="weapon",c.ARMOR="armor",c.RING="ring",c.AMULET="amulet",c.ACCESSORY="accessory",c.SHIELD="shield",t._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./EventBus.ts","./HeroEvent.ts","./DialogManager.ts"],(function(t){var i,e,r,o,n,s,a,p,g,d,u,l,c,h,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.ProgressBar,p=t.Sprite,g=t.UITransform,d=t.Vec3,u=t.tween},function(t){l=t.BaseDialog},function(t){c=t.EventBus},function(t){h=t.HeroEvent},function(t){f=t.DialogManager}],execute:function(){var B,w,L,v,S,y,D,W;n._RF.push({},"66e24BoQJpLMYwX9+9izB5f","LoadingWindow",void 0);var E=s.ccclass,T=s.property,b=s.executionOrder;t("LoadingWindow",(B=E("LoadingWindow"),w=b(-1),L=T(a),v=T(p),B(S=w((D=i((y=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,r(i,"progressBar",D,o(i)),r(i,"progressSprite",W,o(i)),i.isLoading=!1,i.loadingTween=null,i.progressBarWidth=0,i.progressBarStartX=0,i}e(i,t);var n=i.prototype;return n.onLoad=function(){this.progressBar.progress=0,c.on(h.HERO_CREATED,this.handleHeroCreated.bind(this));var t=this.progressBar.node.getComponent(g);this.progressBarWidth=t.width,this.progressBarStartX=this.progressBar.node.position.x,this.updateSpritePosition(0)},n.start=function(){console.log("Start Loading Window"),t.prototype.start.call(this),this.openLoadingWindow(),this.startSimulatedLoading()},n.openLoadingWindow=function(){var t=f.instance.getDialog("LoadingWindow");t&&f.instance.pushDialog(t)},n.updateSpritePosition=function(t){if(this.progressSprite){var i=this.progressBarStartX+this.progressBarWidth*t;this.progressSprite.node.setPosition(new d(i,0,0))}},n.startSimulatedLoading=function(){var t=this;this.isLoading||(this.isLoading=!0,this.loadingTween=u(this.progressBar).to(2,{progress:.7},{easing:"quadOut",onUpdate:function(i,e){t.updateSpritePosition(t.progressBar.progress)}}).start())},n.handleHeroCreated=function(){var t=this;this.loadingTween&&this.loadingTween.stop(),u(this.progressBar).to(2,{progress:1},{easing:"quadOut",onUpdate:function(i,e){t.updateSpritePosition(t.progressBar.progress)},onComplete:function(){t.scheduleOnce((function(){t.close(),t.isLoading=!1}),.1)}}).start()},n.onDestroy=function(){this.loadingTween&&this.loadingTween.stop(),c.off(h.HERO_CREATED,this.handleHeroCreated.bind(this))},i}(l)).prototype,"progressBar",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(y.prototype,"progressSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=y))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/LocationTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemIconTemplate.ts","./DataLoader.ts","./GameApp.ts","./Battle.ts","./DialogManager.ts"],(function(t){var e,n,a,o,i,r,l,u,c,p,s,m,f,b,g,y,d,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,l=t.Prefab,u=t.Node,c=t.Sprite,p=t.Button,s=t.Label,m=t.instantiate,f=t.Component},function(t){b=t.ItemIconTemplate},function(t){g=t.DataLoader},function(t){y=t.GameApp},function(t){d=t.Battle},function(t){L=t.DialogManager}],execute:function(){var h,v,I,B,w,D,z,S,T,C,P,M,A;i._RF.push({},"f4fc2gMHzVIZIvWt3SXm2SJ","LocationTemplate",void 0);var F=r.ccclass,W=r.property;t("LocationTemplate",(h=F("LocationTemplate"),v=W(l),I=W(u),B=W(c),w=W(p),D=W(s),h((T=e((S=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,a(e,"itemIconPrefab",T,o(e)),a(e,"lootLayout",C,o(e)),a(e,"mobSprite",P,o(e)),a(e,"battleButton",M,o(e)),a(e,"nameLabel",A,o(e)),e}n(e,t);var i=e.prototype;return i.setup=function(t){var e,n=this;this.mobSprite.spriteFrame=t.spriteFrame,this.lootLayout.removeAllChildren(),t.loot.forEach((function(t){var e=g.getInstance().getItemById(t.id),a={type:e.type,grade:t.grade,item:e},o=m(n.itemIconPrefab);o.getComponent(b).setup(a),n.lootLayout.addChild(o);n.lootLayout.setScale(.75,.75)})),null==(e=this.battleButton)||e.node.on(p.EventType.CLICK,(function(){n.openBattleWindow(t)}),this),this.nameLabel.string=t.id+". "+t.name},i.openBattleWindow=function(t){var e=y.instance.getHero(),n={name:"Monster",stats:t.stats},a=new d(e,n);a.battle();var o=L.instance.getDialog("BattleWindow");o&&(o.setup(t,a),L.instance.pushDialog(o))},e}(f)).prototype,"itemIconPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(S.prototype,"lootLayout",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(S.prototype,"mobSprite",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(S.prototype,"battleButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(S.prototype,"nameLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=S))||z));i._RF.pop()}}}));

System.register("chunks:///_virtual/LoggingInterceptor.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"0b6acodXGtFiIcf1KI+n6Ov","LoggingInterceptor",void 0);n("LoggingInterceptor",function(){function n(){}var r=n.prototype;return r.handleError=function(n){throw console.error("[Response Error]",n),n},r.intercept=function(n){return console.log("[Response]",n),n},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LootItem.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"46f4c9/AOBOko+LLNnt6pTG","LootItem",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LootSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f42dbo8DFBCzqo0EUDey86o","LootSystem",void 0);t("LootSystem",function(){function t(t){if(this.items=void 0,t.reduce((function(t,e){return t+e.chance}),0)>1)throw new Error("Total probability cannot exceed 1");this.items=t}var n=t.prototype;return n.roll=function(){for(var t,n=Math.random(),o=0,r=[].concat(this.items).sort((function(t,e){return e.chance-t.chance})),c=e(r);!(t=c()).done;){var i=t.value;if(n<=(o+=i.chance))return i}return null},n.getDropRates=function(){var t=1-this.items.reduce((function(t,e){return t+e.chance}),0);return"Drop rates:\n"+this.items.map((function(t){return"ID: "+t.id+" ("+t.grade+") - "+(100*t.chance).toFixed(1)+"%"})).join("\n")+"\nNo drop chance: "+(100*t).toFixed(1)+"%"},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./DataLoader.ts","./GameApp.ts","./BattleMessageTemplate.ts","./BattleWindow.ts","./DefeatWindow.ts","./VictoryWindow.ts","./Animations.ts","./GridLayout.ts","./ItemIconTemplate.ts","./CongratulationWindow.ts","./Tooltip.ts","./TooltipData.ts","./TooltipPosition.ts","./TooltipTrigger.ts","./CustomSlider.ts","./BaseDialog.ts","./DialogManager.ts","./CraftWindow.ts","./MaterialSelectionWindow.ts","./InventoryWindow.ts","./ItemFilter.ts","./StatToStringConverter.ts","./LoadingWindow.ts","./EquippedItemsComponent.ts","./MainWindowMenu.ts","./TopBar.ts","./StatData.ts","./StatGrid.ts","./StatTemplate.ts","./Crystal.ts","./SummonService.ts","./SummonWindow.ts","./ExperienceProgressBar.ts","./LocationTemplate.ts","./MapWindow.ts","./FlexibleLayout.ts","./ShopItemTemplate.ts","./ShopWindow.ts","./HeroEvent.ts","./ItemId.ts","./ItemTypeId.ts","./Attackable.ts","./Hero.ts","./Battle.ts","./AbstractItemInstance.ts","./Consumable.ts","./Equipment.ts","./GameObject.ts","./Item.ts","./ItemInstance.ts","./LootSystem.ts","./ItemRandomizer.ts","./EquippedItems.ts","./Inventory.ts","./GameLocation.ts","./LootItem.ts","./Shop.ts","./ShopItem.ts","./Stats.ts","./APIConfig.ts","./HttpClient.ts","./NetworkInterceptor.ts","./ServiceLocator.ts","./TokenManager.ts","./AuthInterceptor.ts","./ContentTypeInterceptor.ts","./LoggingInterceptor.ts","./AuthService.ts","./UserService.ts","./EventBus.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainWindowMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogManager.ts","./Animations.ts"],(function(n){var t,o,e,i,a,r,u,l,s,c;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,u=n.Button,l=n.Component},function(n){s=n.DialogManager},function(n){c=n.Animations}],execute:function(){var p,h,d,f,g,b,B,w,v,y,M;a._RF.push({},"e490axkDgpM74GGZNuqMdSS","MainWindowMenu",void 0);var W=r.ccclass,D=r.property;n("MainWindowMenu",(p=W("MainWindowMenu"),h=D(u),d=D(u),f=D(u),g=D(u),p((w=t((B=function(n){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,e(t,"shopButton",w,i(t)),e(t,"mapButton",v,i(t)),e(t,"bagButton",y,i(t)),e(t,"craftButton",M,i(t)),t}o(t,n);var a=t.prototype;return a.start=function(){var n,t,o,e;null==(n=this.bagButton)||n.node.on(u.EventType.CLICK,this.openInventoryWindow,this),null==(t=this.craftButton)||t.node.on(u.EventType.CLICK,this.openCraftWindow,this),null==(o=this.mapButton)||o.node.on(u.EventType.CLICK,this.openMapWindow,this),null==(e=this.shopButton)||e.node.on(u.EventType.CLICK,this.openShopWindow,this)},a.openInventoryWindow=function(){c.button(this.bagButton.node,this.bagButton.node.scale.clone());var n=s.instance.getDialog("InventoryWindow");n&&s.instance.pushDialog(n)},a.openCraftWindow=function(){c.button(this.craftButton.node,this.craftButton.node.scale.clone());var n=s.instance.getDialog("CraftWindow");n&&s.instance.pushDialog(n)},a.openMapWindow=function(){c.button(this.mapButton.node,this.mapButton.node.scale.clone());var n=s.instance.getDialog("MapWindow");n&&s.instance.pushDialog(n)},a.openShopWindow=function(){c.button(this.shopButton.node,this.shopButton.node.scale.clone());var n=s.instance.getDialog("ShopWindow");n&&s.instance.pushDialog(n)},t}(l)).prototype,"shopButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(B.prototype,"mapButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(B.prototype,"bagButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(B.prototype,"craftButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=B))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/MapWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./DataLoader.ts","./LocationTemplate.ts"],(function(t){var n,e,o,a,i,r,c,l,s,u,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,c=t.Prefab,l=t.Node,s=t.instantiate},function(t){u=t.BaseDialog},function(t){p=t.DataLoader},function(t){f=t.LocationTemplate}],execute:function(){var d,h,g,b,y,v,D;i._RF.push({},"0ffa2l4EdRM4o0WG3aKBMQc","MapWindow",void 0);var m=r.ccclass,w=r.property;t("MapWindow",(d=m("MapWindow"),h=w(c),g=w(l),d((v=n((y=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return n=t.call.apply(t,[this].concat(i))||this,o(n,"locationPrefab",v,a(n)),o(n,"content",D,a(n)),n}e(n,t);var i=n.prototype;return i.start=function(){t.prototype.start.call(this)},i.onDialogOpen=function(){var t=this;this.content.removeAllChildren(),p.getInstance().getAllLocations().forEach((function(n){var e=s(t.locationPrefab);e.getComponent(f).setup(n),t.content.addChild(e)}))},n}(u)).prototype,"locationPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(y.prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/MaterialSelectionWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./GameApp.ts","./GridLayout.ts"],(function(e){var t,i,n,o,r,s,l,a,c,u,m,d,f,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.Prefab,a=e.Node,c=e.Button,u=e.view,m=e.instantiate},function(e){d=e.BaseDialog},function(e){f=e.ItemIconTemplate},function(e){p=e.GameApp},function(e){h=e.GridLayout}],execute:function(){var C,g,v,y,I,b,B,w,G,S,T;r._RF.push({},"9aa28ZeQT9I4KJqCeUm9BQe","MaterialSelectionWindow",void 0);var q=s.ccclass,D=s.property;e("MaterialSelectionWindow",(C=q("MaterialSelectionWindow"),g=D(l),v=D(l),y=D(a),I=D(c),C((w=t((B=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"itemPrefab",w,o(t)),n(t,"selectionBox",G,o(t)),n(t,"content",S,o(t)),n(t,"confirmButton",T,o(t)),t.requiredCount=4,t.itemType="",t.itemGrade="D",t.selectedItems=[],t.onConfirmCallback=null,t.reservedItems=[],t}i(t,e);var r=t.prototype;return r.start=function(){var t=this;e.prototype.start.call(this),this.confirmButton.node.on(c.EventType.CLICK,this.onConfirmClick,this),u.on("canvas-resize",(function(){t.setupGrid()}))},r.setup=function(e){this.itemType=e.type,this.itemGrade=e.grade,this.requiredCount=e.requiredCount,this.reservedItems=e.reservedItems,this.onConfirmCallback=e.onConfirm,this.displayAvailableItems(),this.updateConfirmButton()},r.displayAvailableItems=function(){var e=this;if(this.content){this.content.removeAllChildren(),this.selectedItems=[];var t=p.instance.getHero().getInventory().getAllItems().filter((function(t){return t.item.type===e.itemType&&t.grade===e.itemGrade&&!t.isEquipped&&!e.reservedItems.some((function(e){return e.id===t.id}))})),i=0;t.forEach((function(t){var n=m(e.itemPrefab);n.getComponent(f).setup(t),n.on(a.EventType.TOUCH_END,(function(){e.toggleItemSelection(t,n)})),e.content.addChild(n),i<4&&(e.toggleItemSelection(t,n),i++)}))}},r.toggleItemSelection=function(e,t){var i=this.selectedItems.indexOf(e);if(-1===i&&this.selectedItems.length<this.requiredCount){this.selectedItems.push(e);var n=m(this.selectionBox);n.name="selectionBox",t.addChild(n),t.setScale(1.1,1.1)}else if(-1!==i){this.selectedItems.splice(i,1),t.setScale(1,1);var o=t.getChildByName("selectionBox");o&&o.destroy()}this.updateConfirmButton()},r.updateConfirmButton=function(){this.confirmButton&&(this.confirmButton.node.active=this.selectedItems.length===this.requiredCount)},r.onDialogOpen=function(){this.updateConfirmButton(),this.setupGrid()},r.setupGrid=function(){new h(168,50,this.content,[],40).setupGrid()},r.onConfirmClick=function(){this.selectedItems.length===this.requiredCount&&this.onConfirmCallback&&(this.close(),this.onConfirmCallback(this.selectedItems))},t}(d)).prototype,"itemPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(B.prototype,"selectionBox",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(B.prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(B.prototype,"confirmButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=B))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkInterceptor.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"74ef1kzcABIQYNa8MogBr9L","NetworkInterceptor",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ServiceLocator.ts",["cc","./AuthInterceptor.ts","./ContentTypeInterceptor.ts","./LoggingInterceptor.ts","./AuthService.ts","./UserService.ts","./HttpClient.ts"],(function(e){var t,n,r,c,i,o,u;return{setters:[function(e){t=e.cclegacy},function(e){n=e.AuthInterceptor},function(e){r=e.ContentTypeInterceptor},function(e){c=e.LoggingInterceptor},function(e){i=e.AuthService},function(e){o=e.UserService},function(e){u=e.HttpClient}],execute:function(){t._RF.push({},"269b3iZ4vdPEZT6nJlcJCXo","ServiceLocator",void 0),e("ServiceLocator",function(){function e(){this.authService=void 0,this.userService=void 0;var e=new u;e.addRequestInterceptor(new r),e.addRequestInterceptor(new n),e.addResponseInterceptor(new c),this.authService=new i(e),this.userService=new o(e)}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var t=e.prototype;return t.getAuthService=function(){return this.authService},t.getUserService=function(){return this.userService},e}()).instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/Shop.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a1456iWZ8hK564JA/v+RzHZ","Shop",void 0);t("Shop",function(){function t(t){this.items=void 0,this.items=t.shop}var e=t.prototype;return e.getItems=function(){return this.items},e.getItemById=function(t){return this.items.find((function(e){return e.item_id===t}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ShopItem.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8405a0hc6BC3Y6D41KNTIwJ","ShopItem",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ShopItemTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataLoader.ts","./ItemIconTemplate.ts","./GameApp.ts","./ItemInstance.ts","./DialogManager.ts"],(function(e){var t,n,i,r,o,a,u,l,c,p,m,s,b,g,f,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,l=e.Label,c=e.Button,p=e.Sprite,m=e.Component},function(e){s=e.DataLoader},function(e){b=e.ItemIconTemplate},function(e){g=e.GameApp},function(e){f=e.ItemInstance},function(e){y=e.DialogManager}],execute:function(){var I,d,h,v,S,w,L,C,D,_,z,T,B,N,F;o._RF.push({},"7a818PFu1lJFYl4C8t2Sfji","ShopItemTemplate",void 0);var A=a.ccclass,G=a.property;e("ShopItemTemplate",(I=A("ShopItemTemplate"),d=G(u),h=G(l),v=G(l),S=G(c),w=G(p),L=G(l),I((_=t((D=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"itemIcon",_,r(t)),i(t,"itemNumber",z,r(t)),i(t,"limitNumber",T,r(t)),i(t,"buyButton",B,r(t)),i(t,"currencySprite",N,r(t)),i(t,"priceLabel",F,r(t)),t}n(t,e);var o=t.prototype;return o.setup=function(e){var t,n=this,i=s.getInstance().getItemById(e.item_id),r={item:i,grade:e.grade,type:i.type};this.itemIcon.getComponent(b).setup(r),this.itemNumber.string=e.item_number.toString(),this.limitNumber.string="Limit:"+e.limit_number,this.currencySprite.spriteFrame=s.getInstance().spriteFramesByCurrencyId.get(e.currency_id),this.priceLabel.string=e.price.toString(),null==(t=this.buyButton)||t.node.on(c.EventType.CLICK,(function(){var t=g.instance.getHero().getInventory(),i=new f(r.item,e.item_number);i.setGrade(e.grade),t.addItem(i),n.openCongratulationWindow(i)}),this)},o.openCongratulationWindow=function(e){var t=y.instance.getDialog("CongratulationWindow");t&&(t.setup(e),y.instance.pushDialog(t,!0))},t}(m)).prototype,"itemIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"itemNumber",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"limitNumber",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(D.prototype,"buyButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(D.prototype,"currencySprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(D.prototype,"priceLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=D))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./DataLoader.ts","./ShopItemTemplate.ts","./GridLayout.ts"],(function(t){var e,i,r,n,o,a,s,p,c,l,u,h,d,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Prefab,p=t.ScrollView,c=t.Node,l=t.view,u=t.instantiate},function(t){h=t.BaseDialog},function(t){d=t.DataLoader},function(t){f=t.ShopItemTemplate},function(t){m=t.GridLayout}],execute:function(){var b,v,y,g,I,G,w,D,S;o._RF.push({},"025fdih6YJHcL9n7WidW7GF","ShopWindow",void 0);var L=a.ccclass,z=a.property;t("ShopWindow",(b=L("ShopWindow"),v=z(s),y=z(p),g=z(c),b((w=e((G=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"shopItemPrefab",w,n(e)),r(e,"shopItemGrid",D,n(e)),r(e,"separator",S,n(e)),e}i(e,t);var o=e.prototype;return o.start=function(){var e=this;t.prototype.start.call(this),l.on("canvas-resize",(function(){e.setupGrid()}))},o.onDialogOpen=function(){var t=this;this.setupGrid();var e=this.shopItemGrid.content,i=d.getInstance().shop.getItems();e.removeAllChildren(),i.forEach((function(e){var i=u(t.shopItemPrefab);i.getComponent(f).setup(e),t.shopItemGrid.content.addChild(i)}))},o.setupGrid=function(){new m(257,50,this.shopItemGrid.content).setupGrid()},e}(h)).prototype,"shopItemPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(G.prototype,"shopItemGrid",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(G.prototype,"separator",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=G))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/StatData.ts",["cc"],(function(){var t;return{setters:[function(a){t=a.cclegacy}],execute:function(){t._RF.push({},"e88a1dAs0RG9JI1Jh6aJhpo","StatData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/StatGrid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StatTemplate.ts","./EventBus.ts","./HeroEvent.ts","./stats.json","./TooltipTrigger.ts","./GameApp.ts"],(function(t){var e,n,a,r,i,o,s,c,u,p,l,d,f,h,v,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,s=t._decorator,c=t.Node,u=t.Prefab,p=t.instantiate,l=t.Component},function(t){d=t.StatTemplate},function(t){f=t.EventBus},function(t){h=t.HeroEvent},function(t){v=t.default},function(t){g=t.TooltipTrigger},function(t){m=t.GameApp}],execute:function(){var b,D,S,y,T,A,E;o._RF.push({},"4d277zRrndFbrOguxJzFAXh","StatGrid",void 0);var L=s.ccclass,P=s.property;t("StatGrid",(b=L("StatGrid"),D=P(c),S=P(u),b((A=e((T=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,a(e,"content",A,r(e)),a(e,"statPrefab",E,r(e)),e.statDataArr=[],e}n(e,t);var o=e.prototype;return o.start=function(){this.statDataArr=v,f.on(h.HERO_CREATED,this.updateStatList.bind(this)),f.on("item-equipped",this.updateStatList.bind(this)),f.on("item-unequipped",this.updateStatList.bind(this))},e.convertDamageDiceToRange=function(t){for(var e,n=0,a=0,r=i(t);!(e=r()).done;){var o=e.value,s=o.dice.match(/^(\d+)d(\d+)$/);if(!s)throw new Error("Invalid dice format: "+o.dice);var c=parseInt(s[1],10);n+=c,a+=c*parseInt(s[2],10)}return n+"-"+a},o.updateStatList=function(){var t=m.instance.getHero();this.statDataArr.forEach((function(n){"damage"===n.id?n.value=e.convertDamageDiceToRange(t.stats.damageDice):t.stats.hasOwnProperty(n.id)&&(n.value=t.stats[n.id].toString(),"criticalChance"===n.id&&(n.value+="%"))})),this.refreshList()},o.refreshList=function(){var t=this;this.content&&this.statPrefab&&(this.content.removeAllChildren(),this.statDataArr.forEach((function(e){var n=p(t.statPrefab);n.getComponent(d).setup(e),n.addComponent(g).setTooltipData({content:e.description}),t.content.addChild(n)})))},e}(l)).prototype,"content",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(T.prototype,"statPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=T))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/Stats.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"bb233vYGKxFX5WlX6/VmL0W","Stats",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/StatTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,a,o,l,u,c,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Sprite,u=e.Label,c=e.resources,s=e.SpriteFrame,p=e.Component}],execute:function(){var m,f,b,h,v,g,y,d,L;a._RF.push({},"cab33cwK4dMtYKrTJ8IEU4n","StatTemplate",void 0);var S=o.ccclass,F=o.property;e("StatTemplate",(m=S("StatTemplate"),f=F(l),b=F(u),h=F(u),m((y=t((g=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"icon",y,n(t)),i(t,"nameLabel",d,n(t)),i(t,"value",L,n(t)),t}r(t,e);var a=t.prototype;return a.start=function(){},a.update=function(e){},a.setup=function(e){var t=this;this.icon&&c.load(e.imagePath+"/spriteFrame",s,(function(e,r){e&&console.error("Failed to load image:",e),!e&&t.icon&&(t.icon.spriteFrame=r)})),this.nameLabel&&(this.nameLabel.string=e.name),this.value&&(this.value.string=e.value)},t}(p)).prototype,"icon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(g.prototype,"nameLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(g.prototype,"value",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/StatToStringConverter.ts",["cc","./StatGrid.ts"],(function(t){var e,r;return{setters:[function(t){e=t.cclegacy},function(t){r=t.StatGrid}],execute:function(){e._RF.push({},"4328agoOt5LnYiaxK7uTHBf","StatToStringConverter",void 0);t("StatsToStringConverter",function(){function t(){}return t.prototype.getGradeRichText=function(t){var e=t.item.grades[t.getGrade()];if(!e)return"";for(var i=[],n={healthPoints:"HP",armorClass:"AC",criticalMultiplier:"Critical Multiplier",initiative:"Initiative",attackBonus:"Attack Bonus"},a=0,c=Object.entries(e);a<c.length;a++){var o=c[a],u=o[0],s=o[1];if("damageDice"===u){var l=s,p=r.convertDamageDiceToRange(l);i.push("Damage: "+p),l.forEach((function(t){return i.push(t.type+": "+t.dice)}))}else{var f=n[u]||u.replace(/([A-Z])/g," $1").replace(/^./,(function(t){return t.toUpperCase()})).trim(),g="number"==typeof s&&"criticalMultiplier"===u?"+"+(100*s).toFixed(0)+"%":s;i.push(f+": "+g)}}return i.join("\n")},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/SummonService.ts",["cc","./DataLoader.ts","./GameApp.ts","./ItemInstance.ts","./ItemRandomizer.ts"],(function(n){var t,e,r,a,c;return{setters:[function(n){t=n.cclegacy},function(n){e=n.DataLoader},function(n){r=n.GameApp},function(n){a=n.ItemInstance},function(n){c=n.ItemRandomizer}],execute:function(){t._RF.push({},"a5ab07oOK1PS57Sjzf4awD9","SummonService",void 0),n("SummonService",function(){function n(){}n.getInstance=function(){return n.instance||(n.instance=new n),n.instance};var t=n.prototype;return t.generateItems=function(n){var t=new c;t.init(e.getInstance().getAllItems().filter((function(n){return"etc"!==n.type})));for(var r=[],o=0;o<n;o++){var i=t.getRandomItemId(),u=e.getInstance().getItemById(i);r.push(new a(u))}return r},t.addItemsToInventory=function(n){var t=r.instance.getHero().getInventory();n.forEach((function(n){return t.addItem(n)}))},n}()).instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/SummonWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./GridLayout.ts","./ItemIconTemplate.ts","./SummonService.ts"],(function(t){var n,e,i,o,r,u,s,a,m,c,l,p,f,h,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,s=t.Prefab,a=t.Node,m=t.Button,c=t.view,l=t.instantiate},function(t){p=t.BaseDialog},function(t){f=t.GridLayout},function(t){h=t.ItemIconTemplate},function(t){d=t.SummonService}],execute:function(){var v,y,b,I,S,g,w,B,L,z,C;r._RF.push({},"38ce0kBlhVMUI5LUGyjyDu+","SummonWindow",void 0);var D=u.ccclass,G=u.property;t("SummonWindow",(v=D("SummonWindow"),y=G(s),b=G(a),I=G(m),S=G(m),v((B=n((w=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,i(n,"itemPrefab",B,o(n)),i(n,"content",L,o(n)),i(n,"summonButton",z,o(n)),i(n,"summon10Button",C,o(n)),n.items=[],n.summonService=void 0,n}e(n,t);var r=n.prototype;return r.onLoad=function(){var t,n,e=this;this.summonService=d.getInstance(),null==(t=this.summonButton)||t.node.on(m.EventType.CLICK,(function(){return e.performSummon(1)}),this),null==(n=this.summon10Button)||n.node.on(m.EventType.CLICK,(function(){return e.performSummon(10)}),this)},r.start=function(){var n=this;t.prototype.start.call(this),c.on("canvas-resize",(function(){n.setupGrid()}))},r.onDialogOpen=function(){this.setupGrid(),this.items.length>0&&this.displayItems(this.items)},r.setItems=function(t){this.items=t},r.displayItems=function(t){var n=this;this.content&&(this.content.removeAllChildren(),t.forEach((function(t){var e=l(n.itemPrefab);e.getComponent(h).setup(t),n.content.addChild(e)})))},r.performSummon=function(t){var n=this.summonService.generateItems(t);this.summonService.addItemsToInventory(n),this.items=n,this.displayItems(this.items)},r.setupGrid=function(){new f(168,50,this.content,[],100).setupGrid()},n}(p)).prototype,"itemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(w.prototype,"content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(w.prototype,"summonButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(w.prototype,"summon10Button",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=w))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/TokenManager.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t.sys}],execute:function(){n._RF.push({},"c2f7fykDWBAsrIRWoq/b6iw","TokenManager",void 0);var o=e.localStorage,r=t("TokenManager",function(){function t(){this.token=void 0,this.token=null,this.loadToken()}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.getToken=function(){return this.token},n.setToken=function(t){this.token=t,this.saveToken()},n.clearToken=function(){this.token=null,o.removeItem(t.TOKEN_KEY)},n.hasToken=function(){return!!this.token},n.loadToken=function(){try{var n=o.getItem(t.TOKEN_KEY);n&&(this.token=n)}catch(t){console.error("Failed to load token from storage:",t)}},n.saveToken=function(){try{this.token&&o.setItem(t.TOKEN_KEY,this.token)}catch(t){console.error("Failed to save token to storage:",t)}},t}());r.instance=void 0,r.TOKEN_KEY="auth_token",n._RF.pop()}}}));

System.register("chunks:///_virtual/Tooltip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TooltipPosition.ts"],(function(t){var e,i,n,o,a,c,r,l,u,s,h,d,p,b,f,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,r=t.Node,l=t.Label,u=t.RichText,s=t.Button,h=t.director,d=t.UIOpacity,p=t.tween,b=t.UITransform,f=t.Component},function(t){v=t.TooltipPosition}],execute:function(){var T,y,g,C,m,L,z,R,w,x,S,A,I;a._RF.push({},"f1cd0Z/O9dA2Y/kCsaI/3e4","Tooltip",void 0);var N=c.ccclass,_=c.property;t("Tooltip",(T=N("Tooltip"),y=_(r),g=_(l),C=_(u),m=_(s),T(((I=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,n(e,"iconLayout",R,o(e)),n(e,"headerLabel",w,o(e)),n(e,"contentRichText",x,o(e)),n(e,"button",S,o(e)),n(e,"padding",A,o(e)),e.currentTooltipNode=null,e.isTooltipActive=!1,e}i(e,t),e.getInstance=function(){return e.instance};var a=e.prototype;return a.onLoad=function(){var t;e.instance=this,this.node.active=!1,this.deactivate();var i=null==(t=h.getScene())?void 0:t.getChildByName("Canvas");i&&i.on(r.EventType.TOUCH_START,this.onGlobalTouch,this,!0)},a.onDestroy=function(){var t;(null==(t=h.getScene())?void 0:t.getChildByName("Canvas")).off(r.EventType.TOUCH_START,this.onGlobalTouch,this)},a.onGlobalTouch=function(t){if(this.isTooltipActive){var e=t.target;e&&e!==this.button.node&&this.currentTooltipNode!==e&&(this.hide(),this.isTooltipActive=!1,this.currentTooltipNode=null)}},a.deactivate=function(){this.iconLayout.active=!1,this.button.node.active=!1},a.start=function(){this.contentRichText&&(this.contentRichText.maxWidth=350)},a.show=function(t,e){var i=this;if(this.deactivate(),this.contentRichText.string=t.content,t.iconNode&&(this.iconLayout.removeAllChildren(),this.iconLayout.active=!0,this.iconLayout.addChild(t.iconNode),this.headerLabel.string=t.header,this.iconLayout.addChild(this.headerLabel.node)),t.button){this.button.node.active=!0;var n=this.button.getComponentInChildren(l);n&&(n.string=t.button.label),this.button.node.off(s.EventType.CLICK),this.button.node.on(s.EventType.CLICK,t.button.callback,this)}this.node.active=!0;var o=this.node.getComponent(d)||this.node.addComponent(d);o.opacity=0,this.scheduleOnce((function(){i.updateTooltipSize(),v.positionTooltip(i.node,e),p(o).to(.2,{opacity:255}).start()}),0)},a.hide=function(){this.node.active=!1},a.updateTooltipSize=function(){var t=this.contentRichText.getComponent(b),e=this.iconLayout.getComponent(b),i=t.contentSize.width,n=e.contentSize.width,o=Math.max(i,n)+2*this.padding,a=this.node.getComponent(b);a.setContentSize(o,a.height)},e}(f)).instance=null,R=e((z=I).prototype,"iconLayout",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(z.prototype,"headerLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(z.prototype,"contentRichText",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(z.prototype,"button",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(z.prototype,"padding",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),L=z))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/TooltipData.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"4a264u/HmRBa7QjL/nDu5mN","TooltipData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/TooltipPosition.ts",["cc"],(function(t){var o,i,e,n;return{setters:[function(t){o=t.cclegacy,i=t.UITransform,e=t.Vec3,n=t.view}],execute:function(){o._RF.push({},"04a5c+Kc69Ho69D2SwJFD8E","TooltipPosition",void 0);t("TooltipPosition",function(){function t(){}return t.positionTooltip=function(t,o){var c=t.getComponent(i),r=o.getComponent(i),s=new e;o.getWorldPosition(s);var p=t.parent.getComponent(i).convertToNodeSpaceAR(s),u=c.width,h=c.height,g=r.width,a=r.height,l=p.x+g/2,f=p.y+a/2+h/2-15,v=n.getVisibleSize(),w=v.width/2,d=v.height/2;l+u/2>w&&(l=w-u/2-10),l-u/2<-w&&(l=u/2-w+10),f+h/2>d&&(f=p.y-a/2-h/2+15),f-h/2<-d&&(f=h/2-d+10),t.setPosition(new e(l,f,0))},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/TooltipTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tooltip.ts"],(function(t){var o,i,e,n,r,p,l,a,s;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,p=t._decorator,l=t.Node,a=t.Component},function(t){s=t.Tooltip}],execute:function(){var c,u,T;r._RF.push({},"dd00b7QYKhNXp9bsTSMO88v","TooltipTrigger",void 0);var h=p.ccclass,d=p.property;t("TooltipTrigger",h("TooltipTrigger")((T=o((u=function(t){function o(){for(var o,i=arguments.length,r=new Array(i),p=0;p<i;p++)r[p]=arguments[p];return o=t.call.apply(t,[this].concat(r))||this,e(o,"tooltipData",T,n(o)),o}i(o,t);var r=o.prototype;return r.onLoad=function(){this.node.on(l.EventType.TOUCH_START,this.showTooltip,this)},r.setTooltipData=function(t){this.tooltipData=t},r.showTooltip=function(t){t.propagationStopped=!0;var o=s.getInstance();o.currentTooltipNode!==this.node?o&&(o.show(this.tooltipData,this.node),o.currentTooltipNode=this.node,o.isTooltipActive=!0):this.hideTooltip()},r.hideTooltip=function(){var t=s.getInstance();t&&(t.currentTooltipNode=null,t.isTooltipActive=!1,t.hide())},o}(a)).prototype,"tooltipData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=u))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/TopBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./HeroEvent.ts"],(function(e){var t,n,r,o,i,a,l,s,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Label,s=e.Component},function(e){c=e.EventBus},function(e){u=e.HeroEvent}],execute:function(){var p,f,b,v,h,d,g;i._RF.push({},"58a78mhti9DFaLpajYC5qtg","TopBar",void 0);var y=a.ccclass,E=a.property;e("TopBar",(p=y("TopBar"),f=E(l),b=E(l),p((d=t((h=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"nameLabel",d,o(t)),r(t,"levelLabel",g,o(t)),t}n(t,e);var i=t.prototype;return i.start=function(){console.log("Start top bar"),c.on(u.HERO_CREATED,this.onHeroCreated.bind(this))},i.onHeroCreated=function(e){this.node.active&&(this.nameLabel.string=e.name,this.levelLabel.string=e.level.toString())},i.onDestroy=function(){c.off(u.HERO_CREATED,this.onHeroCreated.bind(this))},t}(s)).prototype,"nameLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(h.prototype,"levelLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=h))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/UserService.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"d033ft7Q3FGppaSu0VUMfHz","UserService",void 0);t("UserService",function(){function t(t){this.httpClient=void 0,this.httpClient=t}return t.prototype.getUserData=function(){var t=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.httpClient.get("/auth/user"));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/VictoryWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./GameApp.ts"],(function(e){var t,i,n,r,o,a,c,l,u,s,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Prefab,l=e.Node,u=e.instantiate},function(e){s=e.BaseDialog},function(e){p=e.ItemIconTemplate},function(e){f=e.GameApp}],execute:function(){var d,m,y,h,v,b,g;o._RF.push({},"c7c896LGdFLt6DvM7lRGJm+","VictoryWindow",void 0);var I=a.ccclass,G=a.property;e("VictoryWindow",(d=I("VictoryWindow"),m=G(c),y=G(l),d((b=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"itemIconPrefab",b,r(t)),n(t,"itemGrid",g,r(t)),t}return i(t,e),t.prototype.setup=function(e){var t=this;this.itemGrid.removeAllChildren();var i=f.instance.getHero().getInventory();e.forEach((function(e){var n=u(t.itemIconPrefab);n.getComponent(p).setup(e),t.itemGrid.addChild(n),i.addItem(e)}))},t}(s)).prototype,"itemIconPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(v.prototype,"itemGrid",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=v))||h));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});