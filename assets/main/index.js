System.register("chunks:///_virtual/Action.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r;return{setters:[function(t){n=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"671b0cz0eZG/ZQkXyR7onVS","Action",void 0);t("Action",function(){function t(t,n,e){this.httpClient=t,this.router=n,this.action=e}var r=t.prototype;return r.getRouter=function(){return this.router},r.getAction=function(){return this.action},r.getUrl=function(){return this.router+this.getAction()},r.execute=function(){var t=n(e().mark((function t(n){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.post(this.getUrl(),n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ActionFactory.ts",["cc","./AuthInterceptor.ts","./ContentTypeInterceptor.ts","./LoggingInterceptor.ts","./AuthAction.ts","./LoadPlayerAction.ts","./HttpClient.ts","./SummonAction.ts","./Actions.ts","./PurchaseAction.ts","./BattleAction.ts","./CraftAction.ts","./DailyQuestRewardAction.ts","./TelegramAuthAction.ts"],(function(t){var n,e,i,o,c,r,s,u,A,a,h,f,p,g,l,d;return{setters:[function(t){n=t.cclegacy},function(t){e=t.AuthInterceptor},function(t){i=t.ContentTypeInterceptor},function(t){o=t.LoggingInterceptor},function(t){c=t.AuthAction},function(t){r=t.LoadPlayerAction},function(t){s=t.HttpClient},function(t){u=t.SummonAction},function(t){A=t.GameActions,a=t.Routers,h=t.AuthActions},function(t){f=t.PurchaseAction},function(t){p=t.BattleAction},function(t){g=t.CraftAction},function(t){l=t.DailyQuestRewardAction},function(t){d=t.TelegramAuthAction}],execute:function(){var v;n._RF.push({},"a97acywNZlGx6R0WACbz9d+","ActionFactory",void 0);var w=((v={})[A.LOAD_PLAYER]=r,v[A.SUMMON]=u,v[A.PURCHASE]=f,v[A.BATTLE]=p,v[A.CRAFT]=g,v[A.DAILY_QUEST_REWARD]=l,v);t("ActionFactory",function(){function t(){var t=this;this.authAction=void 0,this.telegramAuthAction=void 0,this.actions=new Map,this.httpClient=void 0;var n=new s;this.httpClient=n,n.addRequestInterceptor(new i),n.addRequestInterceptor(new e),n.addResponseInterceptor(new o),this.authAction=new c(n,a.AUTH,h.LOGIN),this.telegramAuthAction=new d(n,a.AUTH,h.TG_LOGIN),Object.entries(w).forEach((function(n){var e=n[0],i=n[1];t.registerAction(e,i)}))}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.getAuthAction=function(){return this.authAction},n.getTelegramAuthAction=function(){return this.telegramAuthAction},n.registerAction=function(t,n){var e=new n(this.httpClient,a.GAME,t);this.actions.set(t,e)},n.get=function(t){var n=this.actions.get(t);if(!n)throw new Error("Action not registered: "+t);return n},t}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/Actions.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"49178XIcQBCoI7nT5EDSdsA","Actions",void 0);t("Routers",{AUTH:"/auth",GAME:"/game"}),t("AuthActions",{LOGIN:"/login",TG_LOGIN:"/tgLogin"}),t("GameActions",{LOAD_PLAYER:"/loadPlayer",SUMMON:"/summon",PURCHASE:"/purchase",BATTLE:"/battle",CRAFT:"/craft",DAILY_QUEST_REWARD:"/dailyQuestReward"});e._RF.pop()}}}));

System.register("chunks:///_virtual/Animations.ts",["cc"],(function(t){var n,e,c;return{setters:[function(t){n=t.cclegacy,e=t.tween,c=t.Vec3}],execute:function(){n._RF.push({},"05ce8f5F49E8qQQI2iEvC76","Animations",void 0);t("Animations",function(){function t(){}return t.button=function(t,n){e(t).to(.3,{scale:new c(1.2,1.2,1.2)}).to(.3,{scale:n}).start()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/APIConfig.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a28d0D46k9JpY8DzWL3/dcV","APIConfig",void 0);var n=t("APIConfig",function(){function t(){this.baseURL=void 0,this.timeout=void 0,this.baseURL=t.REMOTE_SSL,this.timeout=1e4}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var e=t.prototype;return e.getBaseURL=function(){return this.baseURL},e.getTimeout=function(){return this.timeout},e.setBaseURL=function(t){this.baseURL=t},e.setTimeout=function(t){this.timeout=t},t}());n.LOCAL="http://192.168.0.154:3000",n.REMOTE="http://13.61.196.33:3000",n.REMOTE_SSL="https://api.lineage2server.com",n.instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/Attackable.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"3508cDRTQhPW58VuosBHvhl","Attackable",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/AuthAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts"],(function(t){var n,i,c;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy},function(t){c=t.Action}],execute:function(){i._RF.push({},"295166gK29Dy6DmliVXxU0X","AuthAction",void 0);t("AuthAction",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i}(c));i._RF.pop()}}}));

System.register("chunks:///_virtual/AuthInterceptor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TokenManager.ts"],(function(e){var t,n,r;return{setters:[function(e){t=e.extends},function(e){n=e.cclegacy},function(e){r=e.TokenManager}],execute:function(){n._RF.push({},"eaeac6kWtRDa5kLfW2S2fUc","AuthInterceptor",void 0);e("AuthInterceptor",function(){function e(){}return e.prototype.intercept=function(e){var n=r.getInstance();return n.hasToken()&&(e.headers=t({},e.headers,{Authorization:"Bearer "+n.getToken()})),e},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogManager.ts"],(function(t){var e,n,i,o,a,c,l,r,s,u,p,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,l=t.Button,r=t.BlockInputEvents,s=t.UIOpacity,u=t.Vec3,p=t.tween,h=t.Component},function(t){f=t.DialogManager}],execute:function(){var v,g,d,_,b,D,w,y;a._RF.push({},"8a47e4LfLJGi6enGN8lY2XD","BaseDialog",void 0);var m=c.ccclass,C=c.property;t("BaseDialog",(v=m("BaseDialog"),g=C(l),v((b=e((_=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"backButton",b,o(e)),i(e,"openDuration",D,o(e)),i(e,"closeDuration",w,o(e)),i(e,"animation",y,o(e)),e._activeTween=null,e._content=null,e.keepVisible=!1,e}n(e,t);var a=e.prototype;return a.start=function(){var t;null==(t=this.backButton)||t.node.on(l.EventType.CLICK,this.close,this),this.node&&(this._content=this.node.getChildByName("Content"),this.node.active=!1),this.node.addComponent(r),this.afterStart()},a.afterStart=function(){},a.onDialogOpen=function(){},a.onDialogClose=function(){},a.blockUI=function(){this.node.active=!0},a.unblockUI=function(){this.node.active=!0},a.setActive=function(t,e){var n=this;if(void 0===e&&(e=!1),this.node)if(this._activeTween&&(this._activeTween.stop(),this._activeTween=null),t){if(this.node.active=!0,this.onDialogOpen(),this._content.active=!0,!this.keepVisible&&this.animation&&e){var i=this._content.getComponent(s)||this._content.addComponent(s);i.opacity=0,this.scheduleOnce((function(){n._content.scale=new u(0,0,1),i.opacity=255,n._activeTween=p(n._content).to(n.openDuration,{scale:new u(1,1,1)},{easing:"backOut",onComplete:function(){n._activeTween=null}}).start()}),0)}}else this.animation?this.scheduleOnce((function(){n._activeTween=p(n._content).to(n.closeDuration,{scale:new u(0,0,1)},{easing:"backIn",onComplete:function(){n._activeTween=null,n.node.active=!1,n._content.active=!1,n._content.scale=new u(1,1,1),n.onDialogClose()}}).start()}),0):(this.node.active=!1,this._content.active=!1,this.onDialogClose())},a.close=function(){f.instance.popDialog()},e}(h)).prototype,"backButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(_.prototype,"openDuration",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),w=e(_.prototype,"closeDuration",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),y=e(_.prototype,"animation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=_))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/Battle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"73406kIuudMwLiN9wZ9ULe9","Battle",void 0);t("Battle",function(){function t(t,e){this.attacker=void 0,this.defender=void 0,this._winner=null,this._battleLog=[],this.attacker=t,this.defender=e}var a=t.prototype;return a.rollAttack=function(t){return this.rollDice("1d20")+t.attackRoll},a.rollDamage=function(t){var e=this;return t.damageDice.map((function(t){return{type:t.type,value:e.rollDice(t.dice)}}))},a.rollDice=function(t){for(var e=t.split("d").map(Number),a=e[0],i=e[1],r=0,s=0;s<a;s++){r+=Math.floor(Math.random()*i)+1}return r},a.calculateDamage=function(t,e){var a=0,i=this.rollAttack(t.stats);(this.log("Attack roll: "+this.colorNum(i),t),i>=e.stats.armorClass)?this.rollDamage(t.stats).forEach((function(t){a+=t.value})):this.log("Misses! "+e.name+"'s AC: "+this.colorNum(e.stats.armorClass)+".",t);return 20===i&&(a*=t.stats.criticalMultiplier,a=Math.floor(a),this.log("Critical hit!",t)),Math.max(1,a)},a.log=function(t,e,a){void 0===a&&(a=0),this.battleLog.push({message:t,owner:e,currentHp:a})},a.battle=function(){var t,e,a=Math.floor(20*Math.random())+1+this.attacker.stats.initiative,i=Math.floor(20*Math.random())+1+this.defender.stats.initiative;if(this.log("Initiative roll: "+this.colorNum(a),this.attacker,this.attacker.stats.healthPoints),this.log("Initiative roll: "+this.colorNum(i),this.defender,this.defender.stats.healthPoints),a>i)t=this.attacker,e=this.defender;else if(i>a)t=this.defender,e=this.attacker;else{for(;a===i;)a=Math.floor(20*Math.random())+1+this.attacker.stats.initiative,i=Math.floor(20*Math.random())+1+this.defender.stats.initiative;t=a>i?this.attacker:this.defender,e=a>i?this.defender:this.attacker}for(var r=t.stats.healthPoints,s=e.stats.healthPoints,o=!0,n=0;r>0&&s>0&&!(++n>100);){var l=this.calculateDamage(t,e);if(o&&(l=Math.ceil(.95*l),o=!1),s-=l,this.log("Deals "+this.colorNum(l)+" total damage.",t,r),s<=0)break;var h=this.calculateDamage(e,t);r-=h,this.log("Deals "+this.colorNum(h)+" total damage.",e,s)}if(n>100)return r>=s?t:e;var c=r>0?t:e,u=r>0?e:t;return this.log("Defeated!",u,0),this.winner=c,c},a.colorNum=function(t){return"<color=#d75843>"+t+"</color>"},a.printLog=function(){console.log(this.battleLog.map((function(t){return t.message})).join("\n"))},e(t,[{key:"winner",get:function(){return this._winner},set:function(t){this._winner=t}},{key:"battleLog",get:function(){return this._battleLog},set:function(t){this._battleLog=t}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/BattleAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.Action}],execute:function(){e._RF.push({},"422f4QxHT1J4Iyd7meeiOzm","BattleAction",void 0);t("BattleAction",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/BattleMessageTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,i,n,s,l,o,p,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,l=e.Sprite,o=e.RichText,p=e.ProgressBar,c=e.Label,u=e.Component}],execute:function(){var h,g,m,f,v,b,y,B,T;n._RF.push({},"94a6d+wKMtA7o/qvlt6wRQC","BattleMessageTemplate",void 0);var d=s.ccclass,M=s.property;e("BattleMessageTemplate",(h=d("BattleMessageTemplate"),g=M(l),m=M(o),f=M(p),h((y=t((b=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,a(t,"avatar",y,i(t)),a(t,"messageRichText",B,i(t)),a(t,"hpBar",T,i(t)),t}return r(t,e),t.prototype.setup=function(e,t,r,a){if(void 0===a&&(a=null),this.messageRichText&&(this.messageRichText.string=e),this.hpBar){var i=Math.max(0,Math.min(1,t/r));this.hpBar.progress=i;var n=this.hpBar.node.getComponentInChildren(c);n&&(n.string=""+t),a&&(this.avatar.spriteFrame=a)}},t}(u)).prototype,"avatar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(b.prototype,"messageRichText",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(b.prototype,"hpBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionFactory.ts","./InputBlockingUtils.ts","./DialogManager.ts","./Actions.ts","./ItemId.ts","./ItemInstance.ts","./PlayerStore.ts"],(function(t){var e,n,r,c,o,i,a,s,u,f,l;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy},function(t){c=t.ActionFactory},function(t){o=t.InputBlocking},function(t){i=t.DialogManager},function(t){a=t.GameActions},function(t){s=t.ItemId},function(t){u=t.ItemInstance,f=t.itemById},function(t){l=t.default}],execute:function(){r._RF.push({},"1279dbHm7hDC67qUsnmkAMU","BattleService",void 0);t("BattleService",function(){function t(){}var r=t.prototype;return r.finishBattle=function(){var t=e(n().mark((function t(e){var r,c,o,a,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.performBattleAction(e.id);case 2:r=t.sent,c=[],r.items&&c.push.apply(c,r.items.map((function(t){return u.fromData(t)}))),o=l.getState(),r.items&&o.addItems(r.items),(a=r.resources)&&Object.keys(a).length>0&&Object.entries(a).forEach((function(t){var e=t[0],n=t[1];o.addResources(e,n),null==c||c.push(new u(f(e),void 0))})),o.addResources(s.ETC_ENERGY,-e.energy),(p=i.instance.getDialog("VictoryWindow"))&&c&&(p.setup(c),i.instance.pushDialog(p,!0));case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.performBattleAction=function(){var t=e(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.execute((function(){return c.getInstance().get(a.BATTLE).execute({locationId:e})}));case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("Purchase failed:",t.t0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BattleWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./BattleMessageTemplate.ts","./Player.ts","./DialogManager.ts","./BattleService.ts"],(function(e){var n,t,i,r,s,a,l,o,u,c,g,h,p,f,d,b,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,l=e.ScrollView,o=e.sp,u=e.Prefab,c=e.Label,g=e.Node,h=e.instantiate},function(e){p=e.BaseDialog},function(e){f=e.BattleMessageTemplate},function(e){d=e.Player},function(e){b=e.DialogManager},function(e){m=e.BattleService}],execute:function(){var y,T,v,w,L,M,B,D,P,I,A,x,S,O,z;s._RF.push({},"9cc9fB8k5pL8ppv5DaOHwt7","BattleWindow",void 0);var R=a.ccclass,F=a.property;e("BattleWindow",(y=R("BattleWindow"),T=F(l),v=F(o.Skeleton),w=F(u),L=F(u),M=F(c),B=F(c),y((I=n((P=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s))||this,i(n,"battleLog",I,r(n)),i(n,"diceSpineAnimation",A,r(n)),i(n,"playerMessagePrefab",x,r(n)),i(n,"enemyMessagePrefab",S,r(n)),i(n,"diceResultLabel",O,r(n)),i(n,"resultOnDiceLabel",z,r(n)),n.logMessages=null,n.location=null,n.winner=null,n.turns=[],n.currentTurnIndex=0,n.isAnimation=!1,n}t(n,e);var s=n.prototype;return s.start=function(){e.prototype.start.call(this),this.diceSpineAnimation.node.on(g.EventType.TOUCH_END,this.turn,this)},s.turn=function(){var e=this;if(!(this.currentTurnIndex>=this.turns.length||this.isAnimation)){this.isAnimation=!0,this.diceResultLabel.string="";var n=this.turns[this.currentTurnIndex];this.diceSpineAnimation&&this.diceSpineAnimation.setAnimation(0,"spin",!1),this.diceSpineAnimation.setCompleteListener((function(n){e.diceSpineAnimation.setAnimation(0,"animation",!1),e.resultOnDiceLabel.string=""}));var t=n.messages[0].message.split(": ")[1].match(/>(\d+)</),i=t?t[1]:"0";this.scheduleOnce((function(){e.diceResultLabel.string=i,e.resultOnDiceLabel.string=i}),2.5),this.scheduleOnce((function(){e.displayTurn(n),e.currentTurnIndex++,e.scheduleOnce((function(){if(e.currentTurnIndex<e.turns.length){var t=e.turns[e.currentTurnIndex];t.isPlayerTurn!==n.isPlayerTurn&&(e.displayTurn(t),e.currentTurnIndex++)}2!==e.currentTurnIndex||e.turns[e.currentTurnIndex].isPlayerTurn||(e.displayTurn(e.turns[e.currentTurnIndex]),e.currentTurnIndex++),e.isAnimation=!1,e.currentTurnIndex>=e.turns.length&&e.onBattleFinish()}),1)}),3)}},s.setup=function(e,n){var t=this.battleLog.content;null==t||t.removeAllChildren(),this.logMessages=n.battleLog,this.winner=n.winner,this.location=e,this.currentTurnIndex=0,this.diceResultLabel.string="",this.resultOnDiceLabel.string="",this.groupMessagesIntoTurns()},s.groupMessagesIntoTurns=function(){var e=this;if(this.turns=[],0!==this.logMessages.length)for(var n=null,t=0;t<this.logMessages.length;t++){var i=this.logMessages[t],r=i.owner instanceof d,s=function(n,t){var i={messages:[n],isPlayerTurn:t};return e.turns.push(i),i};t<2?s(i,r):null==n||n.isPlayerTurn!==r?n=s(i,r):n.messages.push(i)}},s.displayTurn=function(e){var n=e.messages.map((function(e){return e.message})).join("\n"),t=e.messages[e.messages.length-1];this.addBattleMessage(n,t)},s.addBattleMessage=function(e,n){var t=this,i=n.owner instanceof d,r=n.owner,s=i?this.playerMessagePrefab:this.enemyMessagePrefab,a=h(s),l=a.getComponent(f),o=i?null:this.location.spriteFrame;l.setup(e,n.currentHp,r.stats.healthPoints,o);var u=this.battleLog.content;a.parent=u,this.scheduleOnce((function(){t.battleLog.scrollToBottom()}),0)},s.onBattleFinish=function(){if(this.winner instanceof d)return this.close(),void(new m).finishBattle(this.location);var e=b.instance.getDialog("DefeatWindow");e&&(this.close(),b.instance.pushDialog(e,!0))},n}(p)).prototype,"battleLog",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(P.prototype,"diceSpineAnimation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(P.prototype,"playerMessagePrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(P.prototype,"enemyMessagePrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(P.prototype,"diceResultLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(P.prototype,"resultOnDiceLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=P))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/BlockWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts"],(function(o){var n,c,i,t;return{setters:[function(o){n=o.inheritsLoose},function(o){c=o.cclegacy,i=o._decorator},function(o){t=o.BaseDialog}],execute:function(){var e;c._RF.push({},"24c79C2QbdHv7bOvIqiw+5Z","BlockWindow",void 0);var r=i.ccclass;o("BlockWindow",r("BlockWindow")(e=function(o){function c(){return o.apply(this,arguments)||this}return n(c,o),c}(t))||e);c._RF.pop()}}}));

System.register("chunks:///_virtual/ClientSummonService.ts",["cc","./DataLoader.ts","./ItemInstance.ts","./ItemRandomizer.ts","./PlayerStore.ts"],(function(t){var e,n,r,a,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.DataLoader},function(t){r=t.ItemInstance},function(t){a=t.ItemRandomizer},function(t){c=t.default}],execute:function(){e._RF.push({},"1a13ach1f1JHYC/efia1oEG","ClientSummonService",void 0);t("ClientSummonService",function(){function t(){}return t.prototype.summonItems=function(t){var e=new a;e.init(n.getInstance().getAllItems().filter((function(t){return"etc"!==t.type})));for(var o=[],u=0;u<t;u++){var i=e.getRandomItemId(),m=n.getInstance().getItemById(i);o.push(m)}var s=o.map((function(t){return new r(t)})).map((function(t){return t.getData()}));return c.getState().addItems(s),s},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CommonIconData.ts",["cc","./DataLoader.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.DataLoader}],execute:function(){e._RF.push({},"fc13daALHhAs7aN+QFZ8133","CommonIconData",void 0);t("CommonIconData",function(){function t(t,e){this._grade=void 0,this._spriteFrame=void 0,this._grade=t,this._spriteFrame=n.getInstance().getCommonIcon(t,e)}var e=t.prototype;return e.getGrade=function(){return this._grade},e.getSpriteFrame=function(){return this._spriteFrame},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CongratulationWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./ItemInstanceIconData.ts"],(function(t){var e,n,o,i,a,r,c,l,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Node},function(t){l=t.BaseDialog},function(t){s=t.ItemIconTemplate},function(t){u=t.ItemInstanceIconData}],execute:function(){var p,d,f,I,g;a._RF.push({},"ff75a0uVCJH7abHEqoya09U","CongratulationWindow",void 0);var m=r.ccclass,y=r.property;t("CongratulationWindow",(p=m("CongratulationWindow"),d=y(c),p((g=e((I=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"itemIconNode",g,i(e)),e}return n(e,t),e.prototype.setup=function(t){var e=this.itemIconNode.getComponent(s),n=new u(t.grade,t.item.id);e.setup(n)},e}(l)).prototype,"itemIconNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=I))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/ContentTypeInterceptor.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.extends},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"bcd6194JQdFRr5qs4RdiK8V","ContentTypeInterceptor",void 0);e("ContentTypeInterceptor",function(){function e(){}return e.prototype.intercept=function(e){return e.headers=t({},e.headers,{"Content-Type":"application/json"}),e},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CountableIconTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemIconTemplate.ts","./ItemInstanceIconData.ts"],(function(e){var t,n,o,i,r,a,c,l,u,p,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,l=e.Label,u=e.Component},function(e){p=e.ItemIconTemplate},function(e){s=e.ItemInstanceIconData}],execute:function(){var m,I,f,b,y,d,v;r._RF.push({},"d385fGdv7VF0ZlZ4yNIISU8","CountableIconTemplate",void 0);var g=a.ccclass,h=a.property;e("CountableIconTemplate",(m=g("CountableIconTemplate"),I=h(c),f=h(l),m((d=t((y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"itemIcon",d,i(t)),o(t,"itemNumber",v,i(t)),t}return n(t,e),t.prototype.setup=function(e,t,n){void 0===n&&(n=void 0);var o=new s(n,e),i=this.itemIcon.getComponent(p);null==i||i.setup(o),this.itemNumber.string=t.toString()},t}(u)).prototype,"itemIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"itemNumber",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/CraftAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts"],(function(t){var n,c,i;return{setters:[function(t){n=t.inheritsLoose},function(t){c=t.cclegacy},function(t){i=t.Action}],execute:function(){c._RF.push({},"b1d92S6NPZKQrn7ygc0IQU9","CraftAction",void 0);t("CraftAction",function(t){function c(){return t.apply(this,arguments)||this}return n(c,t),c}(i));c._RF.pop()}}}));

System.register("chunks:///_virtual/CraftService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionFactory.ts","./Actions.ts","./PlayerStore.ts"],(function(e){var t,r,n,c,a,o;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy},function(e){c=e.ActionFactory},function(e){a=e.GameActions},function(e){o=e.default}],execute:function(){n._RF.push({},"7de402Yww1PYp+zmh8E09O3","CraftService",void 0);e("craftService",function(){var e=t(r().mark((function e(t,n,u){var i,s,m,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.getInstance().get(a.CRAFT),s={itemId:t.itemId,grade:t.grade,sameItemId:n.map((function(e){return e._id})),sameGradeItemId:u.map((function(e){return e._id}))},m=o.getState(),e.prev=3,e.next=6,i.execute(s);case 6:return d=e.sent,m.addItem(d.item),f=[].concat(s.sameItemId,s.sameGradeItemId),m.removeItems(f),e.abrupt("return",d.item);case 13:throw e.prev=13,e.t0=e.catch(3),new Error;case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,r,n){return e.apply(this,arguments)}}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CraftWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./ItemFilter.ts","./DataLoader.ts","./Item.ts","./GridLayout.ts","./Inventory.ts","./ItemInstance.ts","./DialogManager.ts","./PlayerStore.ts","./ItemInstanceIconData.ts","./CommonIconData.ts","./ItemUtil.ts","./CraftService.ts","./InputBlockingUtils.ts"],(function(e){var t,n,i,r,a,o,s,c,u,l,d,f,m,p,I,h,g,v,b,w,C,y,L,D,S,E,B,F,T,W,z,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose,o=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,l=e.Prefab,d=e.Node,f=e.Label,m=e.Button,p=e.view,I=e.instantiate,h=e.Color},function(e){g=e.BaseDialog},function(e){v=e.ItemIconTemplate},function(e){b=e.ItemFilter},function(e){w=e.DataLoader},function(e){C=e.ItemType,y=e.ItemGrade},function(e){L=e.GridLayout},function(e){D=e.Inventory},function(e){S=e.ItemInstance},function(e){E=e.DialogManager},function(e){B=e.default},function(e){F=e.ItemInstanceIconData},function(e){T=e.CommonIconData},function(e){W=e.getLowerGrade},function(e){z=e.craftService},function(e){N=e.InputBlocking}],execute:function(){var G,M,k,x,P,R,_,A,U,H,O,q,X,j,K,J,Q,V,Y;c._RF.push({},"607bb1isuxFH47UC6ae7X42","CraftWindow",void 0);var Z=u.ccclass,$=u.property;e("CraftWindow",(G=Z("CraftWindow"),M=$(l),k=$(d),x=$([d]),P=$([f]),R=$(d),_=$(d),A=$(d),U=$(m),G((q=t((O=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"itemPrefab",q,r(t)),i(t,"selectedItemNode",X,r(t)),i(t,"ingredients",j,r(t)),i(t,"ingredientCountLabels",K,r(t)),i(t,"content",J,r(t)),i(t,"separator",Q,r(t)),i(t,"itemFilter",V,r(t)),i(t,"craftButton",Y,r(t)),t.selectedItemInstance=null,t}n(t,e);var c=t.prototype;return c.start=function(){var t,n,i=this;if(e.prototype.start.call(this),!this.selectedItemNode)throw new Error;p.on("canvas-resize",(function(){i.setupGrid()})),null==(t=this.itemFilter)||t.on("ITEMS_FILTERED",(function(e){i.displayItems(e)})),null==(n=this.craftButton)||n.node.on(m.EventType.CLICK,this.onCraftButtonClick,this),this.resetCraftWindow()},c.onDialogOpen=function(){this.setupGrid(),this.refreshList()},c.onDialogClose=function(){this.resetCraftWindow()},c.onCraftButtonClick=function(){var e=this;if(this.selectedItemInstance){var t=W(this.selectedItemInstance.grade);if(t){var n=E.instance.getDialog("MaterialSelectionWindow");if(n){var i=this.getReservedSameItems(t);n.setup({type:this.selectedItemInstance.item.type,grade:t,requiredCount:4,reservedItems:i,onConfirm:function(t){e.onMaterialsSelected(t)}}),E.instance.pushDialog(n,!0)}}}},c.getReservedSameItems=function(e){var t=[],n=0,i=B.getState();if(!this.selectedItemInstance)return[];for(var r,o=a(i.getUnequippedItems());!(r=o()).done;){var s=r.value;if(n>=2)break;s.itemId===this.selectedItemInstance.item.id&&s.grade===e&&(t.push(s),n++)}return t},c.onMaterialsSelected=function(e){var t=this;if(this.selectedItemInstance&&!(e.length<4)){var n=W(this.selectedItemInstance.grade);if(!n)throw new Error("Failed to get lower grade");var i=this.getReservedSameItems(n);i.length<2||o(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.execute(o(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.selectedItemInstance){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,z(t.selectedItemInstance.getData(),i,e);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)}))));case 2:r=n.sent,t.resetCraftWindow(),r&&t.openCongratulationWindow(S.fromData(r));case 5:case"end":return n.stop()}}),n)})))()}},c.openCongratulationWindow=function(e){var t=E.instance.getDialog("CongratulationWindow");t&&(t.setup(e),E.instance.pushDialog(t,!0))},c.resetCraftWindow=function(){this.selectedItemInstance=null,this.selectedItemNode&&(this.selectedItemNode.active=!1),this.ingredients.forEach((function(e){e.active=!1})),this.resetLabels()},c.refreshList=function(){var e,t=w.getInstance().getAllItems().filter((function(e){return e.type!==C.ETC})),n=[];[y.C,y.B,y.A,y.S,y.SS,y.X].forEach((function(e){t.forEach((function(t){if(t.grades[e]){var i=new S(t,e);n.push(i)}}))}));var i=null==(e=this.itemFilter)?void 0:e.getComponent(b);i&&i.setItems(n)},c.displayItems=function(e){var t=this;this.content&&(this.content.removeAllChildren(),e.forEach((function(e){var n,i=I(t.itemPrefab),r=null==i?void 0:i.getComponent(v),a=new F(e.grade,e.item.id);r&&r.setup(a),null==i||i.on(d.EventType.TOUCH_END,(function(){t.onItemSelected(e)})),i&&(null==(n=t.content)||n.addChild(i))})))},c.onItemSelected=function(e){this.ingredients.forEach((function(e){e.active=!1})),this.selectedItemNode&&(this.selectedItemNode.active=!0),this.selectedItemInstance=e;var t=new F(e.grade,e.item.id);this.selectedItemNode&&this.setupIcon(this.selectedItemNode,t);var n=W(e.grade);if(n){var i=new F(n,e.item.id),r=B.getState().getItems().map((function(e){return S.fromData(e)})),a=new D(r),o=a.getItemCount(e.item.id,n),s=a.getItemCountByTypeAndGrade(e.item.type,n);this.setupIcon(this.ingredients[0],i),this.setupIcon(this.ingredients[1],i);var c=Math.min(o,1);this.updateIngredientLabel(0,c,1),o-=c;var u=Math.min(o,1);this.updateIngredientLabel(1,u,1),o-=u,this.ingredients.forEach((function(e){e.active=!0}));var l=new T(n,e.type);this.setupIcon(this.ingredients[2],l);var d=c+u;if(e.item.type){var f=s-d,m=Math.min(f,4);this.updateIngredientLabel(2,m,4)}}},c.resetLabels=function(){this.ingredientCountLabels.forEach((function(e){e.node.active=!1}))},c.updateIngredientLabel=function(e,t,n){if(this.ingredientCountLabels[e]){var i=this.ingredientCountLabels[e];i.string=t+"/"+n;var r=t>=n;i.color=r?new h(255,255,255,255):new h(255,0,0,255),this.ingredientCountLabels[e].node.active=!0}},c.setupIcon=function(e,t){var n=e.getComponent(v);n&&n.setup(t)},c.setupGrid=function(){this.content&&this.separator&&new L(168,50,this.content,[this.separator]).setupGrid()},t}(g)).prototype,"itemPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(O.prototype,"selectedItemNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(O.prototype,"ingredients",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=t(O.prototype,"ingredientCountLabels",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=t(O.prototype,"content",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(O.prototype,"separator",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(O.prototype,"itemFilter",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(O.prototype,"craftButton",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=O))||H));c._RF.pop()}}}));

System.register("chunks:///_virtual/Crystal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemIconTemplate.ts","./DialogManager.ts","./Animations.ts","./ItemInstanceIconData.ts","./PlayerStore.ts","./ItemId.ts","./SummonUtil.ts"],(function(t){var n,e,i,o,s,a,r,u,m,l,c,g,h,p,f,d,y,b,C,A,I,v,X,S;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){r=t.cclegacy,u=t._decorator,m=t.Button,l=t.Node,c=t.sp,g=t.Toggle,h=t.Label,p=t.UIOpacity,f=t.tween,d=t.Vec3,y=t.Component},function(t){b=t.ItemIconTemplate},function(t){C=t.DialogManager},function(t){A=t.Animations},function(t){I=t.ItemInstanceIconData},function(t){v=t.default},function(t){X=t.ItemId},function(t){S=t.summonItems}],execute:function(){var w,k,L,T,F,z,D,B,x,_,M,P,R,E,G,O,U,Y,j;r._RF.push({},"01184GBT2tIYr5+kMXiCT6X","Crystal",void 0);var H=u.ccclass,K=u.property;t("Crystal",(w=H("Crystal"),k=K(m),L=K(l),T=K(l),F=K(c.Skeleton),z=K(g),D=K(g),B=K(l),x=K(h),w((P=n((M=function(t){function n(){for(var n,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=t.call.apply(t,[this].concat(s))||this,i(n,"crystalButton",P,o(n)),i(n,"summonedFrame",R,o(n)),i(n,"summonedItem",E,o(n)),i(n,"summonSpineAnimation",G,o(n)),i(n,"toggleX1",O,o(n)),i(n,"toggleX10",U,o(n)),i(n,"summonLigth",Y,o(n)),i(n,"crystalCount",j,o(n)),n.crystal=null,n.isAnimating=!1,n}e(n,t);var r=n.prototype;return r.start=function(){var t,n,e,i=this;this.summonSpineAnimation.setAnimation(0,"animation",!1),this.summonSpineAnimation.paused=!0,null==(t=this.crystalButton)||t.node.on(m.EventType.CLICK,this.summon,this),this.crystal=this.crystalButton.node,null==(n=this.toggleX1)||n.node.on("toggle",this.onToggleChanged,this),null==(e=this.toggleX10)||e.node.on("toggle",this.onToggleChanged,this),this.summonedFrame&&(this.summonedFrame.active=!1),this.summonLigth.active=!1,v.subscribe((function(t){return t.resources[X.ETC_CRYSTALS]}),(function(t){i.node.active&&(i.crystalCount.string=t.toString())}))},r.onToggleChanged=function(t){t===this.toggleX1&&this.toggleX1.isChecked?this.toggleX10.isChecked=!1:t===this.toggleX10&&this.toggleX10.isChecked?this.toggleX1.isChecked=!1:t!==this.toggleX10||this.toggleX10.isChecked?t!==this.toggleX1||this.toggleX1.isChecked||(this.toggleX10.isChecked=!0):this.toggleX1.isChecked=!0},r.summon=function(){var t=s(a().mark((function t(){var n,e,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isAnimating){t.next=2;break}return t.abrupt("return");case 2:return n=this.toggleX1.isChecked,e=n?1:10,t.next=6,S(e);case 6:if(!((i=t.sent).length<1)){t.next=9;break}return t.abrupt("return");case 9:n?(this.summonedItem.getComponent(b).setup(new I(i[0].grade,i[0].itemId)),this.playSummonAnimation()):(this.playeCrystalAnimation(),(o=C.instance.getDialog("SummonWindow"))&&(o.setItems(i.map((function(t){return new I(t.grade,t.itemId)}))),C.instance.pushDialog(o)));case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.playeCrystalAnimation=function(){var t=this.crystal.scale.clone();A.button(this.crystal,t)},r.playSummonAnimation=function(){this.isAnimating=!0,this.summonLigth.active=!1,this.playeCrystalAnimation(),this.summonSpineAnimation&&(this.summonSpineAnimation.setAnimation(0,"animation",!1),this.summonSpineAnimation.paused=!1,this.summonItemAnimation()),this.summonSpineAnimation.setCompleteListener((function(t){console.log("Animation completed:",t.animation.name)}))},r.summonLightAnimation=function(){if(this.summonLigth){var t=this.summonLigth.getComponent(p)||this.summonLigth.addComponent(p);t.opacity=0,this.summonLigth.active=!0,f(t).to(1,{opacity:255}).call((function(){})).start()}},r.summonItemAnimation=function(){var t=this;this.summonedFrame&&(this.summonedFrame.setPosition(0,0,0),this.summonedFrame.scale=new d(0,0,0),this.summonedFrame.active=!0,f(this.summonedFrame).delay(.5).to(.5,{scale:new d(1,1,1)},{easing:"backOut"}).call((function(){t.isAnimating=!1})).start())},n}(y)).prototype,"crystalButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(M.prototype,"summonedFrame",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(M.prototype,"summonedItem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(M.prototype,"summonSpineAnimation",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(M.prototype,"toggleX1",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(M.prototype,"toggleX10",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(M.prototype,"summonLigth",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(M.prototype,"crystalCount",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=M))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/CurrenciesBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemId.ts","./PlayerStore.ts"],(function(e){var r,n,t,i,o,a,l,u,c,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,u=e.Component},function(e){c=e.ItemId},function(e){s=e.default}],execute:function(){var p,b,f,g,y,d,v,h,m;o._RF.push({},"646795bNnJPrqmmihNvilxx","CurrenciesBar",void 0);var L=a.ccclass,C=a.property;e("CurrenciesBar",(p=L("CurrenciesBar"),b=C(l),f=C(l),g=C(l),p((v=r((d=function(e){function r(){for(var r,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,t(r,"coinLabel",v,i(r)),t(r,"gemLabel",h,i(r)),t(r,"energyLabel",m,i(r)),r}n(r,e);var o=r.prototype;return o.start=function(){var e=this;s.subscribe((function(e){return e.resources}),(function(r){e.node.active&&e.updateCurrencies(r)}))},o.updateCurrencies=function(e){var r,n,t;this.coinLabel.string=null==(r=e[c.ETC_COINS])?void 0:r.toString(),this.gemLabel.string=null==(n=e[c.ETC_GEMS])?void 0:n.toString(),this.energyLabel.string=null==(t=e[c.ETC_ENERGY])?void 0:t.toString()},r}(u)).prototype,"coinLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=r(d.prototype,"gemLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(d.prototype,"energyLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/CustomSlider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,i,s,n,o,u,a,l,c,h,p,d,g;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,u=t.Sprite,a=t.Slider,l=t.Node,c=t.Label,h=t.Button,p=t.UITransform,d=t.Vec3,g=t.Component}],execute:function(){var b,f,P,m,y,v,C,S,B,w,L,z,x,I,k,M,T;n._RF.push({},"15582/iGYxFhIZQITIjez4/","CustomSlider",void 0);var _=o.ccclass,D=o.property;t("CustomSlider",(b=_("CustomSlider"),f=D(u),P=D(u),m=D(a),y=D(l),v=D(c),C=D(h),S=D(h),b((L=r((w=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r=t.call.apply(t,[this].concat(n))||this,i(r,"barBackground",L,s(r)),i(r,"progressSprite",z,s(r)),i(r,"slider",x,s(r)),i(r,"handle",I,s(r)),i(r,"progressLabel",k,s(r)),i(r,"addButton",M,s(r)),i(r,"subButton",T,s(r)),r.currentProgress=0,r.maxCapacity=25,r.step=1,r}e(r,t);var n=r.prototype;return n.start=function(){var t,r;this.setProgress(this.currentProgress),this.slider.node.on("slide",this.handleSliderMove,this),null==(t=this.addButton)||t.node.on(h.EventType.CLICK,this.addProgress,this),null==(r=this.subButton)||r.node.on(h.EventType.CLICK,this.subProgress,this)},n.handleSliderMove=function(){this.currentProgress=Math.round(this.slider.progress*this.maxCapacity),this.setProgress(this.currentProgress)},n.getSliderWidth=function(){var t;return(null==(t=this.barBackground)||null==(t=t.getComponent(p))?void 0:t.width)||0},n.updateProgressSprite=function(t){var r,e,i,s=this.getSliderWidth(),n=s*t,o=-s*(null!=(r=null==(e=this.barBackground.node.getComponent(p))?void 0:e.anchorX)?r:.5),u=null==(i=this.progressSprite)?void 0:i.getComponent(p);u&&(u.width=n,this.progressSprite.node.setPosition(new d(o,0,0)))},n.updateProgressLabel=function(t){void 0===t&&(t=this.currentProgress),this.progressLabel&&(this.progressLabel.string=t+"/"+this.maxCapacity)},n.setProgress=function(t,r){void 0!==r&&(this.maxCapacity=r),this.slider.progress=Math.min(1,t/this.maxCapacity),this.updateProgressLabel(t),this.updateProgressSprite(this.slider.progress),this.updateButtonStates()},n.updateButtonStates=function(){this.addButton&&(this.addButton.interactable=this.currentProgress<this.maxCapacity),this.subButton&&(this.subButton.interactable=this.currentProgress>0)},n.addProgress=function(){this.currentProgress<this.maxCapacity&&(this.currentProgress+=this.step,this.setProgress(this.currentProgress))},n.subProgress=function(){this.currentProgress>0&&(this.currentProgress-=this.step,this.setProgress(this.currentProgress))},r}(g)).prototype,"barBackground",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(w.prototype,"progressSprite",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=r(w.prototype,"slider",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(w.prototype,"handle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=r(w.prototype,"progressLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(w.prototype,"addButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(w.prototype,"subButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=w))||B));n._RF.pop()}}}));

System.register("chunks:///_virtual/DailyQuestConfig.ts",["cc","./GameStatId.ts","./ItemId.ts"],(function(t){var e,s,a;return{setters:[function(t){e=t.cclegacy},function(t){s=t.GameStatId},function(t){a=t.ItemId}],execute:function(){var r,S,n,C,E,i,d,T,_,I,u,m;e._RF.push({},"dfef1q6Li5BQ7IHwj/KmRbd","DailyQuestConfig",void 0);t("dailyQuests",[{id:"1",name:"First Login of the Day",stats:(r={},r[s.DAILY_LOGINS]=1,r),rewards:(S={},S[a.ETC_ENERGY]=20,S[a.ETC_COINS]=500,S)},{id:"2",name:"Conqueror's Glory",stats:(n={},n[s.BATTLES_WON]=10,n),rewards:(C={},C[a.ETC_COINS]=1e3,C[a.ETC_GEMS]=5,C)},{id:"3",name:"Artisan Craftsman",stats:(E={},E[s.ITEMS_CRAFTED]=5,E),rewards:(i={},i[a.ETC_CRYSTALS]=3,i[a.ETC_COINS]=300,i)},{id:"4",name:"Market Spender",stats:(d={},d[s.STORE_PURCHASES]=3,d),rewards:(T={},T[a.ETC_GEMS]=10,T)},{id:"5",name:"Summoner's Call",stats:(_={},_[s.ITEMS_SUMMONED]=2,_),rewards:(I={},I[a.ETC_COINS]=800,I[a.ETC_CRYSTALS]=5,I)},{id:"6",name:"Quest Master",stats:(u={},u[s.QUESTS_FINISHED]=5,u),rewards:(m={},m[a.ETC_CRYSTALS]=4,m[a.ETC_COINS]=600,m)}]);e._RF.pop()}}}));

System.register("chunks:///_virtual/DailyQuestRewardAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.Action}],execute:function(){e._RF.push({},"0eff6b/k2RBda/QhZxF7v39","DailyQuestRewardAction",void 0);t("DailyQuestRewardAction",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/DailyQuestService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionFactory.ts","./Actions.ts","./PlayerStore.ts"],(function(e){var t,n,r,c,u,a;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){c=e.ActionFactory},function(e){u=e.GameActions},function(e){a=e.default}],execute:function(){r._RF.push({},"ad4e6BgdwZIGYxnpDSMx4Cp","DailyQuestService",void 0);e("DailyQuestService",function(){function e(){}return e.prototype.getReward=function(){var e=t(n().mark((function e(t){var r,o,s,i,l,p,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.getInstance().get(u.DAILY_QUEST_REWARD),e.prev=1,e.next=4,r.execute({questId:t});case 4:for(o=e.sent,s=0,i=Object.entries(o.rewards);s<i.length;s++)l=i[s],p=l[0],f=l[1],a.getState().addResources(p,f);return a.getState().setClaimed(t),e.abrupt("return",o);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/DataLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./items.json","./ShopConfig.ts","./LocationConfig.ts","./ItemId.ts","./GameLocation.ts","./Item.ts","./Shop.ts","./EventBus.ts"],(function(t){var e,n,r,o,i,a,s,c,u,m,p,l,f,h,d,I;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime,o=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,a=t.resources,s=t.SpriteFrame},function(t){c=t.default},function(t){u=t.shopConfigs},function(t){m=t.gameLocations},function(t){p=t.ItemId},function(t){l=t.GameLocation},function(t){f=t.ItemGrade,h=t.ItemType},function(t){d=t.Shop},function(t){I=t.EventBus}],execute:function(){i._RF.push({},"0dc078r1SlNwqDu+WRKrQaU","DataLoader",void 0);var _=t("ASSETS_LOADED_EVENT","assets-loaded");t("DataLoader",function(){function t(){this.BASE_PATH="common_item_icon",this._locations=new Map,this._shop=null,this._items=null,this._itemMap=null,this.spriteFramesByItemId=new Map,this.spriteFramesByCurrencyId=new Map,this.heroSpriteFramesByItemId=new Map,this.commonSpriteFrames=new Map,this._shop=new d(u.regularShop),this._items=c.items,this._itemMap=new Map(this._items.map((function(t){return[t.id,t]})))}t.getInstance=function(){return t._instance||(t._instance=new t),t._instance};var i=t.prototype;return i.load=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([this.loadItems(),this.loadCommonIcons(),this.loadLocations(),this.loadCurrencyIcons()]);case 3:I.emit(_,null),console.log("All assets loaded successfully"),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.error("Error loading assets:",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),i.loadSpriteFrame=function(t){return new Promise((function(e,n){a.load(t+"/spriteFrame",s,(function(r,o){if(r)return console.error("Failed to load sprite frame at "+t+":",r),void n(r);e(o)}))}))},i.loadLocations=function(){var t=n(r().mark((function t(){var e,n,i,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=o(m);!(n=e()).done;)i=n.value,a=new l(i),this._locations.set(a.id,a);return t.next=3,Promise.all(Array.from(this._locations.values()).map((function(t){return t.loadSprite()})));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.loadItems=function(){var t=n(r().mark((function t(){var e,n,i,a,s=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=r().mark((function t(){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.value,e.push(s.loadSpriteFrame(n.imagePath).then((function(t){s.spriteFramesByItemId.set(n.id,t)}))),-1===["ring","amulet","etc"].indexOf(n.type)&&(o=n.imagePath.replace("item_icon","hero_icon"),e.push(s.loadSpriteFrame(o).then((function(t){s.heroSpriteFramesByItemId.set(n.id,t)}))));case 4:case"end":return t.stop()}}),t)})),i=o(this._items);case 3:if((a=i()).done){t.next=7;break}return t.delegateYield(n(),"t0",5);case 5:t.next=3;break;case 7:return t.next=9,Promise.all(e);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.loadCurrencyIcons=function(){var t=n(r().mark((function t(){var e,n,o=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Map([[p.ETC_COINS,"coin"],[p.ETC_GEMS,"gem"]]),n=Array.from(e.entries()).map((function(t){var e=t[0],n=t[1];return o.loadSpriteFrame("/currency_icon/"+n).then((function(t){o.spriteFramesByCurrencyId.set(e,t)}))})),t.next=4,Promise.all(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.loadCommonIcons=function(){var t=n(r().mark((function t(){var e,n,o,i=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[f.D,f.C,f.B,f.A,f.S],n=[h.WEAPON,h.ARMOR,h.RING,h.AMULET,h.ACCESSORY,h.PET],o=[],e.forEach((function(t){n.forEach((function(e){var n=i.getIconPath(t,e),r=i.loadSpriteFrame(n).then((function(n){i.commonSpriteFrames.set(i.getIconKey(t,e),n)}));o.push(r)}))})),t.next=6,Promise.all(o);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getIconPath=function(t,e){return this.BASE_PATH+"/"+t+"_"+e},i.getIconKey=function(t,e){return t+"_"+e},i.getCommonIcon=function(t,e){var n=this.getIconKey(t,e),r=this.commonSpriteFrames.get(n);return r||(console.warn("Common icon not found for grade "+t+" and type "+e),null)},i.getAllItems=function(){if(!this._items)throw new Error("Items data is not loaded!");return this._items},i.getItemById=function(t){var e=this._itemMap.get(t);if(!e)throw new Error('Item with ID "'+t+'" not found!');return e},i.getAllLocations=function(){return Array.from(this._locations.values())},e(t,[{key:"shop",get:function(){return this._shop}}]),t}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DefeatWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts"],(function(e){var t,n,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},function(e){i=e.BaseDialog}],execute:function(){var c;n._RF.push({},"651f4NRMy9JbqEkFexLzUE4","DefeatWindow",void 0);var r=o.ccclass;e("DefeatWindow",r("DefeatWindow")(c=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.onDialogOpen=function(){},n}(i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/DialogManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,o,a,l,r,s,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){l=t.cclegacy,r=t._decorator,s=t.Node,c=t.Component}],execute:function(){var g,u,h,d,p,f;l._RF.push({},"483fbkB4mFEWL+7zshRs+QJ","DialogManager",void 0);var k=r.ccclass,v=r.property;t("DialogManager",(g=k("DialogManager"),u=v(s),g(((f=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return(i=t.call.apply(t,[this].concat(a))||this).dialogStack=[],n(i,"dialogContainer",p,o(i)),i}e(i,t);var l=i.prototype;return l.onLoad=function(){null===i._instance?i._instance=this:this.node.destroy()},l.pushDialog=function(t,i){if(void 0===i&&(i=!1),this.dialogStack.length>0){var e=this.dialogStack[this.dialogStack.length-1];if(e===t)return;i?e.keepVisible=!0:(e.setActive(!1),e.keepVisible=!1)}this.dialogStack.push(t),t.setActive(!0,!0)},l.popDialog=function(){if(this.dialogStack.length>0){var t=this.dialogStack.pop();if(null==t||t.setActive(!1),t.keepVisible=!1,this.dialogStack.length>0)this.dialogStack[this.dialogStack.length-1].setActive(!0)}this.dialogStack.length},l.closeAllDialogs=function(){for(;this.dialogStack.length>0;){var t=this.dialogStack.pop();null==t||t.setActive(!1)}},l.getDialog=function(t){if(!this.dialogContainer)return console.error("Dialog container not set!"),null;var i=this.dialogContainer.getChildByName(t);if(!i)return console.error("Dialog node "+t+" not found!"),null;var e=i.getComponent(t);return e||(console.error("Dialog component "+t+" not found on node!"),null)},a(i,null,[{key:"instance",get:function(){return i._instance}}]),i}(c))._instance=null,p=i((d=f).prototype,"dialogContainer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentDecorator.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"85491GNYgtOipXgSP+QsIgX","EquipmentDecorator",void 0);e("EquipmentDecorator",function(){function e(e){this.itemInstance=void 0,this.itemInstance=e}var t=e.prototype;return t.equipItem=function(e){var t=this.itemInstance.getItemTemplate(),i=this.itemInstance.getGrade(),a=t.grades[i];if("weapon"===t.type){var r,c=a;e.attackRoll+=c.attackBonus,(r=e.damageDice).push.apply(r,c.damageDice)}else if("armor"===t.type){var n=a;e.armorClass+=n.armorClass}else if("accessory"===t.type){var s=a;e.healthPoints+=s.healthPoints}else if("amulet"===t.type){var o=a;e.initiative+=o.initiative}else if("ring"===t.type){var l=a;e.criticalMultiplier+=l.criticalMultiplier}else if("pet"===t.type){var p;(p=e.damageDice).push.apply(p,a.damageDice)}},t.unequipItem=function(e){var t=this.itemInstance.getItemTemplate(),i=this.itemInstance.getGrade(),a=t.grades[i];if("weapon"===t.type){var r=a;e.attackRoll-=r.attackBonus,this.removeDamageDices(e,a)}else if("armor"===t.type){var c=a;e.armorClass-=c.armorClass}else if("accessory"===t.type){var n=a;e.healthPoints-=n.healthPoints}else if("amulet"===t.type){var s=a;e.initiative-=s.initiative}else if("ring"===t.type){var o=a;e.criticalMultiplier-=o.criticalMultiplier}else"pet"===t.type&&this.removeDamageDices(e,a)},t.removeDamageDices=function(e,t){var i=[].concat(t.damageDice),a=[].concat(e.damageDice);i.forEach((function(e){var t=a.findIndex((function(t){return t.type===e.type&&t.dice===e.dice}));-1!==t&&a.splice(t,1)})),e.damageDice=a},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/EquippedItemsComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemInstance.ts","./ItemIconTemplate.ts","./TooltipTrigger.ts","./StatToStringConverter.ts","./DataLoader.ts","./PlayerStore.ts","./ItemInstanceIconData.ts"],(function(e){var t,n,r,i,o,a,u,c,p,l,s,m,f,I,b,d,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,c=e.Sprite,p=e.SpriteFrame,l=e.instantiate,s=e.Component},function(e){m=e.itemById},function(e){f=e.ItemIconTemplate},function(e){I=e.TooltipTrigger},function(e){b=e.StatsToStringConverter},function(e){d=e.DataLoader},function(e){h=e.default},function(e){g=e.ItemInstanceIconData}],execute:function(){var y,v,w,S,q,z,C,E,T,D,M,F,A,H,L,_,k,j,B,P,R,U,X,x,N;o._RF.push({},"527b7gCZX5CW6Xl9dViQXjk","EquippedItemsComponent",void 0);var G=a.ccclass,O=a.property;e("EquippedItemsComponent",(y=G("EquippedItemsComponent"),v=O(u),w=O(u),S=O(u),q=O(u),z=O(u),C=O(u),E=O(c),T=O(c),D=O(c),M=O(c),F=O(p),y((L=t((H=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"weaponIcon",L,i(t)),r(t,"armorIcon",_,i(t)),r(t,"accessoryIcon",k,i(t)),r(t,"petIcon",j,i(t)),r(t,"amuletIcon",B,i(t)),r(t,"ringIcon",P,i(t)),r(t,"weapon",R,i(t)),r(t,"armor",U,i(t)),r(t,"accessory",X,i(t)),r(t,"pet",x,i(t)),r(t,"defaultArmor",N,i(t)),t.previousEquipped={},t.unsubscribe=null,t.slotIconMap={},t.slotSpriteMap={},t}n(t,e);var o=t.prototype;return o.onLoad=function(){var e=this;this.slotIconMap={weapon:this.weaponIcon,armor:this.armorIcon,accessory:this.accessoryIcon,pet:this.petIcon,amulet:this.amuletIcon,ring:this.ringIcon},this.slotSpriteMap={weapon:this.weapon,armor:this.armor,accessory:this.accessory,pet:this.pet},this.unsubscribe=h.subscribe((function(e){return e.equipped}),(function(t){e.node.active&&e.syncEquipped(t)}))},o.onDestroy=function(){this.unsubscribe&&this.unsubscribe()},o.syncEquipped=function(e){var t=this;e&&Object.keys(e).forEach((function(n){var r=e[n],i=t.previousEquipped[n];if(r!==i){if(i&&t.renderUnequip(n),r){var o=h.getState().items.find((function(e){return e._id===r}));o&&t.renderEquip(n,o)}t.previousEquipped[n]=r}}))},o.renderEquip=function(e,t){var n=this.slotIconMap[e];n&&this.updateItemIcon(n,t);var r=this.slotSpriteMap[e];r&&this.updateHeroSprite(r,t.itemId)},o.renderUnequip=function(e){var t=this.slotIconMap[e];t&&this.clearItemIcon(t);var n=this.slotSpriteMap[e];n&&this.clearHeroSprite(n)},o.updateHeroSprite=function(e,t){e.spriteFrame=d.getInstance().heroSpriteFramesByItemId.get(t)||(e===this.armor?this.defaultArmor:null)},o.clearHeroSprite=function(e){e===this.armor?e.spriteFrame=this.defaultArmor:e.spriteFrame=null},o.updateItemIcon=function(e,t){var n=new g(t.grade,t.itemId),r=m(t.itemId),i=e.getComponent(f);i&&(i.setup(n),e.active=!0);var o=l(e),a=e.getComponent(I)||e.addComponent(I);a.setTooltipData({content:(new b).getGradeRichText(r,t.grade),iconNode:o,header:r.name,button:{label:"Unequip",callback:function(){h.getState().unequip(t),a.hideTooltip()}}})},o.clearItemIcon=function(e){e.active=!1},t}(s)).prototype,"weaponIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(H.prototype,"armorIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(H.prototype,"accessoryIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(H.prototype,"petIcon",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(H.prototype,"amuletIcon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(H.prototype,"ringIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(H.prototype,"weapon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(H.prototype,"armor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(H.prototype,"accessory",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(H.prototype,"pet",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(H.prototype,"defaultArmor",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=H))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/EquippedItemStorage.ts",["cc","./PlayerStore.ts","./LocalStorageManager.ts"],(function(t){var e,s,i;return{setters:[function(t){e=t.cclegacy},function(t){s=t.default},function(t){i=t.LocalStorageManager}],execute:function(){e._RF.push({},"af00aswoGBH/KOUJTWI/yLS","EquippedItemStorage",void 0);var n=t("EQUIPPED_KEY","equipped");t("EquippedItemsStorage",function(){function t(){var t=this;this.storage=void 0,this.unsubscribeItems=void 0,this.storage=i.getInstance(),this.unsubscribeItems=s.subscribe((function(t){return t.equipped}),(function(e){t.updateItems(e)}))}var e=t.prototype;return e.dispose=function(){this.unsubscribeItems&&(this.unsubscribeItems(),this.unsubscribeItems=function(){})},e.updateItems=function(t){var e=this.storage.get(n);JSON.stringify(t)!==JSON.stringify(e)&&this.storage.save(n,t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ErrorHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,o,n,t,a;return{setters:[function(r){e=r.inheritsLoose},function(r){o=r.cclegacy,n=r._decorator,t=r.sys,a=r.Component}],execute:function(){var s;o._RF.push({},"a01bdabcgJPFYdXmK42gnRn","ErrorHandler",void 0);var i=n.ccclass;r("ErrorHandler",i("ErrorHandler")(s=function(r){function o(){return r.apply(this,arguments)||this}e(o,r);var n=o.prototype;return n.onLoad=function(){this.registerGlobalErrorHandler()},n.registerGlobalErrorHandler=function(){var r=this;window.addEventListener("error",(function(e){r.handleError(e.error||new Error(e.message),"Uncaught Error"),e.preventDefault()})),window.addEventListener("unhandledrejection",(function(e){r.handleError(e.reason,"Unhandled Rejection"),e.preventDefault()}))},n.handleError=function(r,e){if(void 0===e&&(e="Global"),console.error("ErrorHandler: ["+e+"]",r),t.isBrowser){var o=JSON.parse(localStorage.getItem("errorLog")||"[]");o.push({timestamp:(new Date).toISOString(),message:r.message,stack:r.stack,source:e}),localStorage.setItem("errorLog",JSON.stringify(o))}this.sendErrorToServer(r,e),this.showErrorUI(r,e)},n.sendErrorToServer=function(r,e){},n.showErrorUI=function(r,e){},o}(a))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/EventBus.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"0d54a1ofkVOLYQuchutZ9Fh","EventBus",void 0),t("EventBus",function(){function t(){}return t.on=function(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)},t.off=function(t,n){this.events[t]&&(this.events[t]=this.events[t].filter((function(t){return t!==n})))},t.emit=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),s=1;s<n;s++)e[s-1]=arguments[s];this.events[t]&&this.events[t].forEach((function(t){return t.apply(void 0,e)}))},t}()).events={},n._RF.pop()}}}));

System.register("chunks:///_virtual/Events.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"039c54kvIBGrLf8zz7/wTdu","Events",void 0);var E=e("Events",(function(){}));E.PLAYER_LOADED="player-loaded",E.PLAYER_NAME_CHANGED="name-changed",E.HERO_LEVEL_UP="hero-level-up",E.ITEM_EQUIPPED="item-equipped",E.ITEM_UNEQUIPPED="item-unequipped",t._RF.pop()}}}));

System.register("chunks:///_virtual/ExperienceProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./PlayerStore.ts"],(function(e){var r,n,t,i,s,a,o,l,c,u,p,b,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,o=e.ProgressBar,l=e.Label,c=e.Component},function(e){u=e.getExperienceProgress,p=e.calculateLevelFromExperience,b=e.calculateExperienceForLevel},function(e){f=e.default}],execute:function(){var g,h,v,x,L,y,P,B,E;s._RF.push({},"93b73oUuzRJhLC/GUAAXLSx","ExperienceProgressBar",void 0);var d=a.ccclass,m=a.property;e("ExperienceProgressBar",(g=d("ExperienceProgressBar"),h=m(o),v=m(l),x=m(l),g((P=r((y=function(e){function r(){for(var r,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s))||this,t(r,"progressBar",P,i(r)),t(r,"levelLabel",B,i(r)),t(r,"experienceLabel",E,i(r)),r.unsubscribeExp=function(){},r}n(r,e);var s=r.prototype;return s.start=function(){var e=this;this.unsubscribeExp=f.subscribe((function(e){return e.experience}),(function(r){e.node.active&&e.updateProgressBar(r)}))},s.onDestroy=function(){this.unsubscribeExp()},s.updateProgressBar=function(e){this.progressBar&&(this.progressBar.progress=u(e)/100);var r=p(e);if(this.levelLabel&&(this.levelLabel.string=""+r),this.experienceLabel){var n=b(r);this.experienceLabel.string=e+"/"+n+" XP"}},r}(c)).prototype,"progressBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=r(y.prototype,"levelLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=r(y.prototype,"experienceLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=y))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/FlexibleLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,l,s,a,u,r,h,c,p,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,a=t.Node,u=t.Size,r=t.view,h=t.Widget,c=t.ResolutionPolicy,p=t.macro,d=t.UITransform,g=t.Component}],execute:function(){var f,v,T,m,R,y,b;l._RF.push({},"ab369XgVlBNQqUEzY+3cj4K","FlexibleLayout",void 0);var w=s.ccclass,k=s.property;t("FlexibleLayout",(f=w("FlexibleLayout"),v=k(a),T=k(a),f((y=e((R=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return e=t.call.apply(t,[this].concat(l))||this,o(e,"bg",y,n(e)),o(e,"statBlock",b,n(e)),e._oldDeviceResolution=null,e.defaultStatTop=null,e.defaultBgTop=null,e.lastCheckTime=0,e}i(e,t);var l=e.prototype;return l.onLoad=function(){this._oldDeviceResolution=new u(0,0),this.makeResponsive()},l.start=function(){var t=this;r.on("canvas-resize",(function(){t.makeResponsive()}))},l.update=function(t){this.lastCheckTime+=t,this.lastCheckTime<.2||(this.lastCheckTime=0,this.makeResponsive())},l.makeResponsive=function(){var t=r.getViewportRect();if(t.width!==this._oldDeviceResolution.width||t.height!==this._oldDeviceResolution.height){this._oldDeviceResolution=new u(t.width,t.height);var e=t.width/t.height,i=r.getDesignResolutionSize(),o=i.width/i.height,n=this.statBlock.getComponent(h),l=this.bg.getComponent(h);null==this.defaultStatTop?(this.defaultStatTop=n.top,this.defaultBgTop=l.top):(n.top=this.defaultStatTop,l.top=this.defaultBgTop),e>o?r.setResolutionPolicy(c.FIXED_HEIGHT):(r.setResolutionPolicy(c.FIXED_WIDTH),this.fixBlockSize(t,i,o,n,l)),r.setOrientation(p.ORIENTATION_PORTRAIT)}},l.fixBlockSize=function(t,e,i,o,n){var l=t.width/e.width,s=t.width/i,a=(t.height-s)/l*.5,u=this.defaultStatTop+a,r=this.defaultBgTop+a,h=this.bg.getComponent(d);u*l>h.height*l&&(u=h.height),n.top=r,n.updateAlignment(),o.top=u,o.updateAlignment()},e}(g)).prototype,"bg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(R.prototype,"statBlock",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=R))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/GameApp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./Events.ts","./DataLoader.ts","./ActionFactory.ts","./TokenManager.ts","./PlayerService.ts","./EquippedItemStorage.ts","./TelegramAuthService.ts","./index.mjs_cjs=&original=.js","./index.js"],(function(n){var e,t,r,a,o,s,c,i,u,p,l,f,d,h,g,v,m;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass,r=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){o=n.cclegacy,s=n._decorator,c=n.Component},function(n){i=n.EventBus},function(n){u=n.Events},function(n){p=n.ASSETS_LOADED_EVENT,l=n.DataLoader},function(n){f=n.ActionFactory},function(n){d=n.TokenManager},function(n){h=n.PlayerService},function(n){g=n.EquippedItemsStorage},function(n){v=n.TelegramAuthService},null,function(n){m=n.default}],execute:function(){var y,A;o._RF.push({},"1ba51GPMr1MRpM0zMtZa/rR","GameApp",void 0);var L=s.ccclass;n("GameApp",L("GameApp")(((A=function(n){function o(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))||this)._gameComponents=[],e}e(o,n);var s=o.prototype;return s.onLoad=function(){null===o._instance&&(o._instance=this),i.on(p,this.onAssetsLoaded.bind(this)),this._gameComponents.push(new g),l.getInstance().load()},s.onPlayerLoaded=function(){i.emit(u.PLAYER_LOADED)},s.onAssetsLoaded=function(){this.reload()},s.reload=function(){var n=r(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!m.initData){n.next=7;break}return n.next=3,(new v).login();case 3:e=n.sent,this.handleLoginSuccess(e),n.next=8;break;case 7:this.login({password:"12456",name:"AngryVampire"});case 8:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),s.login=function(){var n=r(a().mark((function n(e){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=f.getInstance().getAuthAction(),n.next=4,t.execute(e);case 4:return r=n.sent,this.handleLoginSuccess(r),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(0),console.error("Login failed:",n.t0),n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n,this,[[0,9]])})));return function(e){return n.apply(this,arguments)}}(),s.handleLoginSuccess=function(){var n=r(a().mark((function n(e){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d.getInstance().setToken(e.token),t=new h,n.next=4,t.loadPlayer();case 4:this.onPlayerLoaded();case 5:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),t(o,null,[{key:"instance",get:function(){return o._instance}}]),o}(c))._instance=null,y=A))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameLocation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,o=t.resources,n=t.SpriteFrame}],execute:function(){i._RF.push({},"62e09hVC1NCbaZhwhM61vo4","GameLocation",void 0);t("GameLocation",function(){function t(t){this._id=void 0,this.groupId=void 0,this._name=void 0,this._loot=void 0,this._imagePath=void 0,this._stats=void 0,this._spriteFrame=null,this.energy=void 0,this._id=t.id,this._name=t.name,this.groupId=t.groupId,this._loot=t.loot,this._imagePath=t.imagePath,this._stats=t.stats,this.energy=t.energy}return t.prototype.loadSprite=function(){var t=this;o.load(this._imagePath+"/spriteFrame",n,(function(e,i){e?console.error("Failed to load sprite for location "+t._name+":",e):t._spriteFrame=i}))},e(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"loot",get:function(){return this._loot}},{key:"imagePath",get:function(){return this._imagePath}},{key:"stats",get:function(){return this._stats}},{key:"spriteFrame",get:function(){return this._spriteFrame}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/GameStatId.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f2f2dSHg3JGsp4kv22BgyJK","GameStatId",void 0);e("GameStatId",{BATTLES_WON:"battles_won",ITEMS_CRAFTED:"items_crafted",STORE_PURCHASES:"store_purchases",ITEMS_SUMMONED:"items_summoned",DAILY_LOGINS:"daily_logins",EXPERIENCE_EARNED:"experience_earned",QUESTS_FINISHED:"quests_finished"});t._RF.pop()}}}));

System.register("chunks:///_virtual/GridLayout.ts",["cc"],(function(t){var i,e,n;return{setters:[function(t){i=t.cclegacy,e=t.view,n=t.UITransform}],execute:function(){i._RF.push({},"19c77cHVx1LrYX9oIYxEBlK","GridLayout",void 0);t("GridLayout",function(){function t(t,i,e,n,o){if(void 0===n&&(n=[]),void 0===o&&(o=0),this.itemWidth=168,this.itemSpacing=50,this.padding=0,this.content=null,this.nodesToResize=[],this.itemWidth=t,this.itemSpacing=i,this.content=e,null===e)throw new Error;this.nodesToResize=n,this.padding=o}return t.prototype.setupGrid=function(){var t=e.getVisibleSize().width-2*this.padding,i=Math.floor((t+this.itemSpacing)/(this.itemWidth+this.itemSpacing)),o=i*this.itemWidth+(i-1)*this.itemSpacing,s=this.content.getComponent(n);s&&(s.width=o),this.nodesToResize.forEach((function(t){var i=t.getComponent(n);s&&(i.width=o)}))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/HttpClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./APIConfig.ts"],(function(t){var e,r,n,s,o,u;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime,n=t.createForOfIteratorHelperLoose,s=t.extends},function(t){o=t.cclegacy},function(t){u=t.APIConfig}],execute:function(){o._RF.push({},"cc4afQGuEJAj6+eTuOlhA4E","HttpClient",void 0);t("HttpClient",function(){function t(){this.requestInterceptors=void 0,this.responseInterceptors=void 0,this.apiConfig=void 0,this.requestInterceptors=[],this.responseInterceptors=[],this.apiConfig=u.getInstance()}var o=t.prototype;return o.addRequestInterceptor=function(t){this.requestInterceptors.push(t)},o.addResponseInterceptor=function(t){this.responseInterceptors.push(t)},o.request=function(){var t=e(r().mark((function t(e){var o,u,i,c,a,p,h,f,d,l,v,m,g,I,w,y;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,(o=s({},e)).timeout=o.timeout||this.apiConfig.getTimeout(),u=n(this.requestInterceptors);!(i=u()).done;)c=i.value,o=c.intercept(o);return a={method:o.method,headers:o.headers,body:"GET"!==o.method?JSON.stringify(o.body):void 0},p=new URL(o.url.startsWith("http")?o.url:""+this.apiConfig.getBaseURL()+o.url),h=new Promise((function(t,e){setTimeout((function(){return e(new Error("Request timeout"))}),o.timeout)})),t.next=9,Promise.race([fetch(p.toString(),a),h]);case 9:return f=t.sent,t.next=12,f.json();case 12:for(d=t.sent,l=n(this.responseInterceptors);!(v=l()).done;)m=v.value,d=m.intercept(d);if(f.ok){t.next=16;break}throw new Error("HTTP Error: "+f.status+" "+f.statusText);case 16:return t.abrupt("return",d);case 19:for(t.prev=19,t.t0=t.catch(0),g=t.t0,I=n(this.responseInterceptors);!(w=I()).done;){y=w.value;try{g=y.handleError(g)}catch(t){g=t}}throw g;case 24:case"end":return t.stop()}}),t,this,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),o.get=function(){var t=e(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request({url:e,method:"GET",headers:n}));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),o.post=function(){var t=e(r().mark((function t(e,n,s){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request({url:e,method:"POST",body:n,headers:s}));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/IAPItemTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemId.ts","./telegram-sdk-wrapper.ts"],(function(e){var t,n,i,r,o,a,c,l,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,l=e.Label,s=e.Component},function(e){u=e.ItemId},function(e){p=e.openInvoice}],execute:function(){var m,f,I,g,y,h,b,v,d;o._RF.push({},"8eff1nkyvZO8pUyu8xBre8u","IAPItemTemplate",void 0);var L=a.ccclass,w=a.property;e("IAPItemTemplate",(m=L("IAPItemTemplate"),f=w({type:[c]}),I=w(l),g=w(l),m((b=t((h=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"gameIcons",b,r(t)),i(t,"countLabel",v,r(t)),i(t,"priceLabel",d,r(t)),t.gameIconByName=new Map,t}n(t,e);var o=t.prototype;return o.init=function(){var e=this;this.gameIcons.forEach((function(t){e.gameIconByName.set(t.name,t)}))},o.setup=function(e){var t,n=this;this.init();var i=e.size;i||(i="Small"),this.countLabel.string=e.resources[u.ETC_GEMS].toString(),this.priceLabel.string=e.price;var r=this.gameIconByName.get(i+"Gem");if(!r)throw new Error(i);r.active=!0,null==(t=this.node)||t.on(c.EventType.TOUCH_END,(function(){return n.onClickItem(e.invoiceUrl)}),this)},o.onClickItem=function(e){p(e,(function(e){"paid"===e?console.log("Successsfull payment!"):console.log("Unsuccesssfull payment!")}))},t}(s)).prototype,"gameIcons",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(h.prototype,"countLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(h.prototype,"priceLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/IAPPackageConfig.ts",["cc","./ItemId.ts"],(function(e){var c,t;return{setters:[function(e){c=e.cclegacy},function(e){t=e.ItemId}],execute:function(){var i;c._RF.push({},"d5035+oxEBIXJ1OvAEI3O65","IAPPackageConfig",void 0);e("iapPackeges",[{id:"1",name:"Newbie",invoiceUrl:"",resources:(i={},i[t.ETC_ENERGY]=100,i[t.ETC_CRYSTALS]=200,i[t.ETC_GEMS]=500,i),items:[]}]);c._RF.pop()}}}));

System.register("chunks:///_virtual/IAPShopConfig.ts",["cc","./ItemId.ts"],(function(e){var i,r;return{setters:[function(e){i=e.cclegacy},function(e){r=e.ItemId}],execute:function(){var c,s,o,t,n,p;i._RF.push({},"45c32SSHR1B4ZsHyaMhY+gz","IAPShopConfig",void 0);e("iapShopConfig",[{id:"1",invoiceUrl:"https://t.me/$KzphlSXQCUkLAAAARpwKN3SGqWE",price:"0.99$",resources:(c={},c[r.ETC_GEMS]=100,c)},{id:"2",invoiceUrl:"https://t.me/$KzphlSXQCUkLAAAARpwKN3SGqWE",price:"4.99$",resources:(s={},s[r.ETC_GEMS]=550,s)},{id:"3",invoiceUrl:"",price:"9.99$",resources:(o={},o[r.ETC_GEMS]=1200,o),size:"Mid"},{id:"4",invoiceUrl:"",price:"19.99$",resources:(t={},t[r.ETC_GEMS]=2600,t),size:"Mid"},{id:"5",invoiceUrl:"",price:"49.99$",resources:(n={},n[r.ETC_GEMS]=7e3,n),size:"Big"},{id:"6",invoiceUrl:"",price:"99.99$",resources:(p={},p[r.ETC_GEMS]=15e3,p),size:"Big"}]);i._RF.pop()}}}));

System.register("chunks:///_virtual/IAPWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./IAPShopConfig.ts","./IAPItemTemplate.ts","./GridLayout.ts"],(function(i){var t,e,n,r,a,o,l,u,p,s,c,f,d,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){a=i.cclegacy,o=i._decorator,l=i.Prefab,u=i.Node,p=i.view,s=i.instantiate},function(i){c=i.BaseDialog},function(i){f=i.iapShopConfig},function(i){d=i.IAPItemTemplate},function(i){h=i.GridLayout}],execute:function(){var v,y,G,I,P,g,m;a._RF.push({},"7e390taDwxHr4C+R1wqvT4G","IAPWindow",void 0);var b=o.ccclass,w=o.property;i("IAPWindow",(v=b("IAPWindow"),y=w(l),G=w(u),v((g=t((P=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=i.call.apply(i,[this].concat(a))||this,n(t,"iapItemPrefab",g,r(t)),n(t,"iapGrid",m,r(t)),t}e(t,i);var a=t.prototype;return a.start=function(){var t=this;i.prototype.start.call(this),p.on("canvas-resize",(function(){t.setupGrid()}))},a.onDialogOpen=function(){var i=this;this.setupGrid(),this.iapGrid.removeAllChildren(),f.forEach((function(t){var e,n=s(i.iapItemPrefab),r=null==n?void 0:n.getComponent(d);null==r||r.setup(t),null==(e=i.iapGrid)||e.addChild(n)}))},a.setupGrid=function(){this.iapGrid&&new h(330,32,this.iapGrid).setupGrid()},t}(c)).prototype,"iapItemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(P.prototype,"iapGrid",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=P))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/InputBlockingUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogManager.ts"],(function(n){var e,t,r,u;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy},function(n){u=n.DialogManager}],execute:function(){r._RF.push({},"51383pMMYxLEr3o9CTqtfs3","InputBlockingUtils",void 0);n("InputBlocking",function(){function n(){}return n.execute=function(){var n=e(t().mark((function n(e){var r;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=u.instance.getDialog("BlockWindow"))&&u.instance.pushDialog(r,!0),n.prev=2,n.next=5,e();case 5:return n.abrupt("return",n.sent);case 6:return n.prev=6,null==r||r.close(),n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[2,,6,9]])})));return function(e){return n.apply(this,arguments)}}(),n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Inventory.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"47566OdDDZF+qD+t+VC0dDj","Inventory",void 0);t("Inventory",function(){function t(t){void 0===t&&(t=[]),this.items=void 0,this.items=t}var e=t.prototype;return e.getItemCount=function(t,e){return this.items.filter((function(n){return n.item.id===t&&n.grade===e})).reduce((function(t,e){return t+1}),0)},e.getItemCountByTypeAndGrade=function(t,e){return this.items.filter((function(n){return n.item.type===t&&n.grade===e})).reduce((function(t,e){return t+1}),0)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/InventoryWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./ItemInstance.ts","./ItemFilter.ts","./GridLayout.ts","./TooltipTrigger.ts","./StatToStringConverter.ts","./PlayerStore.ts","./ItemInstanceIconData.ts"],(function(t){var e,n,i,r,o,a,l,s,c,u,p,f,m,d,h,I,b,g,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Prefab,s=t.Node,c=t.view,u=t.instantiate},function(t){p=t.BaseDialog},function(t){f=t.ItemIconTemplate},function(t){m=t.ItemInstance},function(t){d=t.ItemFilter},function(t){h=t.GridLayout},function(t){I=t.TooltipTrigger},function(t){b=t.StatsToStringConverter},function(t){g=t.default},function(t){y=t.ItemInstanceIconData}],execute:function(){var v,S,T,w,D,L,P,z,F,G,C,_,E,A;o._RF.push({},"b4183ziQ7NAlKNW3QLs2Xxg","InventoryWindow",void 0);var W=a.ccclass,q=a.property;t("InventoryWindow",(v=W("InventoryWindow"),S=q(l),T=q(l),w=q(s),D=q(s),L=q(s),v(((A=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"emptySlotPrefab",F,r(e)),i(e,"itemIconPrefab",G,r(e)),i(e,"content",C,r(e)),i(e,"separator",_,r(e)),i(e,"itemFilter",E,r(e)),e}n(e,t);var o=e.prototype;return o.start=function(){var e=this;t.prototype.start.call(this),c.on("canvas-resize",(function(){e.setupGrid()})),this.itemFilter.on("ITEMS_FILTERED",(function(t){e.displayItems(t)}))},o.setupGrid=function(){new h(168,50,this.content,[this.separator]).setupGrid()},o.onDialogOpen=function(){this.setupGrid(),this.refreshList()},o.refreshList=function(){var t=g.getState().getUnequippedItems().map((function(t){return m.fromData(t)})),e=this.itemFilter.getComponent(d);e&&e.setItems(t)},o.displayItems=function(t){var n=this;if(this.content&&this.emptySlotPrefab){this.content.removeAllChildren();var i=g.getState();t.forEach((function(t){if(t.isEquipable()){var e=u(n.itemIconPrefab),r=e.getComponent(f);r&&r.setup(new y(t.getGrade(),t.item.id));var o=u(e),a=e.addComponent(I),l=new b;a.setTooltipData({content:l.getGradeRichText(t.item,t.getGrade()),iconNode:o,header:t.item.name,button:{callback:function(){i.equip(t.getData()),n.refreshList(),a.hideTooltip()},label:"Equip"}}),n.content.addChild(e)}}));for(var r=0;r<e.MAX_SLOTS-t.length;r++){var o=u(this.emptySlotPrefab);this.content.addChild(o)}}},e}(p)).MAX_SLOTS=50,F=e((z=A).prototype,"emptySlotPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(z.prototype,"itemIconPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(z.prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(z.prototype,"separator",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(z.prototype,"itemFilter",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=z))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"f45e5dDF9dL+bFh1M3oRjMv","Item",void 0);e("ItemGrade",function(e){return e.NG="NG",e.D="D",e.C="C",e.B="B",e.A="A",e.S="S",e.SS="SS",e.X="X",e}({})),e("ItemType",function(e){return e.WEAPON="weapon",e.ARMOR="armor",e.RING="ring",e.AMULET="amulet",e.ACCESSORY="accessory",e.PET="pet",e.ETC="etc",e}({})),e("DamageType",{Bludgeoning:"bludgeoning",Piercing:"piercing",Slashing:"slashing",Fire:"fire",Cold:"cold",Lightning:"lightning",Poison:"poison",Acid:"acid",Necrotic:"necrotic",Radiant:"radiant"});n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemFilter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,s,o,l,u,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,l=e.Node,u=e.SpriteFrame,a=e.Sprite,c=e.Component}],execute:function(){var p,d,h,f,S,y,F,g,m,A,C,E,b,B,L;s._RF.push({},"0fddb157oNAoJYWPknB8zke","ItemFilter",void 0);var T=o.ccclass,R=o.property,v=function(e){return e[e.ALL=0]="ALL",e[e.WEAPON=1]="WEAPON",e[e.ARMOR=2]="ARMOR",e[e.ACCESSORY=3]="ACCESSORY",e[e.HAIR_ACCESSORY=4]="HAIR_ACCESSORY",e[e.PET=5]="PET",e}(v||{}),I=function(e){return e[e.ALL=0]="ALL",e[e.D=1]="D",e[e.C=2]="C",e[e.B=3]="B",e[e.A=4]="A",e[e.S=5]="S",e[e.SS=6]="SS",e}(I||{});e("ItemFilter",(p=T("ItemFilter"),d=R([l]),h=R([l]),f=R([u]),S=R([u]),y=R([u]),F=R([u]),p((A=t((m=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,i(t,"typeFilterButtons",A,n(t)),i(t,"gradeFilterButtons",C,n(t)),i(t,"typeSelectedSprites",E,n(t)),i(t,"typeUnselectedSprites",b,n(t)),i(t,"gradeSelectedSprites",B,n(t)),i(t,"gradeUnselectedSprites",L,n(t)),t.currentTypeFilter=v.ALL,t.currentGradeFilter=I.ALL,t.items=[],t}r(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;this.typeSelectedSprites.length===this.typeFilterButtons.length&&this.typeUnselectedSprites.length===this.typeFilterButtons.length?this.gradeSelectedSprites.length===this.gradeFilterButtons.length&&this.gradeUnselectedSprites.length===this.gradeFilterButtons.length?(this.typeFilterButtons.forEach((function(t,r){t.on(l.EventType.TOUCH_END,(function(){e.onTypeFilterClick(r)}))})),this.gradeFilterButtons.forEach((function(t,r){t.on(l.EventType.TOUCH_END,(function(){e.onGradeFilterClick(r)}))})),this.updateButtonStates()):console.error("Grade filter sprites count mismatch with buttons count"):console.error("Type filter sprites count mismatch with buttons count")},s.onTypeFilterClick=function(e){this.currentTypeFilter=e,this.updateButtonStates(),this.filterItems()},s.onGradeFilterClick=function(e){this.currentGradeFilter=e,this.updateButtonStates(),this.filterItems()},s.updateButtonStates=function(){var e=this;this.typeFilterButtons.forEach((function(t,r){var i=t.getComponent(a);i&&(i.spriteFrame=r===e.currentTypeFilter?e.typeSelectedSprites[r]:e.typeUnselectedSprites[r])})),this.gradeFilterButtons.forEach((function(t,r){var i=t.getComponent(a);i&&(i.spriteFrame=r===e.currentGradeFilter?e.gradeSelectedSprites[r]:e.gradeUnselectedSprites[r])}))},s.filterItems=function(){var e=this,t=this.items;this.currentTypeFilter!==v.ALL&&(t=t.filter((function(t){switch(e.currentTypeFilter){case v.WEAPON:return"weapon"===t.type;case v.ARMOR:return"armor"===t.type;case v.ACCESSORY:return"ring"===t.type||"amulet"===t.type;case v.HAIR_ACCESSORY:return"accessory"===t.type;case v.PET:return"pet"===t.type;default:return!0}}))),this.currentGradeFilter!==I.ALL&&(t=t.filter((function(t){var r=I[e.currentGradeFilter];return t.grade===r}))),this.node.emit("ITEMS_FILTERED",t)},s.setItems=function(e){this.items=e,this.filterItems()},s.getFilterState=function(){return{type:v[this.currentTypeFilter],grade:I[this.currentGradeFilter]}},t}(c)).prototype,"typeFilterButtons",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(m.prototype,"gradeFilterButtons",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(m.prototype,"typeSelectedSprites",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=t(m.prototype,"typeUnselectedSprites",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(m.prototype,"gradeSelectedSprites",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(m.prototype,"gradeUnselectedSprites",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=m))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/ItemIconData.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"bad3164ODxKrIejXLbVCErU","ItemIconData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ItemIconTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,a,n,c,o,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,o=e.Node,l=e.Sprite,s=e.Component}],execute:function(){var p,u,f,m,h,z,v,d,y;n._RF.push({},"bf392R2jFRK+rWLBHrloGNf","ItemIconTemplate",void 0);var F=c.ccclass,b=c.property;e("ItemIconTemplate",(p=F("ItemIconTemplate"),u=b({type:[o]}),f=b({type:[o]}),m=b(l),p((v=t((z=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,i(t,"frames",v,a(t)),i(t,"pazzle",d,a(t)),i(t,"itemSprite",y,a(t)),t.framesMap=new Map,t.pazzleMap=new Map,t.currentFrame=null,t.currentPazzle=null,t}r(t,e);var n=t.prototype;return n.setup=function(e){this.init(),this.activateFrameNode(e.getGrade()),this.itemSprite.spriteFrame=e.getSpriteFrame()},n.init=function(){var e=this;this.deactivateAll(),this.frames.forEach((function(t){e.framesMap.set(t.name,t)})),this.pazzle.forEach((function(t){e.pazzleMap.set(t.name,t)}))},n.deactivateNodes=function(e){e.forEach((function(e){return e.active=!1}))},n.deactivateAll=function(){this.deactivateNodes(this.frames),this.deactivateNodes(this.pazzle)},n.activateFrameNode=function(e,t){void 0===t&&(t=!1),e&&(this.currentFrame=this.framesMap.get(e+"Frame"),this.currentFrame&&(this.currentFrame.active=!0),t&&(this.currentPazzle=this.pazzleMap.get(e+"Pazzle"),this.currentPazzle&&(this.currentPazzle.active=!0)))},t}(s)).prototype,"frames",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=t(z.prototype,"pazzle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=t(z.prototype,"itemSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=z))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemId.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"7cddcEEQrlMfZyuLszhpcJg","ItemId",void 0);_("ItemId",{ARMOR_IRON_PLATE_ARMOR:"arm_iron_plate",ACCESSORY_CAT_EARS:"acc_cat_ears",AMULET_AMULET_OF_SPEED:"aml_speed",RING_RING_OF_PRECISION:"rng_precision",WEAPON_FLAMEFORGED_SWORD:"wpn_flame_sword",WEAPON_SHADOWFANG_DAGGER:"wpn_shadow_dagger",WEAPON_INFERNO_WAND:"wpn_inferno_wand",PET_CAT:"pet_cat",PET_GHOST:"pet_ghost",ARMOR_ROGUE_TUNIC:"arm_rogue_tunic",ARMOR_MAGIC_TUNIC:"arm_magic_tunic",ACCESSORY_DEVIL_HORN:"acc_devil_horn",ETC_COINS:"coin",ETC_GEMS:"gem",ETC_ENERGY:"energy",ETC_CRYSTALS:"crystal"});E._RF.pop()}}}));

System.register("chunks:///_virtual/ItemInstance.ts",["cc","./DataLoader.ts","./stringify.js","./v4.js"],(function(t){var e,i,n;return{setters:[function(t){e=t.cclegacy},function(t){i=t.DataLoader},null,function(t){n=t.default}],execute:function(){t("itemById",a),e._RF.push({},"7281feoq79PZY5MfCNm4Eru","ItemInstance",void 0);t("ItemInstance",function(){function t(t,e){void 0===e&&(e="D"),this.item=void 0,this.grade=void 0,this.type=void 0,this.data=void 0,this.item=t,this.type=t.type,this.grade=e,this.data={_id:n(),itemId:t.id,grade:this.grade}}var e=t.prototype;return e.getItemTemplate=function(){return this.item},e.setGrade=function(t){this.grade=t},e.getGrade=function(){return this.grade},e.isEquipable=function(){return"etc"!==this.type},e.getData=function(){return this.data},e.setData=function(t){this.data=t},t.fromData=function(e){var i=new t(a(e.itemId),e.grade);return i.setData(e),i},t}());function a(t){return i.getInstance().getItemById(t)}e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemInstanceIconData.ts",["cc","./DataLoader.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.DataLoader}],execute:function(){e._RF.push({},"e98c1kopWVLHKazYf2MwttG","ItemInstanceIconData",void 0);t("ItemInstanceIconData",function(){function t(t,e){this._grade=void 0,this._spriteFrame=void 0,this._grade=t,this._spriteFrame=n.getInstance().spriteFramesByItemId.get(e)}var e=t.prototype;return e.getGrade=function(){return this._grade},e.getSpriteFrame=function(){return this._spriteFrame},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemRandomizer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"226d6Zq0ahELbDOQ8zWhWs5","ItemRandomizer",void 0);e("ItemRandomizer",function(){function e(){this.items=[],this.dropChances=new Map}var n=e.prototype;return n.init=function(e){try{this.items=e,this.resetChances()}catch(e){console.error("Failed to parse items data:",e)}},n.resetChances=function(){var e=this,t=1/this.items.length;this.dropChances.clear(),this.items.forEach((function(n){e.dropChances.set(n.id,t)}))},n.setDropChance=function(e,t){return t<0||t>1?(console.warn("Invalid chance value: "+t+". Should be between 0 and 1."),!1):this.items.some((function(t){return t.id===e}))?(this.dropChances.set(e,t),!0):(console.warn("Item ID "+e+" not found."),!1)},n.normalizeChances=function(){var e=this,t=0;this.dropChances.forEach((function(e){t+=e})),0!==t?this.dropChances.forEach((function(n,r){e.dropChances.set(r,n/t)})):this.resetChances()},n.getRandomItemId=function(){if(0===this.items.length)return null;this.normalizeChances();for(var e,n=Math.random(),r=0,o=t(this.dropChances);!(e=o()).done;){var s=e.value,i=s[0];if(n<=(r+=s[1]))return i}return this.items[Math.floor(Math.random()*this.items.length)].id},n.getDropChance=function(e){var t=this.dropChances.get(e);return void 0!==t?t:null},n.getAllDropChances=function(){return new Map(this.dropChances)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemUtil.ts",["cc","./Item.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.ItemGrade}],execute:function(){t("getLowerGrade",(function(t){var e=r.indexOf(t);return e<=0?null:r[e-1]})),e._RF.push({},"739ce+foQdPn7ER+ZtqCU7J","ItemUtil",void 0);var r=[n.D,n.C,n.B,n.A,n.S,n.SS,n.X];e._RF.pop()}}}));

System.register("chunks:///_virtual/LeftBarButtons.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogManager.ts"],(function(t){var e,n,r,o,i,a,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,s=t.Node,u=t.Component},function(t){c=t.DialogManager}],execute:function(){var l,p,f,g,h;i._RF.push({},"cd5aaKCOhZLA41FRtvXI5f1","LeftBarButtons",void 0);var B=a.ccclass,v=a.property;t("LeftBarButtons",(l=B("LeftBarButtons"),p=v(s),l((h=e((g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"questBtn",h,o(e)),e}n(e,t);var i=e.prototype;return i.start=function(){var t;null==(t=this.questBtn)||t.on(s.EventType.TOUCH_END,this.openQuestWindow,this)},i.openQuestWindow=function(){var t=c.instance.getDialog("QuestWindow");t&&c.instance.pushDialog(t)},e}(u)).prototype,"questBtn",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./EventBus.ts","./Events.ts","./DialogManager.ts"],(function(t){var i,o,r,e,n,s,a,p,g,d,u,l,c,h,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.ProgressBar,p=t.Sprite,g=t.UITransform,d=t.Vec3,u=t.tween},function(t){l=t.BaseDialog},function(t){c=t.EventBus},function(t){h=t.Events},function(t){f=t.DialogManager}],execute:function(){var L,B,w,v,S,y,D,P;n._RF.push({},"66e24BoQJpLMYwX9+9izB5f","LoadingWindow",void 0);var W=s.ccclass,b=s.property,m=s.executionOrder;t("LoadingWindow",(L=W("LoadingWindow"),B=m(-1),w=b(a),v=b(p),L(S=B((D=i((y=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,r(i,"progressBar",D,e(i)),r(i,"progressSprite",P,e(i)),i.isLoading=!1,i.loadingTween=null,i.progressBarWidth=0,i.progressBarStartX=0,i}o(i,t);var n=i.prototype;return n.onLoad=function(){this.progressBar.progress=0,c.on(h.PLAYER_LOADED,this.onPlayerLoaded.bind(this));var t=this.progressBar.node.getComponent(g);this.progressBarWidth=t.width,this.progressBarStartX=this.progressBar.node.position.x,this.updateSpritePosition(0)},n.start=function(){console.log("Start Loading Window"),t.prototype.start.call(this),this.openLoadingWindow(),this.startSimulatedLoading()},n.openLoadingWindow=function(){var t=f.instance.getDialog("LoadingWindow");t&&f.instance.pushDialog(t)},n.updateSpritePosition=function(t){if(this.progressSprite){var i=this.progressBarStartX+this.progressBarWidth*t;this.progressSprite.node.setPosition(new d(i,0,0))}},n.startSimulatedLoading=function(){var t=this;this.isLoading||(this.isLoading=!0,this.loadingTween=u(this.progressBar).to(2,{progress:.7},{easing:"quadOut",onUpdate:function(i,o){t.updateSpritePosition(t.progressBar.progress)}}).start())},n.onPlayerLoaded=function(){var t=this;this.loadingTween&&this.loadingTween.stop(),u(this.progressBar).to(2,{progress:1},{easing:"quadOut",onUpdate:function(i,o){t.updateSpritePosition(t.progressBar.progress)},onComplete:function(){t.scheduleOnce((function(){t.close(),t.isLoading=!1}),.1)}}).start()},n.onDestroy=function(){this.loadingTween&&this.loadingTween.stop(),c.off(h.PLAYER_LOADED,this.onPlayerLoaded.bind(this))},i}(l)).prototype,"progressBar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(y.prototype,"progressSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=y))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadPlayerAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts"],(function(t){var e,n,r,o,i;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){i=t.Action}],execute:function(){o._RF.push({},"0ed68iaAV1Fj75TY0YujAUv","LoadPlayerAction",void 0);t("LoadPlayerAction",function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.execute=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get(this.getUrl());case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/LocalStorageManager.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.sys}],execute:function(){t._RF.push({},"6c5d5zrBQdKRrmaVw+DxXSg","LocalStorageManager",void 0),e("LocalStorageManager",function(){function e(){}e.getInstance=function(){return this.instance||(this.instance=new e),this.instance};var t=e.prototype;return t.has=function(e){return null!==r.localStorage.getItem(e)},t.save=function(e,t){try{r.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error("Storage error: "+e)}},t.get=function(e,t){void 0===t&&(t=null);try{var n=r.localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return console.error("Retrieval error: "+e),t}},t.remove=function(e){r.localStorage.removeItem(e)},t.clear=function(){r.localStorage.clear()},e}()).instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/LocationConfig.ts",["cc","./Item.ts","./ItemId.ts"],(function(e){var i,a,c;return{setters:[function(e){i=e.cclegacy},function(e){a=e.ItemGrade},function(e){c=e.ItemId}],execute:function(){e({getLocationById:function(e){return o.get(e)},getLocationGroup:function(e){return r.find((function(i){return i.id===e}))},getLocationsByGroup:function(e){return d.filter((function(i){return i.groupId===e}))}}),i._RF.push({},"8f6cedmp11A0bv6ioDstNC/","LocationConfig",void 0);var t=e("LocationGroupId",{WESTERN_LANDS:1,NORTHERN_PEAKS:2,EASTERN_MARSHES:3,SOUTHERN_DESERT:4}),n=e("LocationId",{RAVENWOOD_VILLAGE:101,WINDMILL_HILL:102,ORC_ENCAMPMENT:103,ABANDONED_CAMP:104,FROZEN_CAVERN:201,MOUNTAIN_PASS:202,DRAGON_LAIR:203,ICE_TEMPLE:204,FORGOTTEN_CRYPT:301,BLACK_NECROPOLIS:302,WHISPERING_CEMETERY:303,GRAVEWIND_CATACOMBS:304,ASHEN_PIT:401,HELLFIRE_BASTION:402,INFERNAL_SPIRE:403,DEMON_ABYSS:404}),r=e("locationGroups",[{id:t.WESTERN_LANDS,name:"Western Lands"},{id:t.NORTHERN_PEAKS,name:"Northern Peaks"},{id:t.EASTERN_MARSHES,name:"Eastern Marshes"},{id:t.SOUTHERN_DESERT,name:"Southern Desert"}]),d=e("gameLocations",[{id:n.RAVENWOOD_VILLAGE,name:"Ravenwood Village",groupId:t.WESTERN_LANDS,loot:[{id:c.RING_RING_OF_PRECISION,grade:a.D,chance:.5},{id:c.ACCESSORY_CAT_EARS,grade:a.D,chance:.2},{id:c.AMULET_AMULET_OF_SPEED,grade:a.D,chance:.05}],imagePath:"mob_icon/orc-scout",stats:{healthPoints:25,attackRoll:3,armorClass:5,damageDice:[{type:"bludgeoning",dice:"1d10"}],criticalChance:5,criticalMultiplier:1.3,initiative:3},energy:3,minLevel:1},{id:n.WINDMILL_HILL,name:"Windmill Hill",groupId:t.WESTERN_LANDS,loot:[{id:c.WEAPON_SHADOWFANG_DAGGER,grade:a.D,chance:.4},{id:c.ACCESSORY_DEVIL_HORN,grade:a.D,chance:.2},{id:c.ETC_CRYSTALS,chance:.2}],imagePath:"mob_icon/orc-warrior",stats:{healthPoints:50,attackRoll:8,armorClass:12,damageDice:[{type:"piercing",dice:"1d12"}],criticalChance:.05,criticalMultiplier:1.5,initiative:16},energy:5,minLevel:3},{id:n.ORC_ENCAMPMENT,name:"Orc Encampment",groupId:t.WESTERN_LANDS,loot:[{id:c.WEAPON_FLAMEFORGED_SWORD,grade:a.D,chance:.01},{id:c.ARMOR_ROGUE_TUNIC,grade:a.D,chance:.2},{id:c.RING_RING_OF_PRECISION,grade:a.D,chance:.3}],imagePath:"mob_icon/orc-shaman",stats:{healthPoints:75,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:10,minLevel:10},{id:n.ABANDONED_CAMP,name:"Abandoned Camp",groupId:t.WESTERN_LANDS,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/orc-boss",stats:{healthPoints:150,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.FROZEN_CAVERN,name:"Frozen cavern",groupId:t.NORTHERN_PEAKS,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/human-knight",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.MOUNTAIN_PASS,name:"Mountain pass",groupId:t.NORTHERN_PEAKS,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/human-archer",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.DRAGON_LAIR,name:"Dragon lair",groupId:t.NORTHERN_PEAKS,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/human-mage",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.ICE_TEMPLE,name:"Ice temple",groupId:t.NORTHERN_PEAKS,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/human-boss",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.FORGOTTEN_CRYPT,name:"Forgotten crypt",groupId:t.EASTERN_MARSHES,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/skeleton-cracked",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.BLACK_NECROPOLIS,name:"Black necropolis",groupId:t.EASTERN_MARSHES,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/skeleton-acolyte",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.WHISPERING_CEMETERY,name:"Whispering cemetery",groupId:t.EASTERN_MARSHES,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/skeleton-necromancer",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.GRAVEWIND_CATACOMBS,name:"Gravewind Catacomb",groupId:t.EASTERN_MARSHES,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/skeleton-pirate",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.ASHEN_PIT,name:"Ashen pit",groupId:t.SOUTHERN_DESERT,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/demon-warlord",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.HELLFIRE_BASTION,name:"Hellfire bastion",groupId:t.SOUTHERN_DESERT,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/demon-winged",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.INFERNAL_SPIRE,name:"Infernal spire",groupId:t.SOUTHERN_DESERT,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/demon-succubus",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12},{id:n.DEMON_ABYSS,name:"Demon abyss",groupId:t.SOUTHERN_DESERT,loot:[{id:c.WEAPON_INFERNO_WAND,grade:a.D,chance:.05},{id:c.PET_GHOST,grade:a.D,chance:.5},{id:c.ARMOR_MAGIC_TUNIC,grade:a.D,chance:.2}],imagePath:"mob_icon/demon-boss",stats:{healthPoints:300,attackRoll:18,armorClass:20,damageDice:[{type:"fire",dice:"2d8"},{type:"piercing",dice:"2d6"}],criticalChance:.2,criticalMultiplier:2.5,initiative:8},energy:15,minLevel:12}]),o=new Map(d.map((function(e){return[e.id,e]})));i._RF.pop()}}}));

System.register("chunks:///_virtual/LocationTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemIconTemplate.ts","./DialogManager.ts","./ItemInstanceIconData.ts","./ItemInstance.ts","./Item.ts"],(function(t){var e,n,o,i,a,r,l,u,c,p,s,m,f,b,y,I,g,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Prefab,u=t.Node,c=t.Sprite,p=t.Button,s=t.Label,m=t.instantiate,f=t.Component},function(t){b=t.ItemIconTemplate},function(t){y=t.DialogManager},function(t){I=t.ItemInstanceIconData},function(t){g=t.itemById},function(t){d=t.ItemType}],execute:function(){var h,L,v,w,T,B,D,z,S,C,P,F,M;a._RF.push({},"f4fc2gMHzVIZIvWt3SXm2SJ","LocationTemplate",void 0);var W=r.ccclass,_=r.property;t("LocationTemplate",(h=W("LocationTemplate"),L=_(l),v=_(u),w=_(c),T=_(p),B=_(s),h((S=e((z=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"itemIconPrefab",S,i(e)),o(e,"lootLayout",C,i(e)),o(e,"mobSprite",P,i(e)),o(e,"battleButton",F,i(e)),o(e,"nameLabel",M,i(e)),e}n(e,t);var a=e.prototype;return a.setup=function(t){var e,n=this;this.mobSprite.spriteFrame=t.spriteFrame,this.lootLayout.removeAllChildren(),t.loot.forEach((function(t){if(g(t.id).type!==d.ETC){var e=new I(t.grade,t.id),o=m(n.itemIconPrefab),i=o.getComponent(b);null==i||i.setup(e),n.lootLayout.addChild(o);n.lootLayout.setScale(.75,.75)}})),null==(e=this.battleButton)||e.node.on(p.EventType.CLICK,(function(){n.openBattleWindow(t)}),this),this.nameLabel.string=" "+t.name},a.openBattleWindow=function(t){var e=y.instance.getDialog("PreBattleWindow");e&&(e.setup(t),y.instance.pushDialog(e,!0))},e}(f)).prototype,"itemIconPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(z.prototype,"lootLayout",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(z.prototype,"mobSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(z.prototype,"battleButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(z.prototype,"nameLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=z))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/LoggingInterceptor.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"0b6acodXGtFiIcf1KI+n6Ov","LoggingInterceptor",void 0);n("LoggingInterceptor",function(){function n(){}var r=n.prototype;return r.handleError=function(n){throw console.error("[Response Error]",n),n},r.intercept=function(n){return console.log("[Response]",n),n},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LootSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"043b7kielRAerphmG9JKdHo","LootSystem",void 0);e("LootSystem",function(){function e(e){if(this.items=void 0,e.reduce((function(e,t){return e+t.chance}),0)>1)throw new Error("Total probability cannot exceed 1");this.items=e}var n=e.prototype;return n.roll=function(){for(var e,n=Math.random(),r=0,o=[].concat(this.items).sort((function(e,t){return t.chance-e.chance})),c=t(o);!(e=c()).done;){var i=e.value;if(n<=(r+=i.chance))return i}return null},n.getDropRates=function(){var e=1-this.items.reduce((function(e,t){return e+t.chance}),0);return"Drop rates:\n"+this.items.map((function(e){return"ID: "+e.id+" ("+e.grade+") - "+(100*e.chance).toFixed(1)+"%"})).join("\n")+"\nNo drop chance: "+(100*e).toFixed(1)+"%"},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Action.ts","./ActionFactory.ts","./AuthAction.ts","./TelegramAuthAction.ts","./BattleAction.ts","./CraftAction.ts","./DailyQuestRewardAction.ts","./LoadPlayerAction.ts","./PurchaseAction.ts","./SummonAction.ts","./DataLoader.ts","./EquippedItemStorage.ts","./GameApp.ts","./LocalStorageManager.ts","./BattleMessageTemplate.ts","./BattleWindow.ts","./DefeatWindow.ts","./VictoryWindow.ts","./ErrorHandler.ts","./TimerUtil.ts","./Animations.ts","./GridLayout.ts","./CommonIconData.ts","./CountableIconTemplate.ts","./ItemIconData.ts","./ItemIconTemplate.ts","./ItemInstanceIconData.ts","./BlockWindow.ts","./CongratulationWindow.ts","./InputBlockingUtils.ts","./Tooltip.ts","./TooltipData.ts","./TooltipPosition.ts","./TooltipTrigger.ts","./CustomSlider.ts","./BaseDialog.ts","./DialogManager.ts","./CraftWindow.ts","./MaterialSelectionWindow.ts","./IAPItemTemplate.ts","./IAPWindow.ts","./InventoryWindow.ts","./ItemFilter.ts","./StatToStringConverter.ts","./LoadingWindow.ts","./EquippedItemsComponent.ts","./MainWindowMenu.ts","./TopBar.ts","./LeftBarButtons.ts","./RightBarButtons.ts","./StatData.ts","./StatGrid.ts","./StatTemplate.ts","./Crystal.ts","./SummonUtil.ts","./SummonWindow.ts","./CurrenciesBar.ts","./ExperienceProgressBar.ts","./LocationTemplate.ts","./MapWindow.ts","./PreBattleWindow.ts","./QuestListItemTemplate.ts","./QuestWindow.ts","./FlexibleLayout.ts","./ShopItemTemplate.ts","./ShopWindow.ts","./WelcomeOfferWindow.ts","./Actions.ts","./DailyQuestConfig.ts","./GameStatId.ts","./IAPPackageConfig.ts","./IAPShopConfig.ts","./ItemId.ts","./LocationConfig.ts","./ShopConfig.ts","./Player.ts","./EquipmentDecorator.ts","./ItemInstance.ts","./Inventory.ts","./GameLocation.ts","./Attackable.ts","./PlayerData.ts","./Stats.ts","./Battle.ts","./LootSystem.ts","./Item.ts","./ItemUtil.ts","./ItemRandomizer.ts","./Shop.ts","./APIConfig.ts","./HttpClient.ts","./NetworkInterceptor.ts","./TokenManager.ts","./AuthInterceptor.ts","./ContentTypeInterceptor.ts","./LoggingInterceptor.ts","./BattleService.ts","./ClientSummonService.ts","./CraftService.ts","./DailyQuestService.ts","./PlayerService.ts","./SummonService.ts","./TelegramAuthService.ts","./PlayerStore.ts","./process-polyfill.mjs_cjs=&original=.js","./telegram-sdk-wrapper.ts","./EventBus.ts","./Events.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainWindowMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogManager.ts","./Animations.ts"],(function(n){var t,o,e,i,a,r,u,l,s,c;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,u=n.Button,l=n.Component},function(n){s=n.DialogManager},function(n){c=n.Animations}],execute:function(){var p,h,d,f,g,b,B,w,v,y,M;a._RF.push({},"e490axkDgpM74GGZNuqMdSS","MainWindowMenu",void 0);var W=r.ccclass,D=r.property;n("MainWindowMenu",(p=W("MainWindowMenu"),h=D(u),d=D(u),f=D(u),g=D(u),p((w=t((B=function(n){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,e(t,"shopButton",w,i(t)),e(t,"mapButton",v,i(t)),e(t,"bagButton",y,i(t)),e(t,"craftButton",M,i(t)),t}o(t,n);var a=t.prototype;return a.start=function(){var n,t,o,e;null==(n=this.bagButton)||n.node.on(u.EventType.CLICK,this.openInventoryWindow,this),null==(t=this.craftButton)||t.node.on(u.EventType.CLICK,this.openCraftWindow,this),null==(o=this.mapButton)||o.node.on(u.EventType.CLICK,this.openMapWindow,this),null==(e=this.shopButton)||e.node.on(u.EventType.CLICK,this.openShopWindow,this)},a.openInventoryWindow=function(){c.button(this.bagButton.node,this.bagButton.node.scale.clone());var n=s.instance.getDialog("InventoryWindow");n&&s.instance.pushDialog(n)},a.openCraftWindow=function(){c.button(this.craftButton.node,this.craftButton.node.scale.clone());var n=s.instance.getDialog("CraftWindow");n&&s.instance.pushDialog(n)},a.openMapWindow=function(){c.button(this.mapButton.node,this.mapButton.node.scale.clone());var n=s.instance.getDialog("MapWindow");n&&s.instance.pushDialog(n)},a.openShopWindow=function(){c.button(this.shopButton.node,this.shopButton.node.scale.clone());var n=s.instance.getDialog("ShopWindow");n&&s.instance.pushDialog(n)},t}(l)).prototype,"shopButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(B.prototype,"mapButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(B.prototype,"bagButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(B.prototype,"craftButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=B))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/MapWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./DataLoader.ts","./LocationTemplate.ts","./PlayerStore.ts","./LocationConfig.ts"],(function(t){var n,o,e,i,a,r,l,c,u,s,p,f,L,g,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Prefab,c=t.Node,u=t.Label,s=t.instantiate},function(t){p=t.BaseDialog},function(t){f=t.DataLoader},function(t){L=t.LocationTemplate},function(t){g=t.default},function(t){b=t.getLocationGroup}],execute:function(){var h,v,d,y,m,D,w,B,G,P,N,z,M;a._RF.push({},"0ffa2l4EdRM4o0WG3aKBMQc","MapWindow",void 0);var T=r.ccclass,x=r.property;t("MapWindow",(h=T("MapWindow"),v=x(l),d=x(c),y=x(c),m=x(c),D=x(u),h((G=n((B=function(t){function n(){for(var n,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,e(n,"locationPrefab",G,i(n)),e(n,"content",P,i(n)),e(n,"prevLocationBtn",N,i(n)),e(n,"nextLocationBtn",z,i(n)),e(n,"locationGroupNameLabel",M,i(n)),n}o(n,t);var a=n.prototype;return a.start=function(){var n,o;t.prototype.start.call(this),null==(n=this.prevLocationBtn)||n.on(c.EventType.TOUCH_END,this.onPrevLocation,this),null==(o=this.nextLocationBtn)||o.on(c.EventType.TOUCH_END,this.onNextLocation,this)},a.onPrevLocation=function(){var t=g.getState(),n=t.getLocationGroup()-1;b(n)&&(this.fillLocations(n),t.setLocationGroup(n))},a.onNextLocation=function(){var t=g.getState(),n=t.getLocationGroup()+1;b(n)&&(this.fillLocations(n),t.setLocationGroup(n))},a.onDialogOpen=function(){var t=g.getState().getLocationGroup();this.fillLocations(t)},a.fillLocations=function(t){var n,o,e=this;this.locationGroupNameLabel.string=null!=(n=null==(o=b(t))?void 0:o.name)?n:"Default name",this.content.removeAllChildren(),f.getInstance().getAllLocations().forEach((function(n){if(n.groupId===t){var o=s(e.locationPrefab),i=o.getComponent(L);i&&i.setup(n),e.content.addChild(o)}}))},n}(p)).prototype,"locationPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(B.prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(B.prototype,"prevLocationBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(B.prototype,"nextLocationBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(B.prototype,"locationGroupNameLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=B))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/MaterialSelectionWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./Item.ts","./ItemInstance.ts","./GridLayout.ts","./PlayerStore.ts","./ItemInstanceIconData.ts"],(function(e){var t,n,i,o,r,s,a,l,c,u,m,d,f,h,p,I,C,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Prefab,l=e.Node,c=e.Button,u=e.view,m=e.instantiate},function(e){d=e.BaseDialog},function(e){f=e.ItemIconTemplate},function(e){h=e.ItemGrade},function(e){p=e.itemById},function(e){I=e.GridLayout},function(e){C=e.default},function(e){y=e.ItemInstanceIconData}],execute:function(){var g,v,b,B,w,S,D,G,T,q,k;r._RF.push({},"9aa28ZeQT9I4KJqCeUm9BQe","MaterialSelectionWindow",void 0);var x=s.ccclass,z=s.property;e("MaterialSelectionWindow",(g=x("MaterialSelectionWindow"),v=z(a),b=z(a),B=z(l),w=z(c),g((G=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"itemPrefab",G,o(t)),i(t,"selectionBox",T,o(t)),i(t,"content",q,o(t)),i(t,"confirmButton",k,o(t)),t.requiredCount=4,t.itemType="",t.itemGrade=h.D,t.selectedItems=[],t.onConfirmCallback=null,t.reservedItems=[],t}n(t,e);var r=t.prototype;return r.start=function(){var t=this;e.prototype.start.call(this),this.confirmButton.node.on(c.EventType.CLICK,this.onConfirmClick,this),u.on("canvas-resize",(function(){t.setupGrid()}))},r.setup=function(e){this.itemType=e.type,this.itemGrade=e.grade,this.requiredCount=e.requiredCount,this.reservedItems=e.reservedItems,this.onConfirmCallback=e.onConfirm,this.displayAvailableItems(),this.updateConfirmButton()},r.displayAvailableItems=function(){var e=this;if(this.content){this.content.removeAllChildren(),this.selectedItems=[];var t=C.getState().getUnequippedItems().filter((function(t){return p(t.itemId).type===e.itemType&&t.grade===e.itemGrade&&!e.reservedItems.some((function(e){return e===t}))})),n=0;t.forEach((function(t){var i=m(e.itemPrefab),o=i.getComponent(f);o&&o.setup(new y(t.grade,t.itemId)),i.on(l.EventType.TOUCH_END,(function(){e.toggleItemSelection(t,i)})),e.content.addChild(i),n<4&&(e.toggleItemSelection(t,i),n++)}))}},r.toggleItemSelection=function(e,t){var n=this.selectedItems.indexOf(e);if(-1===n&&this.selectedItems.length<this.requiredCount){this.selectedItems.push(e);var i=m(this.selectionBox);i.name="selectionBox",t.addChild(i),t.setScale(1.1,1.1)}else if(-1!==n){this.selectedItems.splice(n,1),t.setScale(1,1);var o=t.getChildByName("selectionBox");o&&o.destroy()}this.updateConfirmButton()},r.updateConfirmButton=function(){this.confirmButton&&(this.confirmButton.node.active=this.selectedItems.length===this.requiredCount)},r.onDialogOpen=function(){this.updateConfirmButton(),this.setupGrid()},r.setupGrid=function(){new I(168,50,this.content,[],40).setupGrid()},r.onConfirmClick=function(){this.selectedItems.length===this.requiredCount&&this.onConfirmCallback&&(this.close(),this.onConfirmCallback(this.selectedItems))},t}(d)).prototype,"itemPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"selectionBox",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(D.prototype,"content",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(D.prototype,"confirmButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=D))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkInterceptor.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"74ef1kzcABIQYNa8MogBr9L","NetworkInterceptor",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["cc","./EquipmentDecorator.ts","./ItemInstance.ts"],(function(e){var t,i,n;return{setters:[function(e){t=e.cclegacy},function(e){i=e.EquipmentDecorator},function(e){n=e.ItemInstance}],execute:function(){e({calculateExperienceForLevel:c,calculateLevelFromExperience:r,getExperienceProgress:function(e){var t=r(e),i=c(t),n=c(t+1)-i,a=e-i;return Math.floor(a/n*100)}}),t._RF.push({},"e341eDEUgZFAqAxEqnipKs1","Player",void 0);e("Player",function(){function e(e){var t=this;this.name=void 0,this.experience=void 0,this.level=void 0,this.stats=void 0,this.equippedItems=void 0,this.name=e.name,this.experience=e.experience,this.level=r(this.experience);var i=e.equipped,c=Object.keys(i).map((function(e){return i[e]}));this.equippedItems=e.items.filter((function(e){return-1!==c.indexOf(e._id)})).map((function(e){return n.fromData(e)})),this.stats={healthPoints:100,attackRoll:0,armorClass:0,damageDice:[],criticalChance:5,criticalMultiplier:1.5,initiative:0},this.equippedItems.forEach((function(e){return t.equip(e)}))}return e.prototype.equip=function(e){new i(e).equipItem(this.stats)},e}());function r(e){for(var t=1;c(t+1)<=e;)t++;return t}function c(e){return Math.floor(100*Math.pow(e,1.5))}t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"454af1t9x5MjqiJzg/riwid","PlayerData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquippedItemStorage.ts","./LocalStorageManager.ts","./Actions.ts","./ActionFactory.ts","./PlayerStore.ts","./Item.ts","./ItemInstance.ts"],(function(e){var t,n,r,c,a,o,u,i,s,p,f;return{setters:[function(e){t=e.extends,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){c=e.cclegacy},function(e){a=e.EQUIPPED_KEY},function(e){o=e.LocalStorageManager},function(e){u=e.GameActions},function(e){i=e.ActionFactory},function(e){s=e.default},function(e){p=e.ItemType},function(e){f=e.itemById}],execute:function(){c._RF.push({},"f7edfR5rUVGFL63ZnT9SZS3","PlayerService",void 0);e("PlayerService",function(){function e(){}var c=e.prototype;return c.loadPlayer=function(){var e=n(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.getInstance().get(u.LOAD_PLAYER),e.prev=1,e.next=4,t.execute();case 4:return n=e.sent,this.syncLocalEquipment(n),s.getState().onDataLoad(n),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),c.syncLocalEquipment=function(e){var n=o.getInstance(),r=n.get(a);r?e.equipped=t({},r):(Object.values(p).forEach((function(t){if(null==e.equipped[t]){var n=e.items.find((function(e){return f(e.itemId).type===t}));n&&(e.equipped[t]=n._id)}})),n.save(a,e.equipped))},e}());c._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerStore.ts",["cc","./vanilla.mjs","./middleware.mjs","./process-polyfill.mjs_cjs=&original=.js","./immer.mjs","./ItemInstance.ts","./LocationConfig.ts"],(function(e){var t,n,i,u,r,a,o;return{setters:[function(e){t=e.cclegacy},function(e){n=e.createStore},function(e){i=e.subscribeWithSelector,u=e.devtools},null,function(e){r=e.immer},function(e){a=e.itemById},function(e){o=e.LocationGroupId}],execute:function(){t._RF.push({},"23633QMgEVIZJBjv1dSpOVj","PlayerStore",void 0);e("default",n()(i(u(r((function(e,t){return{name:"name",experience:0,vip:0,locationGroup:o.WESTERN_LANDS,items:[],resources:{},equipped:{},dailyData:{resetTimestamp:0,stats:{},quests:{}},onDataLoad:function(t){return e((function(e){var n;e.name=t.name,e.vip=t.vip,e.experience=t.experience,e.items=t.items,e.resources=t.resources,e.equipped=t.equipped,e.dailyData=t.dailyData,e.dailyData.quests=null!=(n=t.dailyData.quests)?n:{}}))},addExperience:function(t){return e((function(e){if(t<=0)throw new Error("Cannot add zero or negative experience");e.experience+=t}))},equip:function(t){return e((function(e){if(t._id){var n=a(t.itemId).type;e.equipped[n]=t._id}}))},unequip:function(t){return e((function(e){if(t._id){var n=a(t.itemId).type;e.equipped[n]=null}}))},addItem:function(t){return e((function(e){e.items.push(t)}))},removeItem:function(t){return e((function(e){var n=e.items.findIndex((function(e){return e._id===t}));-1!==n&&e.items.splice(n,1)}))},removeItems:function(t){return e((function(e){var n=new Set(t);e.items=e.items.filter((function(e){return!n.has(e._id)}))}))},addItems:function(t){return e((function(e){t.forEach((function(t){return e.items.push(t)}))}))},addResources:function(t,n){return e((function(e){e.resources[t]+=n}))},getItems:function(){return t().items},getEquippedIds:function(){var e=t().equipped;return Object.keys(e).map((function(t){return e[t]}))},getUnequippedItems:function(){var e=t().getEquippedIds();return t().getItems().filter((function(t){return-1===e.indexOf(t._id)}))},addStat:function(t,n){return void 0===n&&(n=1),e((function(e){var i,u=null!=(i=e.dailyData.stats[t])?i:0;e.dailyData.stats[t]=u+n}))},getDailyStat:function(e){var n;return null!=(n=t().dailyData.stats[e])?n:0},setClaimed:function(t){return e((function(e){e.dailyData.quests||(e.dailyData.quests={}),e.dailyData.quests[t]={claimed:!0}}))},getClaimed:function(e){var n,i;return null!=(n=null==(i=t().dailyData.quests[e])?void 0:i.claimed)&&n},getLocationGroup:function(){return t().locationGroup},setLocationGroup:function(t){return e((function(e){e.locationGroup=t}))}}}))))));t._RF.pop()}}}));

System.register("chunks:///_virtual/PreBattleWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./Player.ts","./PlayerStore.ts","./DialogManager.ts","./Battle.ts","./CountableIconTemplate.ts","./BattleService.ts"],(function(t){var e,n,i,a,o,r,l,u,c,s,f,p,d,b,g,h,B,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Label,u=t.Node,c=t.Prefab,s=t.Button,f=t.instantiate},function(t){p=t.BaseDialog},function(t){d=t.Player},function(t){b=t.default},function(t){g=t.DialogManager},function(t){h=t.Battle},function(t){B=t.CountableIconTemplate},function(t){m=t.BattleService}],execute:function(){var w,v,y,L,P,D,C,I,_,z,W,S,x,R,T;o._RF.push({},"a31d4cDviRBN6KXGJ4x1It3","PreBattleWindow",void 0);var E=r.ccclass,N=r.property;t("PreBattleWindow",(w=E("PreBattleWindow"),v=N(l),y=N(u),L=N(c),P=N(s),D=N(s),C=N(s),w((z=e((_=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"locationNameLabel",z,a(e)),i(e,"rewardBox",W,a(e)),i(e,"itemPrefab",S,a(e)),i(e,"raidBtn",x,a(e)),i(e,"raid10Btn",R,a(e)),i(e,"battleBtn",T,a(e)),e._gameLocation=null,e}n(e,t);var o=e.prototype;return o.afterStart=function(){var t,e,n,i=this;null==(t=this.raidBtn)||t.node.on(s.EventType.CLICK,this.onRaid,this),null==(e=this.raid10Btn)||e.node.on(s.EventType.CLICK,(function(){return i.onRaid(10)}),this),null==(n=this.battleBtn)||n.node.on(s.EventType.CLICK,this.onBattle,this)},o.setup=function(t){var e=this;this._gameLocation=t,this.locationNameLabel.string=t.name,this.rewardBox.removeAllChildren(),t.loot.forEach((function(t){var n=f(e.itemPrefab),i=null==n?void 0:n.getComponent(B);null==i||i.setup(t.id,1,t.grade),e.rewardBox.addChild(n)}))},o.onDialogOpen=function(){if(!this._gameLocation)throw Error()},o.onRaid=function(t){b.getState().vip>0?(new m).finishBattle(this._gameLocation):this.openIapWindow()},o.openIapWindow=function(){var t=g.instance.getDialog("IAPWindow");t&&g.instance.pushDialog(t,!0)},o.onBattle=function(){var t=this._gameLocation,e=new d(b.getState()),n={name:"Monster",stats:t.stats},i=new h(e,n);i.battle();var a=g.instance.getDialog("BattleWindow");a&&(a.setup(t,i),g.instance.pushDialog(a,!0))},e}(p)).prototype,"locationNameLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(_.prototype,"rewardBox",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(_.prototype,"itemPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(_.prototype,"raidBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(_.prototype,"raid10Btn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(_.prototype,"battleBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=_))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/process-polyfill.js",["./cjs-loader.mjs"],(function(e,t){var s;return{setters:[function(e){s=e.default}],execute:function(){e("default",void 0);var n=e("__cjsMetaURL",t.meta.url);s.define(n,(function(t,s,n,o,r){window.process=window.process||{env:{NODE_ENV:"development"}},e("default",n.exports)}),{})}}}));

System.register("chunks:///_virtual/process-polyfill.mjs_cjs=&original=.js",["./process-polyfill.js","./cjs-loader.mjs"],(function(e,s){var r,t;return{setters:[function(s){r=s.__cjsMetaURL;var t={};t.__cjsMetaURL=s.__cjsMetaURL,t.default=s.default,e(t)},function(e){t=e.default}],execute:function(){r||t.throwInvalidWrapper("./process-polyfill.js",s.meta.url),t.require(r)}}}));

System.register("chunks:///_virtual/PurchaseAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts"],(function(t){var n,c,e;return{setters:[function(t){n=t.inheritsLoose},function(t){c=t.cclegacy},function(t){e=t.Action}],execute:function(){c._RF.push({},"b0b24PFzMNPPIQC3chgLWWU","PurchaseAction",void 0);t("PurchaseAction",function(t){function c(){return t.apply(this,arguments)||this}return n(c,t),c}(e));c._RF.pop()}}}));

System.register("chunks:///_virtual/QuestListItemTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerStore.ts","./InputBlockingUtils.ts","./DailyQuestService.ts"],(function(e){var t,r,n,i,a,s,o,u,l,c,p,m,f,g,b,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){o=e.cclegacy,u=e._decorator,l=e.ProgressBar,c=e.Label,p=e.Button,m=e.Sprite,f=e.Component},function(e){g=e.default},function(e){b=e.InputBlocking},function(e){h=e.DailyQuestService}],execute:function(){var y,B,d,v,L,w,S,I,x,P,z,T,q;o._RF.push({},"ead69uantpHxYXpPs0xSfG9","QuestListItemTemplate",void 0);var C=u.ccclass,D=u.property;e("QuestListItemTemplate",(y=C("QuestListItemTemplate"),B=D(l),d=D(c),v=D(c),L=D(p),w=D(c),y((x=t((I=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"questProgressBar",x,i(t)),n(t,"questName",P,i(t)),n(t,"progressBarLabel",z,i(t)),n(t,"claimButton",T,i(t)),n(t,"claimBtnLabel",q,i(t)),t}r(t,e);var o=t.prototype;return o.setup=function(e){var t,r=this;this.questName.string=e.name;var n=Object.entries(e.stats)[0],i=n[0],a=n[1],s=g.getState(),o=s.getDailyStat(i),u=Math.min(o,a),l=Math.max(0,Math.min(1,u/a));if(this.questProgressBar.progress=l,this.progressBarLabel.string=u+"/"+a+" ",s.getClaimed(e.id))this.claimBtnLabel.string="Claimed";else if(1!==l)this.claimBtnLabel.string="Incomplete";else{this.claimButton.interactable=!0;var c=this.claimButton,f=c.node.getComponent(m);f&&c.normalSprite&&(f.spriteFrame=c.normalSprite)}null==(t=this.claimButton)||t.node.on(p.EventType.CLICK,(function(){return r.claimReward(e)}),this)},o.claimReward=function(){var e=a(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.execute(a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(new h).getReward(t.id));case 1:case"end":return e.stop()}}),e)}))));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(f)).prototype,"questProgressBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(I.prototype,"questName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"progressBarLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(I.prototype,"claimButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(I.prototype,"claimBtnLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=I))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/QuestWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./DailyQuestConfig.ts","./QuestListItemTemplate.ts","./TimerUtil.ts"],(function(t){var e,i,n,r,a,o,u,l,s,c,p,f,m,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,u=t.Prefab,l=t.Node,s=t.Label,c=t.instantiate},function(t){p=t.BaseDialog},function(t){f=t.dailyQuests},function(t){m=t.QuestListItemTemplate},function(t){b=t.getTimeString}],execute:function(){var d,h,y,g,L,v,D,w,Q;a._RF.push({},"3f0d3kSr1NDbp8lvZXwnzfc","QuestWindow",void 0);var T=o.ccclass,_=o.property;t("QuestWindow",(d=T("QuestWindow"),h=_(u),y=_(l),g=_(s),d((D=e((v=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"questListItemPrefab",D,r(e)),n(e,"content",w,r(e)),n(e,"timerLabel",Q,r(e)),e._timeAccumulator=0,e}i(e,t);var a=e.prototype;return a.onDialogOpen=function(){var t=this;this.updateTimerDisplay(),this.content.removeAllChildren(),f.forEach((function(e){var i=c(t.questListItemPrefab),n=i.getComponent(m);n&&n.setup(e),t.content.addChild(i)}))},a.update=function(t){this._timeAccumulator+=t,this._timeAccumulator>=1&&(this.updateTimerDisplay(),this._timeAccumulator=0)},a.updateTimerDisplay=function(){this.timerLabel&&(this.timerLabel.string="Refresh in: "+b())},e}(p)).prototype,"questListItemPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(v.prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(v.prototype,"timerLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=v))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/RightBarButtons.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogManager.ts"],(function(t){var n,e,i,r,o,a,l,u,c;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Node,u=t.Component},function(t){c=t.DialogManager}],execute:function(){var s,p,f,g,h,B,d,v,y;o._RF.push({},"273abfWMrdKFrDQSOvPaVCu","RightBarButtons",void 0);var D=a.ccclass,m=a.property;t("RightBarButtons",(s=D("RightBarButtons"),p=m(l),f=m(l),g=m(l),s((d=n((B=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,i(n,"giftBtn",d,r(n)),i(n,"darkGiftBtn",v,r(n)),i(n,"gemBtn",y,r(n)),n}e(n,t);var o=n.prototype;return o.start=function(){var t,n,e;null==(t=this.giftBtn)||t.on(l.EventType.TOUCH_END,this.openWelcomeOfferWindow,this),null==(n=this.darkGiftBtn)||n.on(l.EventType.TOUCH_END,this.openWelcomeOfferWindow,this),null==(e=this.gemBtn)||e.on(l.EventType.TOUCH_END,this.openIapWindow,this)},o.openWelcomeOfferWindow=function(){var t=c.instance.getDialog("WelcomeOfferWindow");t&&c.instance.pushDialog(t)},o.openIapWindow=function(){var t=c.instance.getDialog("IAPWindow");t&&c.instance.pushDialog(t)},n}(u)).prototype,"giftBtn",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(B.prototype,"darkGiftBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(B.prototype,"gemBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=B))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/Shop.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e04e91gE15Lga4JRJz90cMy","Shop",void 0);t("Shop",function(){function t(t){this.items=void 0,this.items=t}return t.prototype.getItems=function(){return this.items},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ShopConfig.ts",["cc","./Item.ts","./ItemId.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.ItemGrade},function(e){i=e.ItemId}],execute:function(){r._RF.push({},"9ca6dH16R9EUKnnH/Z+NsPV","ShopConfig",void 0);e("shopConfigs",{regularShop:[{productId:1,itemId:i.ARMOR_IRON_PLATE_ARMOR,grade:t.D,price:1e3,currencyId:i.ETC_COINS,itemNumber:1,limitNumber:1},{productId:2,itemId:i.WEAPON_SHADOWFANG_DAGGER,grade:t.D,price:1500,currencyId:i.ETC_COINS,itemNumber:1,limitNumber:1},{productId:3,itemId:i.ACCESSORY_CAT_EARS,grade:t.D,price:100,currencyId:i.ETC_GEMS,itemNumber:1,limitNumber:1},{productId:4,itemId:i.AMULET_AMULET_OF_SPEED,grade:t.D,price:100,currencyId:i.ETC_GEMS,itemNumber:1,limitNumber:1},{productId:5,itemId:i.ETC_CRYSTALS,grade:t.NG,price:150,currencyId:i.ETC_GEMS,itemNumber:1,limitNumber:1}]});r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopItemTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataLoader.ts","./ItemIconTemplate.ts","./ItemInstance.ts","./DialogManager.ts","./PlayerStore.ts","./ItemInstanceIconData.ts","./InputBlockingUtils.ts","./ActionFactory.ts","./Actions.ts"],(function(e){var t,n,r,i,o,a,u,c,l,s,p,m,f,g,b,d,I,y,h,v,w,S,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,l=e.Node,s=e.Label,p=e.Button,m=e.Sprite,f=e.Component},function(e){g=e.DataLoader},function(e){b=e.ItemIconTemplate},function(e){d=e.itemById,I=e.ItemInstance},function(e){y=e.DialogManager},function(e){h=e.default},function(e){v=e.ItemInstanceIconData},function(e){w=e.InputBlocking},function(e){S=e.ActionFactory},function(e){D=e.GameActions}],execute:function(){var C,L,B,N,T,z,F,k,x,A,P,R,W,_,M;u._RF.push({},"7a818PFu1lJFYl4C8t2Sfji","ShopItemTemplate",void 0);var j=c.ccclass,E=c.property;e("ShopItemTemplate",(C=j("ShopItemTemplate"),L=E(l),B=E(s),N=E(s),T=E(p),z=E(m),F=E(s),C((A=t((x=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"itemIcon",A,i(t)),r(t,"itemNumber",P,i(t)),r(t,"limitNumber",R,i(t)),r(t,"buyButton",W,i(t)),r(t,"currencySprite",_,i(t)),r(t,"priceLabel",M,i(t)),t}n(t,e);var u=t.prototype;return u.setup=function(e){var t,n=this,r=new v(e.grade,e.itemId),i=this.itemIcon.getComponent(b);null==i||i.setup(r),this.itemNumber.string=e.itemNumber.toString(),this.limitNumber.string="Limit:"+e.limitNumber;var u=e.currencyId,c=g.getInstance().spriteFramesByCurrencyId.get(u);c?this.currencySprite.spriteFrame=c:console.log("Sprite "+u+" not found"),this.priceLabel.string=e.price.toString();var l=d(e.itemId);null==(t=this.buyButton)||t.node.on(p.EventType.CLICK,o(a().mark((function t(){var r,i,o,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.getState(),t.next=3,n.purchase(e.productId);case 3:!(i=t.sent).stackable&&i.items?(r.addItems(i.items),n.openCongratulationWindow(I.fromData(i.items[0]))):i.resource&&(o=i.resource.key,u=i.resource.value,r.addResources(o,u),n.openCongratulationWindow(new I(l,void 0))),r.addResources(e.currencyId,-e.price);case 6:case"end":return t.stop()}}),t)}))),this)},u.purchase=function(){var e=o(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.execute((function(){return S.getInstance().get(D.PURCHASE).execute({productId:t})}));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.error("Purchase failed:",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),u.openCongratulationWindow=function(e){var t=y.instance.getDialog("CongratulationWindow");t&&(t.setup(e),y.instance.pushDialog(t,!0))},t}(f)).prototype,"itemIcon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(x.prototype,"itemNumber",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(x.prototype,"limitNumber",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(x.prototype,"buyButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(x.prototype,"currencySprite",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(x.prototype,"priceLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=x))||k));u._RF.pop()}}}));

System.register("chunks:///_virtual/ShopWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./DataLoader.ts","./ShopItemTemplate.ts","./GridLayout.ts"],(function(t){var e,n,i,o,r,a,s,l,p,u,c,h,d,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Prefab,l=t.ScrollView,p=t.Node,u=t.view,c=t.instantiate},function(t){h=t.BaseDialog},function(t){d=t.DataLoader},function(t){f=t.ShopItemTemplate},function(t){m=t.GridLayout}],execute:function(){var v,b,y,I,g,G,w,D,S;r._RF.push({},"025fdih6YJHcL9n7WidW7GF","ShopWindow",void 0);var L=a.ccclass,z=a.property;t("ShopWindow",(v=L("ShopWindow"),b=z(s),y=z(l),I=z(p),v((w=e((G=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"shopItemPrefab",w,o(e)),i(e,"shopItemGrid",D,o(e)),i(e,"separator",S,o(e)),e}n(e,t);var r=e.prototype;return r.start=function(){var e=this;t.prototype.start.call(this),u.on("canvas-resize",(function(){e.setupGrid()}))},r.onDialogOpen=function(){var t=this;this.setupGrid();var e=this.shopItemGrid.content,n=d.getInstance().shop.getItems();null==e||e.removeAllChildren(),n.forEach((function(e){var n,i=c(t.shopItemPrefab),o=null==i?void 0:i.getComponent(f);null==o||o.setup(e),null==(n=t.shopItemGrid.content)||n.addChild(i)}))},r.setupGrid=function(){this.shopItemGrid.content&&new m(257,50,this.shopItemGrid.content).setupGrid()},e}(h)).prototype,"shopItemPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(G.prototype,"shopItemGrid",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(G.prototype,"separator",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=G))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/StatData.ts",["cc"],(function(){var t;return{setters:[function(a){t=a.cclegacy}],execute:function(){t._RF.push({},"e88a1dAs0RG9JI1Jh6aJhpo","StatData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/StatGrid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StatTemplate.ts","./Player.ts","./stats.json","./TooltipTrigger.ts","./PlayerStore.ts"],(function(t){var e,i,a,n,r,s,o,l,c,u,d,p,f,h,v,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,o=t._decorator,l=t.Node,c=t.Prefab,u=t.instantiate,d=t.Component},function(t){p=t.StatTemplate},function(t){f=t.Player},function(t){h=t.default},function(t){v=t.TooltipTrigger},function(t){b=t.default}],execute:function(){var m,g,y,S,D,T,z;s._RF.push({},"4d277zRrndFbrOguxJzFAXh","StatGrid",void 0);var P=o.ccclass,I=o.property;t("StatGrid",(m=P("StatGrid"),g=I(l),y=I(c),m((T=e((D=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,a(e,"content",T,n(e)),a(e,"statPrefab",z,n(e)),e.statDataArr=[],e.statTemplates=new Map,e.unsubscribeItems=null,e.initialized=!1,e}i(e,t);var s=e.prototype;return s.start=function(){var t=this;this.statDataArr=h,this.initializeStatList(),this.unsubscribeItems=b.subscribe((function(t){return t.equipped}),(function(e){t.node.active&&t.updateStatValues()}))},s.onDestroy=function(){this.unsubscribeItems&&this.unsubscribeItems()},e.convertDamageDiceToRange=function(t){for(var e,i=0,a=0,n=r(t);!(e=n()).done;){var s=e.value,o=s.dice.match(/^(\d+)d(\d+)$/);if(!o)throw new Error("Invalid dice format: "+s.dice);var l=parseInt(o[1],10);i+=l,a+=l*parseInt(o[2],10)}return i+"-"+a},s.initializeStatList=function(){var t=this;this.content&&this.statPrefab&&!this.initialized&&(this.content.removeAllChildren(),this.statTemplates.clear(),this.statDataArr.forEach((function(e){var i,a=u(t.statPrefab),n=null==a?void 0:a.getComponent(p);null==n||n.setupInitial(e),e.id&&n&&t.statTemplates.set(e.id,n),a.addComponent(v).setTooltipData({content:e.description}),null==(i=t.content)||i.addChild(a)})),this.updateStatValues(),this.initialized=!0)},s.updateStatValues=function(){var t=this;if(this.initialized){var i=new f(b.getState()).stats;this.statDataArr.forEach((function(a){var n="",r=a.id;if("damage"===r)n=e.convertDamageDiceToRange(i.damageDice);else if(Object.prototype.hasOwnProperty.call(i,r)){n=i[r].toString(),"criticalChance"===a.id&&(n+="%")}if(a.value!==n){a.value=n;var s=t.statTemplates.get(r);s&&s.updateValue(n)}}))}},e}(d)).prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(D.prototype,"statPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=D))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/Stats.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"dadbeaZNtZA8p+yIPV1XL+/","Stats",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/StatTemplate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,a,n,l,o,u,c,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Sprite,u=e.Label,c=e.resources,s=e.SpriteFrame,p=e.Component}],execute:function(){var m,f,h,b,v,d,g,y,L;n._RF.push({},"cab33cwK4dMtYKrTJ8IEU4n","StatTemplate",void 0);var S=l.ccclass,F=l.property;e("StatTemplate",(m=S("StatTemplate"),f=F(o),h=F(u),b=F(u),m((g=t((d=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,i(t,"icon",g,a(t)),i(t,"nameLabel",y,a(t)),i(t,"value",L,a(t)),t.currentValue="",t}r(t,e);var n=t.prototype;return n.setupInitial=function(e){var t=this;this.nameLabel&&(this.nameLabel.string=e.name),this.icon&&c.load(e.imagePath+"/spriteFrame",s,(function(e,r){e&&console.error("Failed to load image:",e),!e&&t.icon&&(t.icon.spriteFrame=r)})),this.updateValue((null==e?void 0:e.value)||"")},n.updateValue=function(e){this.currentValue!==e&&(this.currentValue=e,this.value&&(this.value.string=e))},t}(p)).prototype,"icon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"nameLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(d.prototype,"value",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/StatToStringConverter.ts",["cc","./StatGrid.ts"],(function(t){var e,r;return{setters:[function(t){e=t.cclegacy},function(t){r=t.StatGrid}],execute:function(){e._RF.push({},"4328agoOt5LnYiaxK7uTHBf","StatToStringConverter",void 0);t("StatsToStringConverter",function(){function t(){}return t.prototype.getGradeRichText=function(t,e){var i=t.grades[e];if(!i)return"";for(var n=[],a={healthPoints:"HP",armorClass:"AC",criticalMultiplier:"Critical Multiplier",initiative:"Initiative",attackBonus:"Attack Bonus"},c=0,o=Object.entries(i);c<o.length;c++){var u=o[c],s=u[0],l=u[1];if("damageDice"===s){var p=l,f=r.convertDamageDiceToRange(p);n.push("Damage: "+f),p.forEach((function(t){return n.push(t.type+": "+t.dice)}))}else{var g=a[s]||s.replace(/([A-Z])/g," $1").replace(/^./,(function(t){return t.toUpperCase()})).trim(),v="number"==typeof l&&"criticalMultiplier"===s?"+"+(100*l).toFixed(0)+"%":l;n.push(g+": "+v)}}return n.join("\n")},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/SummonAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts"],(function(t){var n,e,r,o,u;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){u=t.Action}],execute:function(){o._RF.push({},"b1e3cSjglBFj4jj04/hFwCv","SummonAction",void 0);t("SummonAction",function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.execute=function(){var t=e(r().mark((function t(n){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.post(this.getUrl(),n);case 2:return e=t.sent,t.abrupt("return",e.items);case 4:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),o}(u));o._RF.pop()}}}));

System.register("chunks:///_virtual/SummonService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemId.ts","./ActionFactory.ts","./PlayerStore.ts","./Actions.ts"],(function(t){var e,n,r,c,u,o,s;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy},function(t){c=t.ItemId},function(t){u=t.ActionFactory},function(t){o=t.default},function(t){s=t.GameActions}],execute:function(){r._RF.push({},"b330egR6clJCoyKdsE37qsd","SummonService",void 0);t("SummonService",function(){function t(){}return t.prototype.summonItems=function(){var t=e(n().mark((function t(e){var r,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.getInstance().get(s.SUMMON),t.prev=1,t.next=4,r.execute({count:e});case 4:return a=t.sent,o.getState().addItems(a),o.getState().addResources(c.ETC_CRYSTALS,-a.length),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/SummonUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SummonService.ts","./InputBlockingUtils.ts"],(function(n){var t,e,r,u,o;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){r=n.cclegacy},function(n){u=n.SummonService},function(n){o=n.InputBlocking}],execute:function(){function c(){return(c=t(e().mark((function n(t){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.execute((function(){return(new u).summonItems(t)}));case 3:return n.abrupt("return",n.sent);case 6:throw n.prev=6,n.t0=n.catch(0),console.error("Summon failed:",n.t0),n.t0;case 10:case"end":return n.stop()}}),n,null,[[0,6]])})))).apply(this,arguments)}n("summonItems",(function(n){return c.apply(this,arguments)})),r._RF.push({},"a880dLkjBpFH7sUZRPMl7r6","SummonUtil",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/SummonWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./GridLayout.ts","./ItemIconTemplate.ts","./ItemInstanceIconData.ts","./SummonUtil.ts"],(function(t){var n,e,i,o,r,u,s,a,c,m,l,p,f,h,d,y,I,v;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){s=t.cclegacy,a=t._decorator,c=t.Prefab,m=t.Node,l=t.Button,p=t.view,f=t.instantiate},function(t){h=t.BaseDialog},function(t){d=t.GridLayout},function(t){y=t.ItemIconTemplate},function(t){I=t.ItemInstanceIconData},function(t){v=t.summonItems}],execute:function(){var b,g,w,B,D,S,G,L,z,C,P;s._RF.push({},"38ce0kBlhVMUI5LUGyjyDu+","SummonWindow",void 0);var T=a.ccclass,W=a.property;t("SummonWindow",(b=T("SummonWindow"),g=W(c),w=W(m),B=W(l),D=W(l),b((L=n((G=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,i(n,"itemPrefab",L,o(n)),i(n,"content",z,o(n)),i(n,"summonButton",C,o(n)),i(n,"summon10Button",P,o(n)),n.items=[],n}e(n,t);var s=n.prototype;return s.onLoad=function(){var t,n,e=this;null==(t=this.summonButton)||t.node.on(l.EventType.CLICK,(function(){return e.performSummon(1)}),this),null==(n=this.summon10Button)||n.node.on(l.EventType.CLICK,(function(){return e.performSummon(10)}),this)},s.start=function(){var n=this;t.prototype.start.call(this),p.on("canvas-resize",(function(){n.setupGrid()}))},s.onDialogOpen=function(){this.setupGrid(),this.items.length>0&&this.displayItems(this.items)},s.setItems=function(t){this.items=t},s.displayItems=function(t){var n=this;this.content&&(this.content.removeAllChildren(),t.forEach((function(t){var e=f(n.itemPrefab),i=e.getComponent(y);i&&i.setup(t),n.content.addChild(e)})))},s.performSummon=function(){var t=r(u().mark((function t(n){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(n);case 2:e=t.sent,this.items=e.map((function(t){return new I("D",t.itemId)})),this.displayItems(this.items);case 5:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),s.setupGrid=function(){new d(168,50,this.content,[],100).setupGrid()},n}(h)).prototype,"itemPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(G.prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(G.prototype,"summonButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(G.prototype,"summon10Button",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=G))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/telegram-sdk-wrapper.ts",["cc","./index.mjs_cjs=&original=.js","./index.js"],(function(e){var t,i;return{setters:[function(e){t=e.cclegacy},null,function(e){i=e.default}],execute:function(){t._RF.push({},"d73f03LBsBEaa19uoEt2jt0","telegram-sdk-wrapper",void 0);var a,n=(a=i.default||i,e({WebApp:a,default:a}),a);e("initData",n.initData),e("isExpanded",n.isExpanded),e("viewportHeight",n.viewportHeight),e("viewportStableHeight",n.viewportStableHeight),e("openInvoice",n.openInvoice),e("expand",n.expand);t._RF.pop()}}}));

System.register("chunks:///_virtual/TelegramAuthAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.Action}],execute:function(){e._RF.push({},"5f639fLZ35DC6OgEYGrnQ1s","TelegramAuthAction",void 0);t("TelegramAuthAction",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/TelegramAuthService.ts",["cc","./ActionFactory.ts","./telegram-sdk-wrapper.ts"],(function(t){var e,n,r;return{setters:[function(t){e=t.cclegacy},function(t){n=t.ActionFactory},function(t){r=t.initData}],execute:function(){e._RF.push({},"189d8W+kDdGGrPGVoFFZRIo","TelegramAuthService",void 0);t("TelegramAuthService",function(){function t(){}return t.prototype.login=function(){var t=r;return n.getInstance().getTelegramAuthAction().execute({initData:String(t)})},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TimerUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){t("getTimeString",(function(){var t=function(){var t=new Date,r=new Date(t);r.setUTCHours(24,0,0,0);var e=r.getTime()-t.getTime();return Math.floor(e/1e3)}(),r=Math.floor(t/3600),e=Math.floor(t%3600/60),n=t%60;return r.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")})),r._RF.push({},"27481O1DshAD7HBGqYAUAsr","TimerUtil",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/TokenManager.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t.sys}],execute:function(){n._RF.push({},"c2f7fykDWBAsrIRWoq/b6iw","TokenManager",void 0);var o=e.localStorage,r=t("TokenManager",function(){function t(){this.token=void 0,this.token=null,this.loadToken()}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.getToken=function(){return this.token},n.setToken=function(t){this.token=t,this.saveToken()},n.clearToken=function(){this.token=null,o.removeItem(t.TOKEN_KEY)},n.hasToken=function(){return!!this.token},n.loadToken=function(){try{var n=o.getItem(t.TOKEN_KEY);n&&(this.token=n)}catch(t){console.error("Failed to load token from storage:",t)}},n.saveToken=function(){try{this.token&&o.setItem(t.TOKEN_KEY,this.token)}catch(t){console.error("Failed to save token to storage:",t)}},t}());r.instance=void 0,r.TOKEN_KEY="auth_token",n._RF.pop()}}}));

System.register("chunks:///_virtual/Tooltip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TooltipPosition.ts"],(function(t){var e,i,n,o,a,r,c,l,u,s,h,d,p,b,f,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Node,l=t.Label,u=t.RichText,s=t.Button,h=t.director,d=t.UIOpacity,p=t.tween,b=t.UITransform,f=t.Component},function(t){v=t.TooltipPosition}],execute:function(){var T,y,g,C,m,L,z,R,w,x,S,A,I;a._RF.push({},"f1cd0Z/O9dA2Y/kCsaI/3e4","Tooltip",void 0);var N=r.ccclass,_=r.property;t("Tooltip",(T=N("Tooltip"),y=_(c),g=_(l),C=_(u),m=_(s),T(((I=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"iconLayout",R,o(e)),n(e,"headerLabel",w,o(e)),n(e,"contentRichText",x,o(e)),n(e,"button",S,o(e)),n(e,"padding",A,o(e)),e.currentTooltipNode=null,e.isTooltipActive=!1,e}i(e,t),e.getInstance=function(){return e.instance};var a=e.prototype;return a.onLoad=function(){var t;e.instance=this,this.node.active=!1,this.deactivate();var i=null==(t=h.getScene())?void 0:t.getChildByName("Canvas");i&&i.on(c.EventType.TOUCH_START,this.onGlobalTouch,this,!0)},a.onDestroy=function(){var t,e=null==(t=h.getScene())?void 0:t.getChildByName("Canvas");null==e||e.off(c.EventType.TOUCH_START,this.onGlobalTouch,this)},a.onGlobalTouch=function(t){if(this.isTooltipActive){var e=t.target;e&&e!==this.button.node&&this.currentTooltipNode!==e&&(this.hide(),this.isTooltipActive=!1,this.currentTooltipNode=null)}},a.deactivate=function(){this.iconLayout.active=!1,this.button.node.active=!1},a.start=function(){this.contentRichText&&(this.contentRichText.maxWidth=350)},a.show=function(t,e){var i=this;if(this.deactivate(),this.contentRichText.string=t.content,t.iconNode&&(this.iconLayout.removeAllChildren(),this.iconLayout.active=!0,this.iconLayout.addChild(t.iconNode),t.header&&(this.headerLabel.string=t.header),this.iconLayout.addChild(this.headerLabel.node)),t.button){this.button.node.active=!0;var n=this.button.getComponentInChildren(l);n&&(n.string=t.button.label),this.button.node.off(s.EventType.CLICK),this.button.node.on(s.EventType.CLICK,t.button.callback,this)}this.node.active=!0;var o=this.node.getComponent(d)||this.node.addComponent(d);o.opacity=0,this.scheduleOnce((function(){i.updateTooltipSize(),v.positionTooltip(i.node,e),p(o).to(.2,{opacity:255}).start()}),0)},a.hide=function(){this.node.active=!1},a.updateTooltipSize=function(){var t=this.contentRichText.getComponent(b),e=this.iconLayout.getComponent(b),i=t.contentSize.width,n=e.contentSize.width,o=Math.max(i,n)+2*this.padding,a=this.node.getComponent(b);a.setContentSize(o,a.height)},e}(f)).instance=null,R=e((z=I).prototype,"iconLayout",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(z.prototype,"headerLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(z.prototype,"contentRichText",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(z.prototype,"button",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(z.prototype,"padding",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),L=z))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/TooltipData.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"4a264u/HmRBa7QjL/nDu5mN","TooltipData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/TooltipPosition.ts",["cc"],(function(t){var o,i,e,n;return{setters:[function(t){o=t.cclegacy,i=t.UITransform,e=t.Vec3,n=t.view}],execute:function(){o._RF.push({},"04a5c+Kc69Ho69D2SwJFD8E","TooltipPosition",void 0);t("TooltipPosition",function(){function t(){}return t.positionTooltip=function(t,o){var c=t.getComponent(i),r=o.getComponent(i),s=new e;o.getWorldPosition(s);var p=t.parent.getComponent(i).convertToNodeSpaceAR(s),u=c.width,h=c.height,g=r.width,a=r.height,l=p.x+g/2,f=p.y+a/2+h/2-15,v=n.getVisibleSize(),w=v.width/2,d=v.height/2;l+u/2>w&&(l=w-u/2-10),l-u/2<-w&&(l=u/2-w+10),f+h/2>d&&(f=p.y-a/2-h/2+15),f-h/2<-d&&(f=h/2-d+10),t.setPosition(new e(l,f,0))},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/TooltipTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tooltip.ts"],(function(t){var o,i,e,n,r,p,l,a,s;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,p=t._decorator,l=t.Node,a=t.Component},function(t){s=t.Tooltip}],execute:function(){var c,u,T;r._RF.push({},"dd00b7QYKhNXp9bsTSMO88v","TooltipTrigger",void 0);var h=p.ccclass,d=p.property;t("TooltipTrigger",h("TooltipTrigger")((T=o((u=function(t){function o(){for(var o,i=arguments.length,r=new Array(i),p=0;p<i;p++)r[p]=arguments[p];return o=t.call.apply(t,[this].concat(r))||this,e(o,"tooltipData",T,n(o)),o}i(o,t);var r=o.prototype;return r.onLoad=function(){this.node.on(l.EventType.TOUCH_START,this.showTooltip,this)},r.setTooltipData=function(t){this.tooltipData=t},r.showTooltip=function(t){t.propagationStopped=!0;var o=s.getInstance();o.currentTooltipNode!==this.node?o&&(o.show(this.tooltipData,this.node),o.currentTooltipNode=this.node,o.isTooltipActive=!0):this.hideTooltip()},r.hideTooltip=function(){var t=s.getInstance();t&&(t.currentTooltipNode=null,t.isTooltipActive=!1,t.hide())},o}(a)).prototype,"tooltipData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=u))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/TopBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerStore.ts","./Player.ts"],(function(e){var n,r,t,i,a,o,u,c,l,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,u=e.Label,c=e.Component},function(e){l=e.default},function(e){s=e.calculateLevelFromExperience}],execute:function(){var b,p,f,v,h,m,y;a._RF.push({},"58a78mhti9DFaLpajYC5qtg","TopBar",void 0);var L=o.ccclass,d=o.property;e("TopBar",(b=L("TopBar"),p=d(u),f=d(u),b((m=n((h=function(e){function n(){for(var n,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,t(n,"nameLabel",m,i(n)),t(n,"levelLabel",y,i(n)),n.unsubscribeName=void 0,n.unsubscribeExp=void 0,n}r(n,e);var a=n.prototype;return a.start=function(){var e=this;this.unsubscribeName=l.subscribe((function(e){return e.name}),(function(n,r){e.node.active&&(e.nameLabel.string=n)})),this.unsubscribeExp=l.subscribe((function(e){return e.experience}),(function(n){e.node.active&&(e.levelLabel.string=s(n).toString())}))},a.onDestroy=function(){this.unsubscribeName(),this.unsubscribeExp()},n}(c)).prototype,"nameLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(h.prototype,"levelLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=h))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/VictoryWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./ItemIconTemplate.ts","./PlayerStore.ts","./ItemInstanceIconData.ts"],(function(t){var e,i,n,r,o,a,c,l,u,s,d,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Prefab,l=t.Node,u=t.instantiate},function(t){s=t.BaseDialog},function(t){d=t.ItemIconTemplate},function(t){f=t.default},function(t){p=t.ItemInstanceIconData}],execute:function(){var m,y,I,g,h,b,v;o._RF.push({},"c7c896LGdFLt6DvM7lRGJm+","VictoryWindow",void 0);var D=a.ccclass,w=a.property;t("VictoryWindow",(m=D("VictoryWindow"),y=w(c),I=w(l),m((b=e((h=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"itemIconPrefab",b,r(e)),n(e,"itemGrid",v,r(e)),e}return i(e,t),e.prototype.setup=function(t){var e=this;this.itemGrid.removeAllChildren(),t.forEach((function(t){var i=u(e.itemIconPrefab),n=i.getComponent(d),r=new p(t.grade,t.item.id);n.setup(r),e.itemGrid.addChild(i),f.getState().addItem(t.getData())}))},e}(s)).prototype,"itemIconPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(h.prototype,"itemGrid",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=h))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/WelcomeOfferWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseDialog.ts","./telegram-sdk-wrapper.ts","./IAPPackageConfig.ts","./CountableIconTemplate.ts","./TimerUtil.ts"],(function(e){var t,n,i,r,o,a,l,u,c,s,p,f,m,b,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Button,u=e.Prefab,c=e.Node,s=e.Label,p=e.instantiate},function(e){f=e.BaseDialog},function(e){m=e.openInvoice},function(e){b=e.iapPackeges},function(e){d=e.CountableIconTemplate},function(e){h=e.getTimeString}],execute:function(){var y,g,v,I,w,A,B,C,D,L,P;o._RF.push({},"0380epjI9NC75qlvxYBY2FQ","WelcomeOfferWindow",void 0);var T=a.ccclass,W=a.property;e("WelcomeOfferWindow",(y=T("WelcomeOfferWindow"),g=W(l),v=W(u),I=W(c),w=W(s),y((C=t((B=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"buyButton",C,r(t)),i(t,"countableItemIconPrefab",D,r(t)),i(t,"rewards",L,r(t)),i(t,"timerLabel",P,r(t)),t.iapId="1",t._timeAccumulator=0,t}n(t,e);var o=t.prototype;return o.start=function(){var t;e.prototype.start.call(this),null==(t=this.buyButton)||t.node.on(l.EventType.CLICK,this.onBuy,this)},o.onDialogOpen=function(){var e=this;this.updateTimerDisplay(),this.rewards.removeAllChildren();var t=b.find((function(t){return t.id===e.iapId}));if(t)for(var n=t.resources,i=0,r=Object.entries(n);i<r.length;i++){var o=r[i],a=o[0],l=o[1],u=p(this.countableItemIconPrefab),c=null==u?void 0:u.getComponent(d);null==c||c.setup(a,l),this.rewards.addChild(u)}},o.setup=function(e){this.iapId=e},o.onBuy=function(){m("https://t.me/$KzphlSXQCUkLAAAARpwKN3SGqWE",(function(e){"paid"===e?console.log("Successsfull payment!"):console.log("Unsuccesssfull payment!")}))},o.update=function(e){this._timeAccumulator+=e,this._timeAccumulator>=1&&(this.updateTimerDisplay(),this._timeAccumulator=0)},o.updateTimerDisplay=function(){this.timerLabel&&(this.timerLabel.string=""+h())},t}(f)).prototype,"buyButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(B.prototype,"countableItemIconPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(B.prototype,"rewards",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(B.prototype,"timerLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=B))||A));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});